<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MBA Game Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#5D5CDE",
              secondary: "#f3f4f6",
              smith: {
                red: "#e21833",
                yellow: "#ffd200",
                dark: "#1a1a1a",
              },
            },
          },
        },
        darkMode: "class",
      };

      // Check for dark mode preference
      if (
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches
      ) {
        document.documentElement.classList.add("dark");
      }
      window
        .matchMedia("(prefers-color-scheme: dark)")
        .addEventListener("change", (event) => {
          if (event.matches) {
            document.documentElement.classList.add("dark");
          } else {
            document.documentElement.classList.remove("dark");
          }
        });
    </script>
    <style>
      .loading-spinner {
        border: 3px solid rgba(0, 0, 0, 0.1);
        border-radius: 50%;
        border-top: 3px solid #5d5cde;
        width: 24px;
        height: 24px;
        animation: spin 1s linear infinite;
      }

      .dark .loading-spinner {
        border: 3px solid rgba(255, 255, 255, 0.1);
        border-top: 3px solid #5d5cde;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-track {
        background: #f1f1f1;
      }

      .dark ::-webkit-scrollbar-track {
        background: #2d2d2d;
      }

      ::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: #555;
      }

      .sidebar-link.active {
        background-color: rgba(93, 92, 222, 0.1);
        border-left-color: #5d5cde;
      }

      .dark .sidebar-link.active {
        background-color: rgba(93, 92, 222, 0.2);
      }
    </style>
  </head> 
  <body
    class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen"
  >
    <div id="app" class="min-h-screen flex flex-col">
      <div
        id="login-container"
        class="flex flex-col items-center justify-center min-h-screen"
      >
        <div class="text-center mb-8">
          <h1 class="text-3xl md:text-4xl font-bold mb-2 text-smith-red">
            MBA Game Admin Dashboard
          </h1>
          <p class="text-lg text-gray-600 dark:text-gray-400">
            Manage 2025 Cohort Score Tracking System
          </p>
        </div>
        <div
          class="w-full max-w-md bg-white dark:bg-gray-800 rounded-lg shadow-md p-6"
        >
          <h2 class="text-2xl font-bold mb-6 text-center">Admin Sign In</h2>
          <form id="admin-login-form" class="space-y-4">
            <div>
              <label for="admin-email" class="block text-sm font-medium mb-1"
                >Email Address</label
              >
              <input
                type="email"
                id="admin-email"
                class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                placeholder="admin@umd.edu"
                required
              />
            </div>
            <div>
              <label for="admin-password" class="block text-sm font-medium mb-1"
                >Password</label
              >
              <input
                type="password"
                id="admin-password"
                class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                placeholder="••••••••"
                required
              />
            </div>
            <button
              type="submit"
              class="w-full bg-primary hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition duration-200"
            >
              Sign In
            </button>
          </form>
        </div>
        <div class="mt-4 text-center">
          <button id="admin-demo-login" class="text-primary hover:underline">
            Use Demo Admin Mode
          </button>
          
        </div>
      </div>

      <div id="admin-main" class="hidden flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <div
          class="w-64 bg-white dark:bg-gray-800 border-r dark:border-gray-700 shadow-sm"
        >
          <div class="p-4 border-b dark:border-gray-700">
            <div class="flex items-center">
              <img
                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBmaWxsPSIjZTIxODMzIj48cGF0aCBkPSJNNTAgOTBjMjIuMSAwIDQwLTE3LjkgNDAtNDBTNzIuMSAxMCA1MCAxMCAxMCAyNy45IDEwIDUwczE3LjkgNDAgNDAgNDB6bTAtNzBjMTYuNSAwIDMwIDEzLjUgMzAgMzBTNjYuNSA4MCA1MCA4MCAyMCA2Ni41IDIwIDUwczEzLjUtMzAgMzAtMzB6Ii8+PHBhdGggZD0iTTM1IDY1aDMwVjM1SDM1djMwem0xMC0yMGgxMHYxMEg0NVY0NXoiLz48L3N2Zz4="
                alt="Smith Logo"
                class="h-8 w-8 mr-2"
              />
              <div>
                <h1 class="text-xl font-bold text-smith-red">
                  MBA Game Admin
                </h1>
              </div>
            </div>
          </div>
          <nav class="p-4">
            <ul class="space-y-1">
              <li>
                <a
                  href="#"
                  class="sidebar-link active block py-2 px-4 rounded-md border-l-4 transition duration-200"
                  data-target="dashboard"
                >
                  <div class="flex items-center">
                    <i class="fas fa-tachometer-alt w-5"></i>
                    <span class="ml-3">Dashboard</span>
                  </div>
                </a>
              </li>
              <li>
                <a
                  href="#"
                  class="sidebar-link block py-2 px-4 rounded-md border-l-4 border-transparent hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-200"
                  data-target="leaderboards"
                >
                  <div class="flex items-center">
                    <i class="fas fa-trophy w-5"></i>
                    <span class="ml-3">Leaderboards</span>
                  </div>
                </a>
              </li>
              <li>
                <a
                  href="#"
                  class="sidebar-link block py-2 px-4 rounded-md border-l-4 border-transparent hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-200"
                  data-target="activities"
                >
                  <div class="flex items-center">
                    <i class="fas fa-tasks w-5"></i>
                    <span class="ml-3">Activities</span>
                  </div>
                </a>
              </li>
              <li>
                <a
                  href="#"
                  class="sidebar-link block py-2 px-4 rounded-md border-l-4 border-transparent hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-200"
                  data-target="pending"
                >
                  <div class="flex items-center">
                    <i class="fas fa-hourglass-half w-5"></i>
                    <span class="ml-3">Pending Approvals</span>
                    <span
                      id="pending-count"
                      class="ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full"
                      >0</span
                    >
                  </div>
                </a>
              </li>
              <li>
                <a
                  href="#"
                  class="sidebar-link block py-2 px-4 rounded-md border-l-4 border-transparent hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-200"
                  data-target="teams"
                >
                  <div class="flex items-center">
                    <i class="fas fa-users w-5"></i>
                    <span class="ml-3">Teams</span>
                  </div>
                </a>
              </li>
              <li>
                <a
                  href="#"
                  class="sidebar-link block py-2 px-4 rounded-md border-l-4 border-transparent hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-200"
                  data-target="users"
                >
                  <div class="flex items-center">
                    <i class="fas fa-user w-5"></i>
                    <span class="ml-3">Users</span>
                  </div>
                </a>
              </li>
              <li>
                <a
                  href="#"
                  class="sidebar-link block py-2 px-4 rounded-md border-l-4 border-transparent hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-200"
                  data-target="points"
                >
                  <div class="flex items-center">
                    <i class="fas fa-plus-circle w-5"></i>
                    <span class="ml-3">Manual Points</span>
                  </div>
                </a>
              </li>
              <li>
                <a
                  href="#"
                  class="sidebar-link block py-2 px-4 rounded-md border-l-4 border-transparent hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-200"
                  data-target="reports"
                >
                  <div class="flex items-center">
                    <i class="fas fa-file-alt w-5"></i>
                    <span class="ml-3">Reports</span>
                  </div>
                </a>
              </li>
              <li>
                <a
                  href="#"
                  class="sidebar-link block py-2 px-4 rounded-md border-l-4 border-transparent hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-200"
                  data-target="notifications"
                >
                  <div class="flex items-center">
                    <i class="fas fa-bell w-5"></i>
                    <span class="ml-3">Notifications</span>
                  </div>
                </a>
              </li>
              <li>
                <a
                  href="#"
                  class="sidebar-link block py-2 px-4 rounded-md border-l-4 border-transparent hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-200"
                  data-target="logs"
                >
                  <div class="flex items-center">
                    <i class="fas fa-history w-5"></i>
                    <span class="ml-3">Admin Logs</span>
                  </div>
                </a>
              </li>
            </ul>
          </nav>
          <div class="absolute bottom-0 w-64 p-4 border-t dark:border-gray-700">
            <button
              id="admin-logout"
              class="flex items-center text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary"
            >
              <i class="fas fa-sign-out-alt"></i>
              <span class="ml-2">Logout</span>
            </button>
          </div>
        </div>

        <!-- Main content -->
        <div class="flex-1 flex flex-col overflow-hidden">
          <!-- Topbar -->
          <header
            class="bg-white dark:bg-gray-800 shadow-sm border-b dark:border-gray-700 h-16 flex items-center px-6"
          >
            <div class="flex-1">
              <h2 id="page-title" class="text-xl font-semibold">Dashboard</h2>
            </div>
            <div class="flex items-center space-x-4">
              <div class="text-sm">
                <span id="current-date"></span>
              </div>
              <div class="relative">
                <button
                  class="flex items-center justify-center h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none"
                >
                  <i class="fas fa-user"></i>
                </button>
              </div>
            </div>
          </header>

          <!-- Content area -->
          <main class="flex-1 overflow-y-auto p-6">
            <!-- Dashboard Section -->
            <div id="dashboard-content" class="content-section">
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                <div
                  class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 flex items-center"
                >
                  <div
                    class="w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center text-blue-500 dark:text-blue-300 mr-4"
                  >
                    <i class="fas fa-users text-xl"></i>
                  </div>
                  <div>
                    <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">
                      Total Users
                    </h3>
                    <p id="total-users" class="text-2xl font-bold">0</p>
                  </div>
                </div>
                <div
                  class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 flex items-center"
                >
                  <div
                    class="w-12 h-12 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center text-green-500 dark:text-green-300 mr-4"
                  >
                    <i class="fas fa-check-circle text-xl"></i>
                  </div>
                  <div>
                    <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">
                      Approved Activities
                    </h3>
                    <p id="approved-activities" class="text-2xl font-bold">0</p>
                  </div>
                </div>
                <div
                  class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 flex items-center"
                >
                  <div
                    class="w-12 h-12 rounded-full bg-yellow-100 dark:bg-yellow-900 flex items-center justify-center text-yellow-500 dark:text-yellow-300 mr-4"
                  >
                    <i class="fas fa-clock text-xl"></i>
                  </div>
                  <div>
                    <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">
                      Pending Activities
                    </h3>
                    <p id="pending-activities" class="text-2xl font-bold">0</p>
                  </div>
                </div>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div
                  class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 overflow-hidden"
                >
                  <h3 class="text-lg font-semibold mb-4">
                    Activity Submissions
                  </h3>
                  <div class="h-64">
                    <canvas id="activity-chart"></canvas>
                  </div>
                </div>
                <div
                  class="bg-white dark:bg-gray-800 rounded-lg shadow p-6 overflow-hidden"
                >
                  <h3 class="text-lg font-semibold mb-4">
                    Top Teams (Points)
                  </h3>
                  <div class="h-64">
                    <canvas id="team-chart"></canvas>
                  </div>
                </div>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div
                  class="col-span-1 md:col-span-2 bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden"
                >
                  <div class="flex justify-between items-center p-4 border-b dark:border-gray-700">
                    <h3 class="text-lg font-semibold">Recent Activity</h3>
                    <a
                      href="#"
                      class="text-sm text-primary hover:text-indigo-700"
                      data-target="pending"
                      >View All</a
                    >
                  </div>
                  <div class="overflow-x-auto">
                    <table class="w-full">
                      <thead class="bg-gray-50 dark:bg-gray-700">
                        <tr>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            User
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Activity
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Points
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Date
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Status
                          </th>
                        </tr>
                      </thead>
                      <tbody
                        id="recent-activities"
                        class="divide-y divide-gray-200 dark:divide-gray-700"
                      >
                        <!-- Will be populated by JS -->
                      </tbody>
                    </table>
                  </div>
                </div>

                <div
                  class="bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden"
                >
                  <div class="flex justify-between items-center p-4 border-b dark:border-gray-700">
                    <h3 class="text-lg font-semibold">Quick Actions</h3>
                  </div>
                  <div class="p-4 space-y-4">
                    <button
                      class="quick-action w-full flex items-center p-3 rounded-md bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 transition duration-200"
                      data-target="reports"
                    >
                      <div
                        class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary mr-3"
                      >
                        <i class="fas fa-file-alt"></i>
                      </div>
                      <span>Generate Weekly Report</span>
                    </button>
                    <button
                      class="quick-action w-full flex items-center p-3 rounded-md bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 transition duration-200"
                      data-target="notifications"
                    >
                      <div
                        class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary mr-3"
                      >
                        <i class="fas fa-bell"></i>
                      </div>
                      <span>Send Notification</span>
                    </button>
                    <button
                      class="quick-action w-full flex items-center p-3 rounded-md bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 transition duration-200"
                      data-target="pending"
                    >
                      <div
                        class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary mr-3"
                      >
                        <i class="fas fa-check"></i>
                      </div>
                      <span>Review Pending Submissions</span>
                    </button>
                    <button
                      class="quick-action w-full flex items-center p-3 rounded-md bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 transition duration-200"
                      data-target="points"
                    >
                      <div
                        class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary mr-3"
                      >
                        <i class="fas fa-plus-circle"></i>
                      </div>
                      <span>Add Manual Points</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Leaderboards Section -->
            <div id="leaderboards-content" class="content-section hidden">
              <div class="mb-6">
                <div
                  class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden"
                >
                  <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                    <h3 class="text-lg font-semibold">Team Leaderboard</h3>
                    <div class="flex space-x-2">
                      <button
                        id="export-team-csv"
                        class="px-3 py-1 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded text-sm flex items-center"
                      >
                        <i class="fas fa-download mr-1"></i> CSV
                      </button>
                      <button
                        id="export-team-pdf"
                        class="px-3 py-1 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded text-sm flex items-center"
                      >
                        <i class="fas fa-file-pdf mr-1"></i> PDF
                      </button>
                    </div>
                  </div>
                  <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                      <thead class="bg-gray-50 dark:bg-gray-700">
                        <tr>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Rank
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Team
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Members
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Points
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Actions
                          </th>
                        </tr>
                      </thead>
                      <tbody
                        id="team-leaderboard-table"
                        class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                      >
                        <!-- Will be filled by JS -->
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>

              <div>
                <div
                  class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden"
                >
                  <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                    <h3 class="text-lg font-semibold">Individual Leaderboard</h3>
                    <div class="flex">
                      <div class="relative mr-2">
                        <input
                          type="text"
                          id="search-individual"
                          placeholder="Search by name or team..."
                          class="w-64 px-4 py-2 border rounded-md text-sm focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                        />
                        <div class="absolute right-3 top-2.5 text-gray-400">
                          <i class="fas fa-search"></i>
                        </div>
                      </div>
                      <select
                        id="filter-team"
                        class="px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                      >
                        <option value="">All Teams</option>
                        <!-- Will be filled by JS -->
                      </select>
                    </div>
                  </div>
                  <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                      <thead class="bg-gray-50 dark:bg-gray-700">
                        <tr>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Rank
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Name
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Team
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Points
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Activities
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Details
                          </th>
                        </tr>
                      </thead>
                      <tbody
                        id="individual-leaderboard-table"
                        class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                      >
                        <!-- Will be filled by JS -->
                      </tbody>
                    </table>
                  </div>
                  <div class="p-4 flex justify-between items-center border-t dark:border-gray-700">
                    <div class="text-sm text-gray-500 dark:text-gray-400">
                      <span id="total-individuals">0</span> individuals found
                    </div>
                    <div class="flex space-x-1">
                      <button
                        id="prev-page"
                        class="px-3 py-1 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded text-sm disabled:opacity-50"
                      >
                        Previous
                      </button>
                      <button
                        id="next-page"
                        class="px-3 py-1 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded text-sm disabled:opacity-50"
                      >
                        Next
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Activities Management Section -->
            <div id="activities-content" class="content-section hidden">
              <div class="mb-6 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="p-4 border-b dark:border-gray-700">
                  <h3 class="text-lg font-semibold">Activity Definitions</h3>
                  <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                    Manage available activity types and their point values
                  </p>
                </div>
                <div class="overflow-x-auto">
                  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                    <thead class="bg-gray-50 dark:bg-gray-700">
                      <tr>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          ID
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Activity Name
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Description
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Points
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Limit (per user)
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Evidence Required
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Status
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Actions
                        </th>
                      </tr>
                    </thead>
                    <tbody
                      id="activities-table"
                      class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                    >
                      <!-- Will be filled by JS -->
                    </tbody>
                  </table>
                </div>
                <div class="p-4 border-t dark:border-gray-700">
                  <button
                    id="add-activity-btn"
                    class="px-4 py-2 bg-primary hover:bg-indigo-700 text-white rounded-md flex items-center text-sm"
                  >
                    <i class="fas fa-plus mr-2"></i> Add New Activity
                  </button>
                </div>
              </div>
            </div>

            <!-- Pending Approvals Section -->
            <div id="pending-content" class="content-section hidden">
              <div class="mb-6 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                  <h3 class="text-lg font-semibold">Pending Submissions</h3>
                  <div class="flex">
                    <div class="relative mr-2">
                      <input
                        type="text"
                        id="search-pending"
                        placeholder="Search by user or activity..."
                        class="w-64 px-4 py-2 border rounded-md text-sm focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                      />
                      <div class="absolute right-3 top-2.5 text-gray-400">
                        <i class="fas fa-search"></i>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="overflow-x-auto">
                  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                    <thead class="bg-gray-50 dark:bg-gray-700">
                      <tr>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Date
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          User
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Team
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Activity
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Details
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Points
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Evidence
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Actions
                        </th>
                      </tr>
                    </thead>
                    <tbody
                      id="pending-table"
                      class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                    >
                      <!-- Will be filled by JS -->
                    </tbody>
                  </table>
                </div>
                <div id="no-pending" class="p-8 text-center hidden">
                  <div class="text-gray-500 dark:text-gray-400">
                    <i class="fas fa-check-circle text-3xl mb-2"></i>
                    <p>No pending submissions found!</p>
                  </div>
                </div>
              </div>

              <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="p-4 border-b dark:border-gray-700">
                  <h3 class="text-lg font-semibold">Recently Processed</h3>
                  <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                    Last 10 processed submissions
                  </p>
                </div>
                <div class="overflow-x-auto">
                  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                    <thead class="bg-gray-50 dark:bg-gray-700">
                      <tr>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Date
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          User
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Activity
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Points
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Status
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Processed By
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Notes
                        </th>
                      </tr>
                    </thead>
                    <tbody
                      id="processed-table"
                      class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                    >
                      <!-- Will be filled by JS -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <!-- Teams Section -->
            <div id="teams-content" class="content-section hidden">
              <div class="mb-6 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                  <h3 class="text-lg font-semibold">Team Management</h3>
                  <button
                    id="add-team-btn"
                    class="px-3 py-1 bg-primary hover:bg-indigo-700 text-white rounded text-sm flex items-center"
                  >
                    <i class="fas fa-plus mr-1"></i> Add Team
                  </button>
                </div>
                <div class="overflow-x-auto">
                  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                    <thead class="bg-gray-50 dark:bg-gray-700">
                      <tr>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Team
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Members
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Total Points
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Avg. Points per Member
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Meet-n-Greet Attendance
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Actions
                        </th>
                      </tr>
                    </thead>
                    <tbody
                      id="teams-table"
                      class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                    >
                      <!-- Will be filled by JS -->
                    </tbody>
                  </table>
                </div>
              </div>

              <div id="team-detail" class="hidden bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                  <div class="flex items-center">
                    <button id="back-to-teams" class="mr-2 text-gray-500">
                      <i class="fas fa-arrow-left"></i>
                    </button>
                    <h3 class="text-lg font-semibold">
                      <span id="team-detail-name"></span>
                    </h3>
                  </div>
                  <button
                    id="edit-team-btn"
                    class="px-3 py-1 bg-primary hover:bg-indigo-700 text-white rounded text-sm flex items-center"
                  >
                    <i class="fas fa-edit mr-1"></i> Edit Team
                  </button>
                </div>
                <div class="p-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                    <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">
                      Team Stats
                    </h4>
                    <div class="space-y-2">
                      <div class="flex justify-between">
                        <span class="text-sm">Total Points:</span>
                        <span id="team-detail-points" class="font-bold"></span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-sm">Rank:</span>
                        <span id="team-detail-rank" class="font-bold"></span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-sm">Members:</span>
                        <span id="team-detail-members" class="font-bold"></span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-sm">Avg. Points/Member:</span>
                        <span id="team-detail-avg" class="font-bold"></span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-sm">Meet-n-Greets Held:</span>
                        <span id="team-detail-meetups" class="font-bold"></span>
                      </div>
                    </div>
                  </div>
                  <div class="md:col-span-2">
                    <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">
                      Team Activity
                    </h4>
                    <div class="h-48">
                      <canvas id="team-activity-chart"></canvas>
                    </div>
                  </div>
                </div>
                <div class="p-4 border-t dark:border-gray-700">
                  <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">
                    Team Members
                  </h4>
                  <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                      <thead class="bg-gray-50 dark:bg-gray-700">
                        <tr>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Name
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Email
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Points
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            # Activities
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Actions
                          </th>
                        </tr>
                      </thead>
                      <tbody
                        id="team-members-table"
                        class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                      >
                        <!-- Will be filled by JS -->
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

            <!-- Users Section -->
            <div id="users-content" class="content-section hidden">
              <div class="mb-6 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                  <h3 class="text-lg font-semibold">User Management</h3>
                  <div class="flex">
                    <div class="relative mr-2">
                      <input
                        type="text"
                        id="search-users"
                        placeholder="Search by name or email..."
                        class="w-64 px-4 py-2 border rounded-md text-sm focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                      />
                      <div class="absolute right-3 top-2.5 text-gray-400">
                        <i class="fas fa-search"></i>
                      </div>
                    </div>
                    <select
                      id="filter-users-team"
                      class="px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600 mr-2"
                    >
                      <option value="">All Teams</option>
                      <!-- Will be filled by JS -->
                    </select>
                    <button
                      id="add-user-btn"
                      class="px-3 py-1 bg-primary hover:bg-indigo-700 text-white rounded text-sm flex items-center"
                    >
                      <i class="fas fa-plus mr-1"></i> Add User
                    </button>
                  </div>
                </div>
                <div class="overflow-x-auto">
                  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                    <thead class="bg-gray-50 dark:bg-gray-700">
                      <tr>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          ID
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Name
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Email
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Team
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Points
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Activities
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Actions
                        </th>
                      </tr>
                    </thead>
                    <tbody
                      id="users-table"
                      class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                    >
                      <!-- Will be filled by JS -->
                    </tbody>
                  </table>
                </div>
                <div class="p-4 flex justify-between items-center border-t dark:border-gray-700">
                  <div class="text-sm text-gray-500 dark:text-gray-400">
                    <span id="total-users-count">0</span> users found
                  </div>
                  <div class="flex space-x-1">
                    <button
                      id="prev-users-page"
                      class="px-3 py-1 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded text-sm disabled:opacity-50"
                    >
                      Previous
                    </button>
                    <button
                      id="next-users-page"
                      class="px-3 py-1 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded text-sm disabled:opacity-50"
                    >
                      Next
                    </button>
                  </div>
                </div>
              </div>

              <div id="user-detail" class="hidden bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                  <div class="flex items-center">
                    <button id="back-to-users" class="mr-2 text-gray-500">
                      <i class="fas fa-arrow-left"></i>
                    </button>
                    <h3 class="text-lg font-semibold">
                      <span id="user-detail-name"></span>
                    </h3>
                  </div>
                  <div class="flex space-x-2">
                    <button
                      id="edit-user-btn"
                      class="px-3 py-1 bg-primary hover:bg-indigo-700 text-white rounded text-sm flex items-center"
                    >
                      <i class="fas fa-edit mr-1"></i> Edit User
                    </button>
                    <button
                      id="add-points-user-btn"
                      class="px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm flex items-center"
                      data-target="points"
                    >
                      <i class="fas fa-plus-circle mr-1"></i> Add Points
                    </button>
                  </div>
                </div>
                <div class="p-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                    <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">
                      User Information
                    </h4>
                    <div class="space-y-2">
                      <div class="flex justify-between">
                        <span class="text-sm">Email:</span>
                        <span id="user-detail-email" class="font-medium"></span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-sm">Team:</span>
                        <span id="user-detail-team" class="font-medium"></span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-sm">Total Points:</span>
                        <span id="user-detail-points" class="font-bold"></span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-sm">Rank:</span>
                        <span id="user-detail-rank" class="font-bold"></span>
                      </div>
                      <div class="flex justify-between">
                        <span class="text-sm">Activities:</span>
                        <span id="user-detail-activities" class="font-bold"></span>
                      </div>
                    </div>
                  </div>
                  <div class="md:col-span-2">
                    <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">
                      Activity Breakdown
                    </h4>
                    <div class="h-48">
                      <canvas id="user-activity-chart"></canvas>
                    </div>
                  </div>
                </div>
                <div class="p-4 border-t dark:border-gray-700">
                  <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">
                    Activity History
                  </h4>
                  <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                      <thead class="bg-gray-50 dark:bg-gray-700">
                        <tr>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Date
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Activity
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Details
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Points
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Status
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Actions
                          </th>
                        </tr>
                      </thead>
                      <tbody
                        id="user-activities-table"
                        class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                      >
                        <!-- Will be filled by JS -->
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

            <!-- Manual Points Section -->
            <div id="points-content" class="content-section hidden">
              <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="p-4 border-b dark:border-gray-700">
                  <h3 class="text-lg font-semibold">Manual Points Adjustment</h3>
                  <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                    Add points for verified offline activities or make admin overrides
                  </p>
                </div>
                <div class="p-6">
                  <form id="points-form" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div>
                        <label for="points-user" class="block text-sm font-medium mb-1">
                          Select User
                        </label>
                        <div class="relative">
                          <select
                            id="points-user"
                            class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                            required
                          >
                            <option value="" selected disabled>Select a user</option>
                            <!-- Will be filled by JS -->
                          </select>
                        </div>
                      </div>
                      <div>
                        <label for="points-activity" class="block text-sm font-medium mb-1">
                          Activity Type
                        </label>
                        <select
                          id="points-activity"
                          class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                          required
                        >
                          <option value="" selected disabled>Select activity type</option>
                          <option value="manual_adjustment">Manual Admin Adjustment</option>
                          <!-- Other activities will be filled by JS -->
                        </select>
                      </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div>
                        <label for="points-value" class="block text-sm font-medium mb-1">
                          Points to Add
                        </label>
                        <input
                          type="number"
                          id="points-value"
                          min="1"
                          max="100"
                          class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                          required
                        />
                        <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">
                          Use negative values to subtract points
                        </p>
                      </div>
                      <div>
                        <label for="points-evidence" class="block text-sm font-medium mb-1">
                          Evidence URL (Optional)
                        </label>
                        <input
                          type="url"
                          id="points-evidence"
                          placeholder="https://..."
                          class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                        />
                      </div>
                    </div>
                    <div>
                      <label for="points-notes" class="block text-sm font-medium mb-1">
                        Admin Notes
                      </label>
                      <textarea
                        id="points-notes"
                        rows="3"
                        class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                        placeholder="Explain why you're adding these points..."
                        required
                      ></textarea>
                    </div>
                    <div>
                      <button
                        type="submit"
                        class="px-4 py-2 bg-primary hover:bg-indigo-700 text-white rounded-md"
                      >
                        Submit Points Adjustment
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <div class="mt-6 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="p-4 border-b dark:border-gray-700">
                  <h3 class="text-lg font-semibold">Recent Manual Adjustments</h3>
                </div>
                <div class="overflow-x-auto">
                  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                    <thead class="bg-gray-50 dark:bg-gray-700">
                      <tr>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Date
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          User
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Team
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Activity
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Points
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Admin
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Notes
                        </th>
                      </tr>
                    </thead>
                    <tbody
                      id="manual-points-table"
                      class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                    >
                      <!-- Will be filled by JS -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <!-- Reports Section -->
            <div id="reports-content" class="content-section hidden">
              <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="p-4 border-b dark:border-gray-700">
                  <h3 class="text-lg font-semibold">Generate Reports</h3>
                  <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                    Create and export reports with game statistics
                  </p>
                </div>
                <div class="p-6">
                  <form id="report-form" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div>
                        <label for="report-type" class="block text-sm font-medium mb-1">
                          Report Type
                        </label>
                        <select
                          id="report-type"
                          class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                          required
                        >
                          <option value="" selected disabled>Select report type</option>
                          <option value="weekly">Weekly Summary (Friday Report)</option>
                          <option value="team">Team Performance</option>
                          <option value="activity">Activity Analysis</option>
                          <option value="user">User Participation</option>
                          <option value="custom">Custom Report</option>
                        </select>
                      </div>
                      <div>
                        <label for="report-date-range" class="block text-sm font-medium mb-1">
                          Date Range
                        </label>
                        <select
                          id="report-date-range"
                          class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                          required
                        >
                          <option value="this-week" selected>This Week (Monday-Thursday 12PM)</option>
                          <option value="last-week">Last Week</option>
                          <option value="this-month">This Month</option>
                          <option value="last-month">Last Month</option>
                          <option value="all-time">All Time</option>
                          <option value="custom">Custom Range</option>
                        </select>
                      </div>
                    </div>
                    <div id="custom-date-range" class="grid grid-cols-1 md:grid-cols-2 gap-6 hidden">
                      <div>
                        <label for="report-start-date" class="block text-sm font-medium mb-1">
                          Start Date
                        </label>
                        <input
                          type="date"
                          id="report-start-date"
                          class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                        />
                      </div>
                      <div>
                        <label for="report-end-date" class="block text-sm font-medium mb-1">
                          End Date
                        </label>
                        <input
                          type="date"
                          id="report-end-date"
                          class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                        />
                      </div>
                    </div>
                    <div>
                      <h4 class="text-sm font-medium mb-2">Include in Report:</h4>
                      <div class="space-y-2">
                        <div class="flex items-center">
                          <input
                            type="checkbox"
                            id="include-top-teams"
                            checked
                            class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                          />
                          <label for="include-top-teams" class="ml-2 block text-sm">
                            Top Teams
                          </label>
                        </div>
                        <div class="flex items-center">
                          <input
                            type="checkbox"
                            id="include-top-individuals"
                            checked
                            class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                          />
                          <label for="include-top-individuals" class="ml-2 block text-sm">
                            Top Individuals
                          </label>
                        </div>
                        <div class="flex items-center">
                          <input
                            type="checkbox"
                            id="include-pending"
                            checked
                            class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                          />
                          <label for="include-pending" class="ml-2 block text-sm">
                            Pending Submissions
                          </label>
                        </div>
                        <div class="flex items-center">
                          <input
                            type="checkbox"
                            id="include-flagged"
                            checked
                            class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                          />
                          <label for="include-flagged" class="ml-2 block text-sm">
                            Flagged Activities
                          </label>
                        </div>
                        <div class="flex items-center">
                          <input
                            type="checkbox"
                            id="include-activity-breakdown"
                            class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                          />
                          <label for="include-activity-breakdown" class="ml-2 block text-sm">
                            Activity Type Breakdown
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="flex items-center space-x-4">
                      <button
                        type="button"
                        id="preview-report"
                        class="px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md"
                      >
                        <i class="fas fa-eye mr-1"></i> Preview
                      </button>
                      <button
                        type="button"
                        id="download-report-pdf"
                        class="px-4 py-2 bg-primary hover:bg-indigo-700 text-white rounded-md"
                      >
                        <i class="fas fa-file-pdf mr-1"></i> Export PDF
                      </button>
                      <button
                        type="button"
                        id="email-report"
                        class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md"
                      >
                        <i class="fas fa-envelope mr-1"></i> Email Report
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <div id="report-preview" class="mt-6 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden hidden">
                <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                  <h3 class="text-lg font-semibold">Report Preview</h3>
                  <button
                    id="close-preview"
                    class="text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"
                  >
                    <i class="fas fa-times"></i>
                  </button>
                </div>
                <div class="p-6" id="report-content">
                  <!-- Will be filled by JS -->
                </div>
              </div>

              <div class="mt-6 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="p-4 border-b dark:border-gray-700">
                  <h3 class="text-lg font-semibold">Recent Reports</h3>
                </div>
                <div class="overflow-x-auto">
                  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                    <thead class="bg-gray-50 dark:bg-gray-700">
                      <tr>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Date
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Type
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Date Range
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Generated By
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Actions
                        </th>
                      </tr>
                    </thead>
                    <tbody
                      id="reports-table"
                      class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                    >
                      <!-- Will be filled by JS -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <!-- Notifications Section -->
            <div id="notifications-content" class="content-section hidden">
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="md:col-span-2 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                  <div class="p-4 border-b dark:border-gray-700">
                    <h3 class="text-lg font-semibold">Send Notification</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                      Send announcements or messages to users
                    </p>
                  </div>
                  <div class="p-6">
                    <form id="notification-form" class="space-y-6">
                      <div>
                        <label for="notification-recipient" class="block text-sm font-medium mb-1">
                          Recipients
                        </label>
                        <select
                          id="notification-recipient"
                          class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                          required
                        >
                          <option value="all">All Users</option>
                          <option value="team">Specific Team</option>
                          <option value="user">Specific User</option>
                        </select>
                      </div>
                      <div id="notification-team-select" class="hidden">
                        <label for="notification-team" class="block text-sm font-medium mb-1">
                          Select Team
                        </label>
                        <select
                          id="notification-team"
                          class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                        >
                          <!-- Will be filled by JS -->
                        </select>
                      </div>
                      <div id="notification-user-select" class="hidden">
                        <label for="notification-user" class="block text-sm font-medium mb-1">
                          Select User
                        </label>
                        <select
                          id="notification-user"
                          class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                        >
                          <!-- Will be filled by JS -->
                        </select>
                      </div>
                      <div>
                        <label for="notification-subject" class="block text-sm font-medium mb-1">
                          Subject
                        </label>
                        <input
                          type="text"
                          id="notification-subject"
                          class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                          placeholder="Enter notification subject"
                          required
                        />
                      </div>
                      <div>
                        <label for="notification-message" class="block text-sm font-medium mb-1">
                          Message
                        </label>
                        <textarea
                          id="notification-message"
                          rows="5"
                          class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                          placeholder="Enter your message..."
                          required
                        ></textarea>
                      </div>
                      <div>
                        <label for="notification-type" class="block text-sm font-medium mb-1">
                          Notification Type
                        </label>
                        <select
                          id="notification-type"
                          class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                          required
                        >
                          <option value="standard">Standard Message</option>
                          <option value="important">Important Announcement</option>
                          <option value="reminder">Reminder</option>
                          <option value="congratulation">Congratulation</option>
                        </select>
                      </div>
                      <div>
                        <label for="notification-delivery" class="block text-sm font-medium mb-1">
                          Delivery Method
                        </label>
                        <div class="space-y-2">
                          <div class="flex items-center">
                            <input
                              type="checkbox"
                              id="delivery-app"
                              checked
                              class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                            />
                            <label for="delivery-app" class="ml-2 block text-sm">
                              In-App Notification
                            </label>
                          </div>
                          <div class="flex items-center">
                            <input
                              type="checkbox"
                              id="delivery-email"
                              class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                            />
                            <label for="delivery-email" class="ml-2 block text-sm">
                              Email
                            </label>
                          </div>
                          <div class="flex items-center">
                            <input
                              type="checkbox"
                              id="delivery-whatsapp"
                              class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                            />
                            <label for="delivery-whatsapp" class="ml-2 block text-sm">
                              WhatsApp
                            </label>
                          </div>
                        </div>
                      </div>
                      <div>
                        <button
                          type="submit"
                          class="px-4 py-2 bg-primary hover:bg-indigo-700 text-white rounded-md"
                        >
                          Send Notification
                        </button>
                      </div>
                    </form>
                  </div>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                  <div class="p-4 border-b dark:border-gray-700">
                    <h3 class="text-lg font-semibold">Templates</h3>
                  </div>
                  <div class="p-4">
                    <div class="space-y-4">
                      <div
                        class="template-item p-3 bg-gray-50 dark:bg-gray-700 rounded-md cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"
                      >
                        <h4 class="font-medium">Weekly Update</h4>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                          Summary of this week's activities and top performers
                        </p>
                      </div>
                      <div
                        class="template-item p-3 bg-gray-50 dark:bg-gray-700 rounded-md cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"
                      >
                        <h4 class="font-medium">Important Deadline Reminder</h4>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                          Remind users about upcoming deadlines
                        </p>
                      </div>
                      <div
                        class="template-item p-3 bg-gray-50 dark:bg-gray-700 rounded-md cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"
                      >
                        <h4 class="font-medium">New Activity Announcement</h4>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                          Announce a new activity type that's been added
                        </p>
                      </div>
                      <div
                        class="template-item p-3 bg-gray-50 dark:bg-gray-700 rounded-md cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"
                      >
                        <h4 class="font-medium">Congratulate Top Performers</h4>
                        <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                          Acknowledge and congratulate leading teams/individuals
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="mt-6 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="p-4 border-b dark:border-gray-700">
                  <h3 class="text-lg font-semibold">Sent Notifications</h3>
                </div>
                <div class="overflow-x-auto">
                  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                    <thead class="bg-gray-50 dark:bg-gray-700">
                      <tr>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Date
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Subject
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Recipients
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Type
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Delivery
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Sent By
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Actions
                        </th>
                      </tr>
                    </thead>
                    <tbody
                      id="notifications-table"
                      class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                    >
                      <!-- Will be filled by JS -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <!-- Admin Logs Section -->
            <div id="logs-content" class="content-section hidden">
              <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
                  <h3 class="text-lg font-semibold">Admin Activity Logs</h3>
                  <div class="flex">
                    <div class="relative mr-2">
                      <input
                        type="text"
                        id="search-logs"
                        placeholder="Search logs..."
                        class="w-64 px-4 py-2 border rounded-md text-sm focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                      />
                      <div class="absolute right-3 top-2.5 text-gray-400">
                        <i class="fas fa-search"></i>
                      </div>
                    </div>
                    <select
                      id="filter-log-type"
                      class="px-3 py-2 border rounded-md text-sm focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                    >
                      <option value="">All Actions</option>
                      <option value="approval">Approvals</option>
                      <option value="rejection">Rejections</option>
                      <option value="points">Points Adjustments</option>
                      <option value="activity">Activity Changes</option>
                      <option value="team">Team Management</option>
                      <option value="user">User Management</option>
                      <option value="notification">Notifications</option>
                      <option value="report">Reports</option>
                    </select>
                  </div>
                </div>
                <div class="overflow-x-auto">
                  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                    <thead class="bg-gray-50 dark:bg-gray-700">
                      <tr>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Date & Time
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Admin
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Action
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Details
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Affected User/Team
                        </th>
                        <th
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Notes
                        </th>
                      </tr>
                    </thead>
                    <tbody
                      id="logs-table"
                      class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                    >
                      <!-- Will be filled by JS -->
                    </tbody>
                  </table>
                </div>
                <div class="p-4 flex justify-between items-center border-t dark:border-gray-700">
                  <div class="text-sm text-gray-500 dark:text-gray-400">
                    <span id="total-logs">0</span> logs found
                  </div>
                  <div class="flex space-x-1">
                    <button
                      id="prev-logs-page"
                      class="px-3 py-1 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded text-sm disabled:opacity-50"
                    >
                      Previous
                    </button>
                    <button
                      id="next-logs-page"
                      class="px-3 py-1 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded text-sm disabled:opacity-50"
                    >
                      Next
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </main>
        </div>
      </div>

      <!-- Edit Team Modal -->
      <div
        id="team-modal"
        class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden"
      >
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md mx-4">
          <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
            <h3 id="team-modal-title" class="text-lg font-semibold">Add New Team</h3>
            <button class="close-modal text-gray-400 hover:text-gray-500">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <form id="team-form" class="p-6 space-y-4">
            <input type="hidden" id="team-id" value="" />
            <div>
              <label for="team-name" class="block text-sm font-medium mb-1">
                Team Name
              </label>
              <input
                type="text"
                id="team-name"
                class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                placeholder="Enter team name"
                required
              />
            </div>
            <div class="flex justify-end space-x-2">
              <button
                type="button"
                class="close-modal px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md"
              >
                Cancel
              </button>
              <button
                type="submit"
                class="px-4 py-2 bg-primary hover:bg-indigo-700 text-white rounded-md"
              >
                Save Team
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Edit Activity Modal -->
      <div
        id="activity-modal"
        class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden"
      >
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md mx-4">
          <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
            <h3 id="activity-modal-title" class="text-lg font-semibold">Add New Activity</h3>
            <button class="close-modal text-gray-400 hover:text-gray-500">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <form id="activity-form" class="p-6 space-y-4">
            <input type="hidden" id="activity-id" value="" />
            <div>
              <label for="activity-name" class="block text-sm font-medium mb-1">
                Activity Name
              </label>
              <input
                type="text"
                id="activity-name"
                class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                placeholder="Enter activity name"
                required
              />
            </div>
            <div>
              <label for="activity-description" class="block text-sm font-medium mb-1">
                Description
              </label>
              <textarea
                id="activity-description"
                rows="3"
                class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                placeholder="Enter activity description"
                required
              ></textarea>
            </div>
            <div>
              <label for="activity-points" class="block text-sm font-medium mb-1">
                Points Value
              </label>
              <input
                type="number"
                id="activity-points"
                min="1"
                max="100"
                class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                placeholder="Enter points value"
                required
              />
            </div>
            <div>
              <label for="activity-limit" class="block text-sm font-medium mb-1">
                Max Submissions per User
              </label>
              <input
                type="number"
                id="activity-limit"
                min="1"
                max="999"
                class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                placeholder="Enter submission limit"
                required
              />
              <div class="mt-1 text-sm text-gray-500 dark:text-gray-400">
                Use 999 for unlimited submissions
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">
                Evidence Required
              </label>
              <div class="flex items-center space-x-4">
                <div class="flex items-center">
                  <input
                    type="radio"
                    id="evidence-yes"
                    name="evidence-required"
                    value="true"
                    class="h-4 w-4 text-primary focus:ring-primary border-gray-300"
                  />
                  <label for="evidence-yes" class="ml-2 block text-sm">
                    Yes
                  </label>
                </div>
                <div class="flex items-center">
                  <input
                    type="radio"
                    id="evidence-no"
                    name="evidence-required"
                    value="false"
                    class="h-4 w-4 text-primary focus:ring-primary border-gray-300"
                  />
                  <label for="evidence-no" class="ml-2 block text-sm">
                    No
                  </label>
                </div>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">
                Status
              </label>
              <div class="flex items-center space-x-4">
                <div class="flex items-center">
                  <input
                    type="radio"
                    id="status-active"
                    name="activity-status"
                    value="active"
                    checked
                    class="h-4 w-4 text-primary focus:ring-primary border-gray-300"
                  />
                  <label for="status-active" class="ml-2 block text-sm">
                    Active
                  </label>
                </div>
                <div class="flex items-center">
                  <input
                    type="radio"
                    id="status-disabled"
                    name="activity-status"
                    value="disabled"
                    class="h-4 w-4 text-primary focus:ring-primary border-gray-300"
                  />
                  <label for="status-disabled" class="ml-2 block text-sm">
                    Disabled
                  </label>
                </div>
              </div>
            </div>
            <div class="flex justify-end space-x-2">
              <button
                type="button"
                class="close-modal px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md"
              >
                Cancel
              </button>
              <button
                type="submit"
                class="px-4 py-2 bg-primary hover:bg-indigo-700 text-white rounded-md"
              >
                Save Activity
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- User Modal -->
      <div
        id="user-modal"
        class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden"
      >
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md mx-4">
          <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
            <h3 id="user-modal-title" class="text-lg font-semibold">Add New User</h3>
            <button class="close-modal text-gray-400 hover:text-gray-500">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <form id="user-form" class="p-6 space-y-4">
            <input type="hidden" id="user-id" value="" />
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label for="user-firstname" class="block text-sm font-medium mb-1">
                  First Name
                </label>
                <input
                  type="text"
                  id="user-firstname"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                  placeholder="First name"
                  required
                />
              </div>
              <div>
                <label for="user-lastname" class="block text-sm font-medium mb-1">
                  Last Name
                </label>
                <input
                  type="text"
                  id="user-lastname"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                  placeholder="Last name"
                  required
                />
              </div>
            </div>
            <div>
              <label for="user-email" class="block text-sm font-medium mb-1">
                Email
              </label>
              <input
                type="email"
                id="user-email"
                class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                placeholder="user@umd.edu"
                required
              />
            </div>
            <div>
              <label for="user-team" class="block text-sm font-medium mb-1">
                Team
              </label>
              <select
                id="user-team"
                class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                required
              >
                <option value="" disabled selected>Select team</option>
                <!-- Will be filled by JS -->
              </select>
            </div>
            <div id="user-password-container">
              <label for="user-password" class="block text-sm font-medium mb-1">
                Password
              </label>
              <input
                type="password"
                id="user-password"
                class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                placeholder="Password"
                required
              />
              <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">
                Leave blank to keep current password when editing
              </p>
            </div>
            <div class="flex justify-end space-x-2">
              <button
                type="button"
                class="close-modal px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md"
              >
                Cancel
              </button>
              <button
                type="submit"
                class="px-4 py-2 bg-primary hover:bg-indigo-700 text-white rounded-md"
              >
                Save User
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Activity Detail Modal -->
      <div
        id="activity-detail-modal"
        class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden"
      >
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md mx-4">
          <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
            <h3 id="activity-detail-title" class="text-lg font-semibold">Activity Detail</h3>
            <button class="close-modal text-gray-400 hover:text-gray-500">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="p-6 space-y-4" id="activity-detail-content">
            <!-- Will be filled by JS -->
          </div>
        </div>
      </div>

      <!-- Confirm Modal -->
      <div
        id="confirm-modal"
        class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden"
      >
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md mx-4">
          <div class="p-4 border-b dark:border-gray-700">
            <h3 id="confirm-title" class="text-lg font-semibold">Confirm Action</h3>
          </div>
          <div class="p-6">
            <p id="confirm-message">Are you sure you want to proceed?</p>
          </div>
          <div class="p-4 border-t dark:border-gray-700 flex justify-end space-x-2">
            <button
              id="confirm-cancel"
              class="px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md"
            >
              Cancel
            </button>
            <button
              id="confirm-ok"
              class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md"
            >
              Confirm
            </button>
          </div>
        </div>
      </div>

      <!-- Toast Notification -->
      <div
        id="toast"
        class="fixed bottom-5 right-5 p-4 rounded-md shadow-lg transform transition-transform duration-300 scale-0 z-50 bg-white dark:bg-gray-800 border-l-4"
      >
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i id="toast-icon" class="fas fa-check-circle text-green-500"></i>
          </div>
          <div class="ml-3">
            <p id="toast-text" class="text-sm font-medium"></p>
          </div>
          <div class="ml-auto pl-3">
            <div class="-mx-1.5 -my-1.5">
              <button
                id="close-toast"
                class="inline-flex bg-white dark:bg-gray-800 rounded-md p-1.5 text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary"
              >
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Mock data structure for demonstration - this would be shared with the user platform
      // or fetched from a database in a real application
      const mockData = {
        users: [
          {
            id: 1,
            firstName: "John",
            lastName: "Smith",
            email: "demo@umd.edu",
            password: "password",
            teamId: 1,
            points: 15,
          },
          {
            id: 2,
            firstName: "Alice",
            lastName: "Johnson",
            email: "alice@umd.edu",
            password: "password",
            teamId: 2,
            points: 21,
          },
          {
            id: 3,
            firstName: "Michael",
            lastName: "Brown",
            email: "michael@umd.edu",
            password: "password",
            teamId: 3,
            points: 18,
          },
          {
            id: 4,
            firstName: "Emily",
            lastName: "Davis",
            email: "emily@umd.edu",
            password: "password",
            teamId: 1,
            points: 9,
          },
          {
            id: 5,
            firstName: "David",
            lastName: "Wilson",
            email: "david@umd.edu",
            password: "password",
            teamId: 2,
            points: 12,
          },
          {
            id: 6,
            firstName: "Sarah",
            lastName: "Martinez",
            email: "sarah@umd.edu",
            password: "password",
            teamId: 4,
            points: 24,
          },
          {
            id: 7,
            firstName: "Robert",
            lastName: "Anderson",
            email: "robert@umd.edu",
            password: "password",
            teamId: 5,
            points: 7,
          },
          {
            id: 8,
            firstName: "Jennifer",
            lastName: "Taylor",
            email: "jennifer@umd.edu",
            password: "password",
            teamId: 3,
            points: 16,
          },
        ],
        teams: [
          { id: 1, name: "Team Terrapins", points: 39 },
          { id: 2, name: "Team Ravens", points: 43 },
          { id: 3, name: "Team Diplomats", points: 34 },
          { id: 4, name: "Team Chesapeake", points: 31 },
          { id: 5, name: "Team Orioles", points: 27 },
        ],
        activities: [
          {
            id: 1,
            userId: 1,
            type: "social_post",
            details: "LinkedIn post about Smith MBA journey",
            points: 1,
            date: "2024-06-01",
            status: "approved",
            evidence: "linkedin-post.jpg",
          },
          {
            id: 2,
            userId: 1,
            type: "linkedin_connection",
            details: "Connected with Sarah Jones (Alumni 2023)",
            points: 1,
            date: "2024-06-03",
            status: "approved",
            evidence: "connection.jpg",
          },
          {
            id: 3,
            userId: 1,
            type: "personal_bio",
            details: "Created and shared personal bio with the WhatsApp group",
            points: 3,
            date: "2024-06-05",
            status: "approved",
            evidence: "bio.jpg",
          },
          {
            id: 4,
            userId: 1,
            type: "instagram_follow",
            details: "Followed umdsmithgrad Instagram account",
            points: 1,
            date: "2024-06-07",
            status: "approved",
            evidence: "instagram.jpg",
          },
          {
            id: 5,
            userId: 1,
            type: "smith_representation",
            details: "Representing Smith at Washington Monument",
            points: 5,
            date: "2024-06-10",
            status: "approved",
            evidence: "monument.jpg",
          },
          {
            id: 6,
            userId: 1,
            type: "admitted_event",
            details: "Attended Smith Trivia Night",
            points: 5,
            date: "2024-06-12",
            status: "pending",
            evidence: "trivia.jpg",
          },
          {
            id: 7,
            userId: 1,
            type: "meetup_attendance",
            details: "Attended Team Terrapins meet-n-greet",
            points: 2,
            date: "2024-06-15",
            status: "rejected",
            evidence: "meetup.jpg",
            notes: "No verification provided",
          },
          {
            id: 8,
            userId: 2,
            type: "social_post",
            details: "Instagram post with Smith swag",
            points: 1,
            date: "2024-06-02",
            status: "approved",
            evidence: "instagram-post.jpg",
          },
          {
            id: 9,
            userId: 2,
            type: "personal_bio",
            details: "Shared detailed bio with team",
            points: 3,
            date: "2024-06-04",
            status: "approved",
            evidence: "bio-alice.jpg",
          },
          {
            id: 10,
            userId: 3,
            type: "linkedin_connection",
            details: "Connected with Prof. Johnson",
            points: 1,
            date: "2024-06-01",
            status: "approved",
            evidence: "prof-connection.jpg",
          },
          {
            id: 11,
            userId: 5,
            type: "admitted_event",
            details: "Participated in Shell of a Brunch",
            points: 5,
            date: "2024-06-08",
            status: "pending",
            evidence: "brunch.jpg",
          },
          {
            id: 12,
            userId: 6,
            type: "smith_representation",
            details: "Smith representation at Lincoln Memorial",
            points: 5,
            date: "2024-06-03",
            status: "approved",
            evidence: "lincoln.jpg",
          },
          {
            id: 13,
            userId: 8,
            type: "team_meetup",
            details: "Organized Team Diplomats meet-n-greet",
            points: 7,
            date: "2024-06-10",
            status: "approved",
            evidence: "team-meetup.jpg",
          },
          {
            id: 14,
            userId: 4,
            type: "meetup_attendance",
            details: "Attended Terrapins meetup",
            points: 2,
            date: "2024-06-11",
            status: "approved",
            evidence: "meetup-attendance.jpg",
          },
          {
            id: 15,
            userId: 7,
            type: "birthday_wish",
            details: "Wished happy birthday to teammate",
            points: 1,
            date: "2024-06-07",
            status: "approved",
            evidence: null,
          },
        ],
        activityTypes: {
          social_post: {
            name: "Social Media Post",
            description: "Share your Smith MBA journey on social media",
            points: 1,
            limit: 5,
            evidence: true,
            status: "active",
          },
          linkedin_connection: {
            name: "LinkedIn Connection",
            description: "Connect with current or former Smith MBA students on LinkedIn",
            points: 1,
            limit: 10,
            evidence: true,
            status: "active",
          },
          instagram_follow: {
            name: "Instagram Follow",
            description: "Follow umdsmithgrad Instagram account",
            points: 1,
            limit: 1,
            evidence: true,
            status: "active",
          },
          share_resource: {
            name: "Shared Resource",
            description: "Share a useful resource with your team",
            points: 1,
            limit: 5,
            evidence: false,
            status: "active",
          },
          birthday_wish: {
            name: "Birthday Wish",
            description: "Wish a teammate happy birthday",
            points: 1,
            limit: 999,
            evidence: false,
            status: "active",
          },
          class_registration: {
            name: "Class Registration",
            description: "Register for first semester classes",
            points: 1,
            limit: 1,
            evidence: false,
            status: "active",
          },
          personal_bio: {
            name: "Personalized Bio",
            description: "Create and share your personal bio with your team",
            points: 3,
            limit: 1,
            evidence: true,
            status: "active",
          },
          student_chat: {
            name: "MPO Student Chat",
            description: "Attend MPO admitted student chats",
            points: 3,
            limit: 1,
            evidence: false,
            status: "active",
          },
          orientation_survey: {
            name: "MPO Pre-orientation Survey",
            description: "Complete the MPO pre-orientation survey",
            points: 3,
            limit: 1,
            evidence: false,
            status: "active",
          },
          photo_release: {
            name: "MPO Photo Release",
            description: "Complete the MPO photo release form",
            points: 3,
            limit: 1,
            evidence: false,
            status: "active",
          },
          smith_representation: {
            name: "Smith Representation Photo",
            description: "Represent Smith at a non-UMD event or significant location",
            points: 5,
            limit: 3,
            evidence: true,
            status: "active",
          },
          admitted_event: {
            name: "Admitted Student Event",
            description: "Attend a virtual or in-person admitted student event",
            points: 5,
            limit: 999,
            evidence: true,
            status: "active",
          },
          team_meetup: {
            name: "Team Meet-n-Greet",
            description: "Plan and execute a virtual meet-n-greet with your team",
            points: 7,
            limit: 1,
            evidence: true,
            status: "active",
          },
          meetup_attendance: {
            name: "Meet-n-Greet Attendance",
            description: "Attend a meet-n-greet organized by your team",
            points: 2,
            limit: 999,
            evidence: true,
            status: "active",
          },
          manual_adjustment: {
            name: "Manual Adjustment",
            description: "Points manually adjusted by admin",
            points: 0,
            limit: 999,
            evidence: false,
            status: "active",
          },
        },
        // Add mock data for admin-specific functionality
        admins: [
          {
            id: 1,
            firstName: "Admin",
            lastName: "User",
            email: "admin@umd.edu",
            password: "admin123",
          },
        ],
        adminLogs: [
          {
            id: 1,
            adminId: 1,
            action: "approval",
            details: "Approved activity submission",
            affectedUser: "John Smith",
            affectedTeam: "Team Terrapins",
            notes: "Verified evidence",
            timestamp: "2024-06-05T14:30:00",
          },
          {
            id: 2,
            adminId: 1,
            action: "rejection",
            details: "Rejected activity submission",
            affectedUser: "John Smith",
            affectedTeam: "Team Terrapins",
            notes: "No verification provided",
            timestamp: "2024-06-15T10:15:00",
          },
          {
            id: 3,
            adminId: 1,
            action: "points",
            details: "Manual points adjustment: +5",
            affectedUser: "Alice Johnson",
            affectedTeam: "Team Ravens",
            notes: "Bonus for helping teammates",
            timestamp: "2024-06-10T09:45:00",
          },
          {
            id: 4,
            adminId: 1,
            action: "activity",
            details: "Added new activity type: 'Class Registration'",
            affectedUser: null,
            affectedTeam: null,
            notes: "New activity for course registration",
            timestamp: "2024-06-01T11:20:00",
          },
          {
            id: 5,
            adminId: 1,
            action: "notification",
            details: "Sent notification to all users",
            affectedUser: null,
            affectedTeam: null,
            notes: "Reminder about upcoming deadline",
            timestamp: "2024-06-12T16:00:00",
          },
        ],
        notifications: [
          {
            id: 1,
            subject: "Welcome to MBA Game",
            message: "Welcome to the Smith School Summer Sweepstakes! Start earning points now!",
            recipients: "all",
            recipientDetails: "All Users",
            type: "important",
            delivery: ["app"],
            sentBy: "Admin User",
            date: "2024-06-01",
          },
          {
            id: 2,
            subject: "New Activity Added",
            message: "We've added 'Class Registration' as a new point-earning activity. Register for your classes to earn 1 point!",
            recipients: "all",
            recipientDetails: "All Users",
            type: "standard",
            delivery: ["app", "email"],
            sentBy: "Admin User",
            date: "2024-06-01",
          },
          {
            id: 3,
            subject: "Team Ravens Update",
            message: "Great job Team Ravens! You're currently in first place. Keep up the good work!",
            recipients: "team",
            recipientDetails: "Team Ravens",
            type: "congratulation",
            delivery: ["app", "whatsapp"],
            sentBy: "Admin User",
            date: "2024-06-10",
          },
          {
            id: 4,
            subject: "Deadline Reminder",
            message: "Don't forget, our first points tally is this Thursday at 12:00 PM EST. Submit your activities before then!",
            recipients: "all",
            recipientDetails: "All Users",
            type: "reminder",
            delivery: ["app", "email", "whatsapp"],
            sentBy: "Admin User",
            date: "2024-06-12",
          },
        ],
        reports: [
          {
            id: 1,
            type: "weekly",
            dateRange: "2024-06-03 to 2024-06-09",
            generatedBy: "Admin User",
            date: "2024-06-09",
          },
          {
            id: 2,
            type: "team",
            dateRange: "All Time",
            generatedBy: "Admin User",
            date: "2024-06-10",
          },
          {
            id: 3,
            type: "weekly",
            dateRange: "2024-06-10 to 2024-06-16",
            generatedBy: "Admin User",
            date: "2024-06-16",
          },
        ],
        manualAdjustments: [
          {
            id: 1,
            userId: 2,
            points: 5,
            reason: "Bonus for helping teammates",
            adminId: 1,
            date: "2024-06-10",
            evidenceUrl: null,
          },
          {
            id: 2,
            userId: 6,
            points: 3,
            reason: "Additional points for exceptional event participation",
            adminId: 1,
            date: "2024-06-12",
            evidenceUrl: "https://example.com/evidence1.jpg",
          },
          {
            id: 3,
            userId: 8,
            points: -2,
            reason: "Correction for duplicate submission",
            adminId: 1,
            date: "2024-06-15",
            evidenceUrl: null,
          },
        ],
      };

      // Global state for the current admin user
      let currentAdmin = null;

      // DOM Elements
      const loginContainer = document.getElementById("login-container");
      const adminMain = document.getElementById("admin-main");
      const adminLoginForm = document.getElementById("admin-login-form");
      const adminDemoLoginBtn = document.getElementById("admin-demo-login");
      const adminLogoutBtn = document.getElementById("admin-logout");
      const pageTitle = document.getElementById("page-title");
      const currentDateElement = document.getElementById("current-date");
      const sidebarLinks = document.querySelectorAll(".sidebar-link");
      const contentSections = document.querySelectorAll(".content-section");
      const quickActions = document.querySelectorAll(".quick-action");
      const toast = document.getElementById("toast");
      const toastIcon = document.getElementById("toast-icon");
      const toastText = document.getElementById("toast-text");
      const closeToastBtn = document.getElementById("close-toast");
      const pendingCountElement = document.getElementById("pending-count");

      // Modal elements
      const teamModal = document.getElementById("team-modal");
      const teamForm = document.getElementById("team-form");
      const teamModalTitle = document.getElementById("team-modal-title");
      const teamIdInput = document.getElementById("team-id");
      const teamNameInput = document.getElementById("team-name");

      const activityModal = document.getElementById("activity-modal");
      const activityForm = document.getElementById("activity-form");
      const activityModalTitle = document.getElementById("activity-modal-title");
      const activityIdInput = document.getElementById("activity-id");
      const activityNameInput = document.getElementById("activity-name");
      const activityDescriptionInput = document.getElementById("activity-description");
      const activityPointsInput = document.getElementById("activity-points");
      const activityLimitInput = document.getElementById("activity-limit");

      const userModal = document.getElementById("user-modal");
      const userForm = document.getElementById("user-form");
      const userModalTitle = document.getElementById("user-modal-title");
      const userIdInput = document.getElementById("user-id");
      const userFirstnameInput = document.getElementById("user-firstname");
      const userLastnameInput = document.getElementById("user-lastname");
      const userEmailInput = document.getElementById("user-email");
      const userTeamInput = document.getElementById("user-team");
      const userPasswordInput = document.getElementById("user-password");
      const userPasswordContainer = document.getElementById("user-password-container");

      const activityDetailModal = document.getElementById("activity-detail-modal");
      const activityDetailTitle = document.getElementById("activity-detail-title");
      const activityDetailContent = document.getElementById("activity-detail-content");

      const confirmModal = document.getElementById("confirm-modal");
      const confirmTitle = document.getElementById("confirm-title");
      const confirmMessage = document.getElementById("confirm-message");
      const confirmOkBtn = document.getElementById("confirm-ok");
      const confirmCancelBtn = document.getElementById("confirm-cancel");

      const closeModalButtons = document.querySelectorAll(".close-modal");

      // Dashboard elements
      const totalUsersElement = document.getElementById("total-users");
      const approvedActivitiesElement = document.getElementById("approved-activities");
      const pendingActivitiesElement = document.getElementById("pending-activities");
      const recentActivitiesTable = document.getElementById("recent-activities");

      // Leaderboard elements
      const teamLeaderboardTable = document.getElementById("team-leaderboard-table");
      const individualLeaderboardTable = document.getElementById("individual-leaderboard-table");
      const searchIndividualInput = document.getElementById("search-individual");
      const filterTeamSelect = document.getElementById("filter-team");
      const totalIndividualsElement = document.getElementById("total-individuals");
      const prevPageBtn = document.getElementById("prev-page");
      const nextPageBtn = document.getElementById("next-page");
      const exportTeamCsvBtn = document.getElementById("export-team-csv");
      const exportTeamPdfBtn = document.getElementById("export-team-pdf");

      // Activities elements
      const activitiesTable = document.getElementById("activities-table");
      const addActivityBtn = document.getElementById("add-activity-btn");

      // Pending approvals elements
      const pendingTable = document.getElementById("pending-table");
      const noPendingElement = document.getElementById("no-pending");
      const processedTable = document.getElementById("processed-table");
      const searchPendingInput = document.getElementById("search-pending");

      // Teams elements
      const teamsTable = document.getElementById("teams-table");
      const addTeamBtn = document.getElementById("add-team-btn");
      const teamDetail = document.getElementById("team-detail");
      const teamDetailName = document.getElementById("team-detail-name");
      const teamDetailPoints = document.getElementById("team-detail-points");
      const teamDetailRank = document.getElementById("team-detail-rank");
      const teamDetailMembers = document.getElementById("team-detail-members");
      const teamDetailAvg = document.getElementById("team-detail-avg");
      const teamDetailMeetups = document.getElementById("team-detail-meetups");
      const teamMembersTable = document.getElementById("team-members-table");
      const backToTeamsBtn = document.getElementById("back-to-teams");
      const editTeamBtn = document.getElementById("edit-team-btn");

      // Users elements
      const usersTable = document.getElementById("users-table");
      const addUserBtn = document.getElementById("add-user-btn");
      const searchUsersInput = document.getElementById("search-users");
      const filterUsersTeamSelect = document.getElementById("filter-users-team");
      const totalUsersCountElement = document.getElementById("total-users-count");
      const prevUsersPageBtn = document.getElementById("prev-users-page");
      const nextUsersPageBtn = document.getElementById("next-users-page");
      const userDetail = document.getElementById("user-detail");
      const userDetailName = document.getElementById("user-detail-name");
      const userDetailEmail = document.getElementById("user-detail-email");
      const userDetailTeam = document.getElementById("user-detail-team");
      const userDetailPoints = document.getElementById("user-detail-points");
      const userDetailRank = document.getElementById("user-detail-rank");
      const userDetailActivities = document.getElementById("user-detail-activities");
      const userActivitiesTable = document.getElementById("user-activities-table");
      const backToUsersBtn = document.getElementById("back-to-users");
      const editUserBtn = document.getElementById("edit-user-btn");
      const addPointsUserBtn = document.getElementById("add-points-user-btn");

      // Manual points elements
      const pointsForm = document.getElementById("points-form");
      const pointsUserSelect = document.getElementById("points-user");
      const pointsActivitySelect = document.getElementById("points-activity");
      const pointsValueInput = document.getElementById("points-value");
      const pointsEvidenceInput = document.getElementById("points-evidence");
      const pointsNotesInput = document.getElementById("points-notes");
      const manualPointsTable = document.getElementById("manual-points-table");

      // Reports elements
      const reportForm = document.getElementById("report-form");
      const reportTypeSelect = document.getElementById("report-type");
      const reportDateRangeSelect = document.getElementById("report-date-range");
      const customDateRange = document.getElementById("custom-date-range");
      const reportStartDateInput = document.getElementById("report-start-date");
      const reportEndDateInput = document.getElementById("report-end-date");
      const previewReportBtn = document.getElementById("preview-report");
      const downloadReportPdfBtn = document.getElementById("download-report-pdf");
      const emailReportBtn = document.getElementById("email-report");
      const reportPreview = document.getElementById("report-preview");
      const reportContent = document.getElementById("report-content");
      const closePreviewBtn = document.getElementById("close-preview");
      const reportsTable = document.getElementById("reports-table");
      
      // Notifications elements
      const notificationForm = document.getElementById("notification-form");
      const notificationRecipientSelect = document.getElementById("notification-recipient");
      const notificationTeamSelect = document.getElementById("notification-team-select");
      const notificationTeamInput = document.getElementById("notification-team");
      const notificationUserSelect = document.getElementById("notification-user-select");
      const notificationUserInput = document.getElementById("notification-user");
      const notificationSubjectInput = document.getElementById("notification-subject");
      const notificationMessageInput = document.getElementById("notification-message");
      const notificationTypeSelect = document.getElementById("notification-type");
      const deliveryAppCheckbox = document.getElementById("delivery-app");
      const deliveryEmailCheckbox = document.getElementById("delivery-email");
      const deliveryWhatsappCheckbox = document.getElementById("delivery-whatsapp");
      const notificationsTable = document.getElementById("notifications-table");
      const templateItems = document.querySelectorAll(".template-item");
      
      // Admin logs elements
      const logsTable = document.getElementById("logs-table");
      const searchLogsInput = document.getElementById("search-logs");
      const filterLogTypeSelect = document.getElementById("filter-log-type");
      const totalLogsElement = document.getElementById("total-logs");
      const prevLogsPageBtn = document.getElementById("prev-logs-page");
      const nextLogsPageBtn = document.getElementById("next-logs-page");

      // Event Listeners
      document.addEventListener("DOMContentLoaded", initApp);
      adminLoginForm.addEventListener("submit", handleAdminLogin);
      adminDemoLoginBtn.addEventListener("click", handleAdminDemoLogin);
      adminLogoutBtn.addEventListener("click", handleAdminLogout);

      // Sidebar navigation
      sidebarLinks.forEach((link) => {
        link.addEventListener("click", (e) => {
          e.preventDefault();
          const targetId = link.getAttribute("data-target");
          switchSection(targetId);
        });
      });

      // Quick actions
      quickActions.forEach((action) => {
        action.addEventListener("click", (e) => {
          const targetId = action.getAttribute("data-target");
          switchSection(targetId);
        });
      });

      // Close toast
      closeToastBtn.addEventListener("click", hideToast);

      // Team modal events
      addTeamBtn.addEventListener("click", () => openAddTeamModal());
      teamForm.addEventListener("submit", handleTeamSubmit);

      // Activity modal events
      addActivityBtn.addEventListener("click", () => openAddActivityModal());
      activityForm.addEventListener("submit", handleActivitySubmit);

      // User modal events
      addUserBtn.addEventListener("click", () => openAddUserModal());
      userForm.addEventListener("submit", handleUserSubmit);

      // Confirm modal events
      confirmCancelBtn.addEventListener("click", () => {
        confirmModal.classList.add("hidden");
      });

      // Close modals
      closeModalButtons.forEach((button) => {
        button.addEventListener("click", () => {
          teamModal.classList.add("hidden");
          activityModal.classList.add("hidden");
          userModal.classList.add("hidden");
          activityDetailModal.classList.add("hidden");
        });
      });

      // Leaderboard search and filter
      searchIndividualInput.addEventListener("input", filterIndividualLeaderboard);
      filterTeamSelect.addEventListener("change", filterIndividualLeaderboard);

      // Users search and filter
      searchUsersInput.addEventListener("input", filterUsers);
      filterUsersTeamSelect.addEventListener("change", filterUsers);

      // Pending search
      searchPendingInput.addEventListener("input", filterPendingSubmissions);

      // Team detail events
      backToTeamsBtn.addEventListener("click", () => {
        teamDetail.classList.add("hidden");
        document.getElementById("teams-content").classList.remove("hidden");
      });

      // User detail events
      backToUsersBtn.addEventListener("click", () => {
        userDetail.classList.add("hidden");
        document.getElementById("users-content").classList.remove("hidden");
      });

      // Manual points form
      pointsForm.addEventListener("submit", handlePointsSubmit);

      // Report form events
      reportDateRangeSelect.addEventListener("change", toggleCustomDateRange);
      previewReportBtn.addEventListener("click", previewReport);
      closePreviewBtn.addEventListener("click", () => {
        reportPreview.classList.add("hidden");
      });
      downloadReportPdfBtn.addEventListener("click", downloadReportAsPdf);
      emailReportBtn.addEventListener("click", emailReport);

      // Notification form events
      notificationRecipientSelect.addEventListener("change", toggleNotificationRecipients);
      notificationForm.addEventListener("submit", handleNotificationSubmit);
      
      // Template items
      templateItems.forEach((item) => {
        item.addEventListener("click", () => {
          const template = item.querySelector("h4").textContent;
          loadNotificationTemplate(template);
        });
      });

      // Admin logs search and filter
      searchLogsInput.addEventListener("input", filterAdminLogs);
      filterLogTypeSelect.addEventListener("change", filterAdminLogs);

      // Initialize the application
      function initApp() {
        // Set current date
        const now = new Date();
        currentDateElement.textContent = now.toLocaleDateString(undefined, {
          weekday: "long",
          year: "numeric",
          month: "long",
          day: "numeric",
        });

        // Initialize select options for teams
        initializeTeamSelects();
      }

      // Initialize team select dropdowns throughout the app
      function initializeTeamSelects() {
        const teamOptions = mockData.teams
          .map((team) => `<option value="${team.id}">${team.name}</option>`)
          .join("");

        // Add to user form
        userTeamInput.innerHTML = '<option value="" disabled selected>Select team</option>' + teamOptions;

        // Add to filter dropdowns
        filterTeamSelect.innerHTML = '<option value="">All Teams</option>' + teamOptions;
        filterUsersTeamSelect.innerHTML = '<option value="">All Teams</option>' + teamOptions;

        // Add to notification form
        notificationTeamInput.innerHTML = teamOptions;

        // Add to points form
        const userOptions = mockData.users
          .map((user) => `<option value="${user.id}">${user.firstName} ${user.lastName}</option>`)
          .join("");
        pointsUserSelect.innerHTML = '<option value="" disabled selected>Select a user</option>' + userOptions;

        // Add activity types to points form
        const activityOptions = Object.entries(mockData.activityTypes)
          .map(([key, activity]) => {
            if (key === 'manual_adjustment') return;
            return `<option value="${key}">${activity.name}</option>`;
          })
          .filter(Boolean)
          .join("");
        pointsActivitySelect.innerHTML = '<option value="" disabled selected>Select activity type</option><option value="manual_adjustment">Manual Admin Adjustment</option>' + activityOptions;

        // Add to notification form user select
        notificationUserInput.innerHTML = '<option value="" disabled selected>Select user</option>' + userOptions;
      }

      // Handle admin login
      function handleAdminLogin(e) {
        e.preventDefault();

        const email = document.getElementById("admin-email").value;
        const password = document.getElementById("admin-password").value;

        if (!email || !password) {
          showToast("Please enter both email and password.", "error");
          return;
        }

        const admin = mockData.admins.find((a) => a.email === email && a.password === password);

        if (admin) {
          loginAdmin(admin);
        } else {
          showToast("Invalid admin credentials.", "error");
        }
      }

      // Handle admin demo login
      function handleAdminDemoLogin() {
        // Use the first admin as the demo user
        loginAdmin(mockData.admins[0]);
      }

      // Login admin and set up the dashboard
      function loginAdmin(admin) {
        currentAdmin = admin;
        
        // Update UI
        loginContainer.classList.add("hidden");
        adminMain.classList.remove("hidden");
        
        // Initialize dashboard
        switchSection("dashboard");
        
        showToast(`Welcome, ${admin.firstName}!`, "success");
      }

      // Handle admin logout
      function handleAdminLogout() {
        currentAdmin = null;
        
        // Reset UI
        adminMain.classList.add("hidden");
        loginContainer.classList.remove("hidden");
        
        // Clear forms
        adminLoginForm.reset();
      }

      // Switch between content sections
      function switchSection(sectionId) {
        // Update active sidebar link
        sidebarLinks.forEach((link) => {
          if (link.getAttribute("data-target") === sectionId) {
            link.classList.add("active");
          } else {
            link.classList.remove("active");
          }
        });
        
        // Update page title
        pageTitle.textContent = sectionId.charAt(0).toUpperCase() + sectionId.slice(1);
        
        // Show selected content section, hide others
        contentSections.forEach((section) => {
          if (section.id === `${sectionId}-content`) {
            section.classList.remove("hidden");
            
            // Load section-specific data
            if (sectionId === "dashboard") {
              loadDashboardData();
            } else if (sectionId === "leaderboards") {
              loadLeaderboardData();
            } else if (sectionId === "activities") {
              loadActivitiesData();
            } else if (sectionId === "pending") {
              loadPendingData();
            } else if (sectionId === "teams") {
              loadTeamsData();
            } else if (sectionId === "users") {
              loadUsersData();
            } else if (sectionId === "points") {
              loadPointsData();
            } else if (sectionId === "reports") {
              loadReportsData();
            } else if (sectionId === "notifications") {
              loadNotificationsData();
            } else if (sectionId === "logs") {
              loadLogsData();
            }
          } else {
            section.classList.add("hidden");
          }
        });
      }

      // Load dashboard data
      function loadDashboardData() {
        // Update summary stats
        totalUsersElement.textContent = mockData.users.length;
        const approvedCount = mockData.activities.filter((a) => a.status === "approved").length;
        approvedActivitiesElement.textContent = approvedCount;
        const pendingCount = mockData.activities.filter((a) => a.status === "pending").length;
        pendingActivitiesElement.textContent = pendingCount;
        pendingCountElement.textContent = pendingCount;
        
        // Load recent activities
        loadRecentActivities();
        
        // Initialize charts
        initializeActivityChart();
        initializeTeamChart();
      }

      // Load recent activities for dashboard
      function loadRecentActivities() {
        const recentActivities = [...mockData.activities]
          .sort((a, b) => new Date(b.date) - new Date(a.date))
          .slice(0, 5);
        
        recentActivitiesTable.innerHTML = recentActivities.map((activity) => {
          const user = mockData.users.find((u) => u.id === activity.userId);
          const team = user ? mockData.teams.find((t) => t.id === user.teamId) : null;
          const activityType = mockData.activityTypes[activity.type];
          
          let statusClass, statusText;
          switch (activity.status) {
            case "approved":
              statusClass = "text-green-500";
              statusText = "Approved";
              break;
            case "rejected":
              statusClass = "text-red-500";
              statusText = "Rejected";
              break;
            default:
              statusClass = "text-yellow-500";
              statusText = "Pending";
          }
          
          return `
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                  <div>
                    <div class="text-sm font-medium">${user ? `${user.firstName} ${user.lastName}` : 'Unknown'}</div>
                    <div class="text-xs text-gray-500 dark:text-gray-400">${team ? team.name : ''}</div>
                  </div>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${activityType ? activityType.name : activity.type}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${activity.points}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${formatDate(activity.date)}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${statusClass} bg-${activity.status === 'approved' ? 'green' : activity.status === 'rejected' ? 'red' : 'yellow'}-100 dark:bg-${activity.status === 'approved' ? 'green' : activity.status === 'rejected' ? 'red' : 'yellow'}-900/20">
                  ${statusText}
                </span>
              </td>
            </tr>
          `;
        }).join("");
      }

      // Initialize activity chart for dashboard
      function initializeActivityChart() {
        const ctx = document.getElementById("activity-chart").getContext("2d");
        
        // Calculate activity counts by day for the last 7 days
        const dateLabels = [];
        const approvedData = [];
        const pendingData = [];
        const rejectedData = [];
        
        // Generate last 7 days
        const today = new Date();
        for (let i = 6; i >= 0; i--) {
          const day = new Date(today);
          day.setDate(today.getDate() - i);
          const dateString = day.toISOString().split("T")[0];
          dateLabels.push(day.toLocaleDateString(undefined, { weekday: "short" }));
          
          // Count activities for this day
          const dayActivities = mockData.activities.filter((a) => a.date === dateString);
          approvedData.push(dayActivities.filter((a) => a.status === "approved").length);
          pendingData.push(dayActivities.filter((a) => a.status === "pending").length);
          rejectedData.push(dayActivities.filter((a) => a.status === "rejected").length);
        }
        
        const activityChart = new Chart(ctx, {
          type: "bar",
          data: {
            labels: dateLabels,
            datasets: [
              {
                label: "Approved",
                data: approvedData,
                backgroundColor: "rgba(16, 185, 129, 0.7)",
                borderColor: "rgb(16, 185, 129)",
                borderWidth: 1,
              },
              {
                label: "Pending",
                data: pendingData,
                backgroundColor: "rgba(245, 158, 11, 0.7)",
                borderColor: "rgb(245, 158, 11)",
                borderWidth: 1,
              },
              {
                label: "Rejected",
                data: rejectedData,
                backgroundColor: "rgba(239, 68, 68, 0.7)",
                borderColor: "rgb(239, 68, 68)",
                borderWidth: 1,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              x: {
                stacked: true,
                grid: {
                  display: false,
                },
              },
              y: {
                stacked: true,
                beginAtZero: true,
                ticks: {
                  precision: 0,
                },
              },
            },
            plugins: {
              legend: {
                position: "top",
              },
            },
          },
        });
      }

      // Initialize team chart for dashboard
      function initializeTeamChart() {
        const ctx = document.getElementById("team-chart").getContext("2d");
        
        // Sort teams by points
        const sortedTeams = [...mockData.teams].sort((a, b) => b.points - a.points);
        
        const teamChart = new Chart(ctx, {
          type: "bar",
          data: {
            labels: sortedTeams.map((team) => team.name),
            datasets: [
              {
                label: "Points",
                data: sortedTeams.map((team) => team.points),
                backgroundColor: "rgba(93, 92, 222, 0.7)",
                borderColor: "rgb(93, 92, 222)",
                borderWidth: 1,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            indexAxis: "y",
            scales: {
              x: {
                beginAtZero: true,
                grid: {
                  borderColor: "rgba(0, 0, 0, 0.1)",
                },
                ticks: {
                  precision: 0,
                },
              },
              y: {
                grid: {
                  display: false,
                },
              },
            },
            plugins: {
              legend: {
                display: false,
              },
            },
          },
        });
      }

      // Load leaderboard data
      function loadLeaderboardData() {
        // Team leaderboard
        loadTeamLeaderboard();
        
        // Individual leaderboard
        loadIndividualLeaderboard();
      }

      // Load team leaderboard
      function loadTeamLeaderboard() {
        const sortedTeams = [...mockData.teams].sort((a, b) => b.points - a.points);
        
        teamLeaderboardTable.innerHTML = sortedTeams.map((team, index) => {
          const teamMembers = mockData.users.filter((u) => u.teamId === team.id);
          
          return `
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${index + 1}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${team.name}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${teamMembers.length}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${team.points}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <button class="edit-team-score px-2 py-1 text-xs bg-primary hover:bg-indigo-700 text-white rounded-md" data-team-id="${team.id}">
                  <i class="fas fa-edit mr-1"></i> Adjust Score
                </button>
                <button class="view-team px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md ml-1" data-team-id="${team.id}">
                  <i class="fas fa-eye mr-1"></i> Details
                </button>
              </td>
            </tr>
          `;
        }).join("");
        
        // Add event listeners for team score adjustment and view details
        document.querySelectorAll(".edit-team-score").forEach((button) => {
          button.addEventListener("click", () => {
            const teamId = parseInt(button.getAttribute("data-team-id"));
            openTeamScoreAdjustment(teamId);
          });
        });
        
        document.querySelectorAll(".view-team").forEach((button) => {
          button.addEventListener("click", () => {
            const teamId = parseInt(button.getAttribute("data-team-id"));
            viewTeamDetails(teamId);
          });
        });
      }

      // Load individual leaderboard
      function loadIndividualLeaderboard() {
        const sortedUsers = [...mockData.users].sort((a, b) => b.points - a.points);
        
        individualLeaderboardTable.innerHTML = sortedUsers.map((user, index) => {
          const team = mockData.teams.find((t) => t.id === user.teamId);
          const userActivities = mockData.activities.filter((a) => a.userId === user.id && a.status === "approved");
          const activityCount = userActivities.length;
          
          return `
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${index + 1}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${user.firstName} ${user.lastName}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${team ? team.name : 'Unknown'}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${user.points}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${activityCount}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <button class="view-user-activities px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md" data-user-id="${user.id}">
                  <i class="fas fa-list mr-1"></i> View
                </button>
              </td>
            </tr>
          `;
        }).join("");
        
        totalIndividualsElement.textContent = sortedUsers.length;
        
        // Add event listeners for user activity details
        document.querySelectorAll(".view-user-activities").forEach((button) => {
          button.addEventListener("click", () => {
            const userId = parseInt(button.getAttribute("data-user-id"));
            viewUserDetails(userId);
          });
        });
      }

      // Filter individual leaderboard
      function filterIndividualLeaderboard() {
        const searchTerm = searchIndividualInput.value.toLowerCase();
        const teamFilter = filterTeamSelect.value;
        
        let filteredUsers = [...mockData.users];
        
        // Apply search filter
        if (searchTerm) {
          filteredUsers = filteredUsers.filter((user) => {
            const fullName = `${user.firstName} ${user.lastName}`.toLowerCase();
            const team = mockData.teams.find((t) => t.id === user.teamId);
            const teamName = team ? team.name.toLowerCase() : "";
            
            return fullName.includes(searchTerm) || teamName.includes(searchTerm);
          });
        }
        
        // Apply team filter
        if (teamFilter) {
          filteredUsers = filteredUsers.filter((user) => user.teamId === parseInt(teamFilter));
        }
        
        // Sort by points
        filteredUsers.sort((a, b) => b.points - a.points);
        
        // Update table
        individualLeaderboardTable.innerHTML = filteredUsers.map((user, index) => {
          const team = mockData.teams.find((t) => t.id === user.teamId);
          const userActivities = mockData.activities.filter((a) => a.userId === user.id && a.status === "approved");
          const activityCount = userActivities.length;
          
          return `
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${index + 1}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${user.firstName} ${user.lastName}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${team ? team.name : 'Unknown'}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${user.points}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${activityCount}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <button class="view-user-activities px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md" data-user-id="${user.id}">
                  <i class="fas fa-list mr-1"></i> View
                </button>
              </td>
            </tr>
          `;
        }).join("");
        
        totalIndividualsElement.textContent = filteredUsers.length;
        
        // Re-add event listeners
        document.querySelectorAll(".view-user-activities").forEach((button) => {
          button.addEventListener("click", () => {
            const userId = parseInt(button.getAttribute("data-user-id"));
            viewUserDetails(userId);
          });
        });
      }

      // Load activities data
      function loadActivitiesData() {
        const activityTypes = Object.entries(mockData.activityTypes);
        
        activitiesTable.innerHTML = activityTypes.map(([key, activity], index) => {
          const statusClass = activity.status === "active" ? "text-green-500" : "text-red-500";
          const statusText = activity.status === "active" ? "Active" : "Disabled";
          
          return `
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${key}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${activity.name}</div>
              </td>
              <td class="px-6 py-4">
                <div class="text-sm">${activity.description}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${activity.points}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${activity.limit === 999 ? "No limit" : activity.limit}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${activity.evidence ? "Yes" : "No"}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${statusClass} bg-${activity.status === 'active' ? 'green' : 'red'}-100 dark:bg-${activity.status === 'active' ? 'green' : 'red'}-900/20">
                  ${statusText}
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <button class="edit-activity px-2 py-1 text-xs bg-primary hover:bg-indigo-700 text-white rounded-md" data-activity-key="${key}">
                  <i class="fas fa-edit mr-1"></i> Edit
                </button>
                <button class="toggle-activity px-2 py-1 text-xs ${activity.status === 'active' ? 'bg-red-500 hover:bg-red-700' : 'bg-green-500 hover:bg-green-700'} text-white rounded-md ml-1" data-activity-key="${key}" data-status="${activity.status}">
                  <i class="fas ${activity.status === 'active' ? 'fa-ban' : 'fa-check'} mr-1"></i> ${activity.status === 'active' ? 'Disable' : 'Enable'}
                </button>
              </td>
            </tr>
          `;
        }).join("");
        
        // Add event listeners for edit and toggle buttons
        document.querySelectorAll(".edit-activity").forEach((button) => {
          button.addEventListener("click", () => {
            const activityKey = button.getAttribute("data-activity-key");
            openEditActivityModal(activityKey);
          });
        });
        
        document.querySelectorAll(".toggle-activity").forEach((button) => {
          button.addEventListener("click", () => {
            const activityKey = button.getAttribute("data-activity-key");
            const currentStatus = button.getAttribute("data-status");
            toggleActivityStatus(activityKey, currentStatus);
          });
        });
      }

      // Load pending submissions data
      function loadPendingData() {
        const pendingActivities = mockData.activities.filter((a) => a.status === "pending");
        
        if (pendingActivities.length === 0) {
          pendingTable.innerHTML = "";
          noPendingElement.classList.remove("hidden");
        } else {
          noPendingElement.classList.add("hidden");
          
          pendingTable.innerHTML = pendingActivities.map((activity) => {
            const user = mockData.users.find((u) => u.id === activity.userId);
            const team = user ? mockData.teams.find((t) => t.id === user.teamId) : null;
            const activityType = mockData.activityTypes[activity.type];
            
            return `
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm">${formatDate(activity.date)}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium">${user ? `${user.firstName} ${user.lastName}` : 'Unknown'}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm">${team ? team.name : 'Unknown'}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium">${activityType ? activityType.name : activity.type}</div>
                </td>
                <td class="px-6 py-4">
                  <div class="text-sm">${activity.details}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium">${activity.points}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  ${activity.evidence ? 
                    `<button class="view-evidence px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md" data-evidence="${activity.evidence}">
                      <i class="fas fa-image mr-1"></i> View
                    </button>` : 
                    '<span class="text-sm text-gray-500">None</span>'
                  }
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex space-x-1">
                    <button class="approve-activity px-2 py-1 text-xs bg-green-500 hover:bg-green-700 text-white rounded-md" data-activity-id="${activity.id}">
                      <i class="fas fa-check mr-1"></i> Approve
                    </button>
                    <button class="reject-activity px-2 py-1 text-xs bg-red-500 hover:bg-red-700 text-white rounded-md" data-activity-id="${activity.id}">
                      <i class="fas fa-times mr-1"></i> Reject
                    </button>
                  </div>
                </td>
              </tr>
            `;
          }).join("");
          
          // Add event listeners for approval and rejection buttons
          document.querySelectorAll(".approve-activity").forEach((button) => {
            button.addEventListener("click", () => {
              const activityId = parseInt(button.getAttribute("data-activity-id"));
              approveActivity(activityId);
            });
          });
          
          document.querySelectorAll(".reject-activity").forEach((button) => {
            button.addEventListener("click", () => {
              const activityId = parseInt(button.getAttribute("data-activity-id"));
              openRejectActivityModal(activityId);
            });
          });
          
          document.querySelectorAll(".view-evidence").forEach((button) => {
            button.addEventListener("click", () => {
              const evidence = button.getAttribute("data-evidence");
              viewEvidence(evidence);
            });
          });
        }
        
        // Load processed activities
        loadProcessedActivities();
      }

      // Load processed (approved/rejected) activities
      function loadProcessedActivities() {
        const processedActivities = mockData.activities
          .filter((a) => a.status === "approved" || a.status === "rejected")
          .sort((a, b) => new Date(b.date) - new Date(a.date))
          .slice(0, 10);
        
        processedTable.innerHTML = processedActivities.map((activity) => {
          const user = mockData.users.find((u) => u.id === activity.userId);
          const activityType = mockData.activityTypes[activity.type];
          
          let statusClass, statusText;
          if (activity.status === "approved") {
            statusClass = "text-green-500";
            statusText = "Approved";
          } else {
            statusClass = "text-red-500";
            statusText = "Rejected";
          }
          
          return `
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${formatDate(activity.date)}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${user ? `${user.firstName} ${user.lastName}` : 'Unknown'}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${activityType ? activityType.name : activity.type}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${activity.points}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${statusClass} bg-${activity.status === 'approved' ? 'green' : 'red'}-100 dark:bg-${activity.status === 'approved' ? 'green' : 'red'}-900/20">
                  ${statusText}
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">Admin User</div>
              </td>
              <td class="px-6 py-4">
                <div class="text-sm">${activity.notes || '-'}</div>
              </td>
            </tr>
          `;
        }).join("");
      }

      // Filter pending submissions
      function filterPendingSubmissions() {
        const searchTerm = searchPendingInput.value.toLowerCase();
        
        const pendingActivities = mockData.activities.filter((a) => a.status === "pending");
        
        if (pendingActivities.length === 0) {
          pendingTable.innerHTML = "";
          noPendingElement.classList.remove("hidden");
          return;
        }
        
        noPendingElement.classList.add("hidden");
        
        const filteredActivities = pendingActivities.filter((activity) => {
          const user = mockData.users.find((u) => u.id === activity.userId);
          const team = user ? mockData.teams.find((t) => t.id === user.teamId) : null;
          const activityType = mockData.activityTypes[activity.type];
          
          const userName = user ? `${user.firstName} ${user.lastName}`.toLowerCase() : "";
          const teamName = team ? team.name.toLowerCase() : "";
          const activityName = activityType ? activityType.name.toLowerCase() : "";
          const details = activity.details.toLowerCase();
          
          return userName.includes(searchTerm) || 
                 teamName.includes(searchTerm) || 
                 activityName.includes(searchTerm) ||
                 details.includes(searchTerm);
        });
        
        pendingTable.innerHTML = filteredActivities.map((activity) => {
          const user = mockData.users.find((u) => u.id === activity.userId);
          const team = user ? mockData.teams.find((t) => t.id === user.teamId) : null;
          const activityType = mockData.activityTypes[activity.type];
          
          return `
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${formatDate(activity.date)}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${user ? `${user.firstName} ${user.lastName}` : 'Unknown'}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${team ? team.name : 'Unknown'}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${activityType ? activityType.name : activity.type}</div>
              </td>
              <td class="px-6 py-4">
                <div class="text-sm">${activity.details}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${activity.points}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                ${activity.evidence ? 
                  `<button class="view-evidence px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md" data-evidence="${activity.evidence}">
                    <i class="fas fa-image mr-1"></i> View
                  </button>` : 
                  '<span class="text-sm text-gray-500">None</span>'
                }
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex space-x-1">
                  <button class="approve-activity px-2 py-1 text-xs bg-green-500 hover:bg-green-700 text-white rounded-md" data-activity-id="${activity.id}">
                    <i class="fas fa-check mr-1"></i> Approve
                  </button>
                  <button class="reject-activity px-2 py-1 text-xs bg-red-500 hover:bg-red-700 text-white rounded-md" data-activity-id="${activity.id}">
                    <i class="fas fa-times mr-1"></i> Reject
                  </button>
                </div>
              </td>
            </tr>
          `;
        }).join("");
        
        // Re-add event listeners
        document.querySelectorAll(".approve-activity").forEach((button) => {
          button.addEventListener("click", () => {
            const activityId = parseInt(button.getAttribute("data-activity-id"));
            approveActivity(activityId);
          });
        });
        
        document.querySelectorAll(".reject-activity").forEach((button) => {
          button.addEventListener("click", () => {
            const activityId = parseInt(button.getAttribute("data-activity-id"));
            openRejectActivityModal(activityId);
          });
        });
        
        document.querySelectorAll(".view-evidence").forEach((button) => {
          button.addEventListener("click", () => {
            const evidence = button.getAttribute("data-evidence");
            viewEvidence(evidence);
          });
        });
      }

      // Load teams data
      function loadTeamsData() {
        teamsTable.innerHTML = mockData.teams.map((team) => {
          const teamMembers = mockData.users.filter((u) => u.teamId === team.id);
          const memberCount = teamMembers.length;
          const avgPoints = memberCount > 0 ? (team.points / memberCount).toFixed(1) : 0;
          
          // Count meet-n-greet activities
          const meetupCount = mockData.activities.filter(
            (a) => a.type === "team_meetup" && a.status === "approved" && 
            teamMembers.some((member) => member.id === a.userId)
          ).length;
          
          // Count meet-n-greet attendance
          const meetupAttendance = mockData.activities.filter(
            (a) => a.type === "meetup_attendance" && a.status === "approved" && 
            teamMembers.some((member) => member.id === a.userId)
          ).length;
          
          return `
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${team.name}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${memberCount}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${team.points}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${avgPoints}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${meetupCount} held / ${meetupAttendance} attended</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <button class="view-team px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md" data-team-id="${team.id}">
                  <i class="fas fa-eye mr-1"></i> View
                </button>
                <button class="edit-team px-2 py-1 text-xs bg-primary hover:bg-indigo-700 text-white rounded-md ml-1" data-team-id="${team.id}">
                  <i class="fas fa-edit mr-1"></i> Edit
                </button>
                <button class="delete-team px-2 py-1 text-xs bg-red-500 hover:bg-red-700 text-white rounded-md ml-1" data-team-id="${team.id}">
                  <i class="fas fa-trash mr-1"></i> Delete
                </button>
              </td>
            </tr>
          `;
        }).join("");
        
        // Add event listeners
        document.querySelectorAll(".view-team").forEach((button) => {
          button.addEventListener("click", () => {
            const teamId = parseInt(button.getAttribute("data-team-id"));
            viewTeamDetails(teamId);
          });
        });
        
        document.querySelectorAll(".edit-team").forEach((button) => {
          button.addEventListener("click", () => {
            const teamId = parseInt(button.getAttribute("data-team-id"));
            openEditTeamModal(teamId);
          });
        });
        
        document.querySelectorAll(".delete-team").forEach((button) => {
          button.addEventListener("click", () => {
            const teamId = parseInt(button.getAttribute("data-team-id"));
            confirmDeleteTeam(teamId);
          });
        });
      }

      // Load users data
      function loadUsersData() {
        // Initialize user table
        updateUsersTable(mockData.users);
      }

      // Update users table with filtered/paginated users
      function updateUsersTable(users) {
        usersTable.innerHTML = users.map((user) => {
          const team = mockData.teams.find((t) => t.id === user.teamId);
          const userActivities = mockData.activities.filter((a) => a.userId === user.id && a.status === "approved");
          const activityCount = userActivities.length;
          
          return `
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${user.id}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${user.firstName} ${user.lastName}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${user.email}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${team ? team.name : 'Unknown'}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${user.points}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${activityCount}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <button class="view-user px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md" data-user-id="${user.id}">
                  <i class="fas fa-eye mr-1"></i> View
                </button>
                <button class="edit-user px-2 py-1 text-xs bg-primary hover:bg-indigo-700 text-white rounded-md ml-1" data-user-id="${user.id}">
                  <i class="fas fa-edit mr-1"></i> Edit
                </button>
                <button class="delete-user px-2 py-1 text-xs bg-red-500 hover:bg-red-700 text-white rounded-md ml-1" data-user-id="${user.id}">
                  <i class="fas fa-trash mr-1"></i> Delete
                </button>
              </td>
            </tr>
          `;
        }).join("");
        
        totalUsersCountElement.textContent = users.length;
        
        // Add event listeners
        document.querySelectorAll(".view-user").forEach((button) => {
          button.addEventListener("click", () => {
            const userId = parseInt(button.getAttribute("data-user-id"));
            viewUserDetails(userId);
          });
        });
        
        document.querySelectorAll(".edit-user").forEach((button) => {
          button.addEventListener("click", () => {
            const userId = parseInt(button.getAttribute("data-user-id"));
            openEditUserModal(userId);
          });
        });
        
        document.querySelectorAll(".delete-user").forEach((button) => {
          button.addEventListener("click", () => {
            const userId = parseInt(button.getAttribute("data-user-id"));
            confirmDeleteUser(userId);
          });
        });
      }

      // Filter users
      function filterUsers() {
        const searchTerm = searchUsersInput.value.toLowerCase();
        const teamFilter = filterUsersTeamSelect.value;
        
        let filteredUsers = [...mockData.users];
        
        // Apply search filter
        if (searchTerm) {
          filteredUsers = filteredUsers.filter((user) => {
            const fullName = `${user.firstName} ${user.lastName}`.toLowerCase();
            const email = user.email.toLowerCase();
            
            return fullName.includes(searchTerm) || email.includes(searchTerm);
          });
        }
        
        // Apply team filter
        if (teamFilter) {
          filteredUsers = filteredUsers.filter((user) => user.teamId === parseInt(teamFilter));
        }
        
        // Update table
        updateUsersTable(filteredUsers);
      }

      // Load points data
      function loadPointsData() {
        // Load manual adjustments
        manualPointsTable.innerHTML = mockData.manualAdjustments.map((adjustment) => {
          const user = mockData.users.find((u) => u.id === adjustment.userId);
          const team = user ? mockData.teams.find((t) => t.id === user.teamId) : null;
          const admin = mockData.admins.find((a) => a.id === adjustment.adminId);
          
          const pointsClass = adjustment.points >= 0 ? "text-green-500" : "text-red-500";
          const pointsPrefix = adjustment.points >= 0 ? "+" : "";
          
          return `
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${formatDate(adjustment.date)}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${user ? `${user.firstName} ${user.lastName}` : 'Unknown'}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${team ? team.name : 'Unknown'}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">Manual Adjustment</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium ${pointsClass}">${pointsPrefix}${adjustment.points}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${admin ? `${admin.firstName} ${admin.lastName}` : 'Unknown'}</div>
              </td>
              <td class="px-6 py-4">
                <div class="text-sm">${adjustment.reason}</div>
              </td>
            </tr>
          `;
        }).join("");
      }

      // Load reports data
      function loadReportsData() {
        // Load existing reports
        reportsTable.innerHTML = mockData.reports.map((report) => {
          return `
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${formatDate(report.date)}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${formatReportType(report.type)}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${report.dateRange}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${report.generatedBy}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <button class="view-report px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md" data-report-id="${report.id}">
                  <i class="fas fa-eye mr-1"></i> View
                </button>
                <button class="download-report px-2 py-1 text-xs bg-primary hover:bg-indigo-700 text-white rounded-md ml-1" data-report-id="${report.id}">
                  <i class="fas fa-download mr-1"></i> Download
                </button>
                <button class="email-report px-2 py-1 text-xs bg-green-500 hover:bg-green-700 text-white rounded-md ml-1" data-report-id="${report.id}">
                  <i class="fas fa-envelope mr-1"></i> Email
                </button>
              </td>
            </tr>
          `;
        }).join("");
        
        // Add event listeners
        document.querySelectorAll(".view-report").forEach((button) => {
          button.addEventListener("click", () => {
            const reportId = parseInt(button.getAttribute("data-report-id"));
            viewReport(reportId);
          });
        });
        
        document.querySelectorAll(".download-report").forEach((button) => {
          button.addEventListener("click", () => {
            const reportId = parseInt(button.getAttribute("data-report-id"));
            downloadReport(reportId);
          });
        });
        
        document.querySelectorAll(".email-report").forEach((button) => {
          button.addEventListener("click", () => {
            const reportId = parseInt(button.getAttribute("data-report-id"));
            emailExistingReport(reportId);
          });
        });
      }

      // Toggle custom date range in reports
      function toggleCustomDateRange() {
        if (reportDateRangeSelect.value === "custom") {
          customDateRange.classList.remove("hidden");
        } else {
          customDateRange.classList.add("hidden");
        }
      }

      // Preview report
      function previewReport() {
        const reportType = reportTypeSelect.value;
        
        if (!reportType) {
          showToast("Please select a report type.", "error");
          return;
        }
        
        // Get date range
        let dateRange = "";
        if (reportDateRangeSelect.value === "custom") {
          const startDate = reportStartDateInput.value;
          const endDate = reportEndDateInput.value;
          
          if (!startDate || !endDate) {
            showToast("Please select both start and end dates.", "error");
            return;
          }
          
          dateRange = `${formatDate(startDate)} to ${formatDate(endDate)}`;
        } else {
          dateRange = reportDateRangeSelect.options[reportDateRangeSelect.selectedIndex].text;
        }
        
        // Generate report content
        let reportHTML = `
          <div class="space-y-6">
            <div class="text-center">
              <h2 class="text-2xl font-bold text-smith-red">Smith School MBA Game</h2>
              <h3 class="text-xl font-semibold">${formatReportType(reportType)} Report</h3>
              <p class="text-gray-500 dark:text-gray-400">${dateRange}</p>
              <p class="text-gray-500 dark:text-gray-400">Generated on ${formatDate(new Date().toISOString())}</p>
            </div>
        `;
        
        // Include top teams if checked
        if (document.getElementById("include-top-teams").checked) {
          const topTeams = [...mockData.teams]
            .sort((a, b) => b.points - a.points)
            .slice(0, 5);
          
          reportHTML += `
            <div>
              <h4 class="text-lg font-semibold mb-2">Top Teams</h4>
              <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                  <thead class="bg-gray-50 dark:bg-gray-700">
                    <tr>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Rank</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Team</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Members</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Points</th>
                    </tr>
                  </thead>
                  <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                    ${topTeams.map((team, index) => {
                      const teamMembers = mockData.users.filter((u) => u.teamId === team.id);
                      return `
                        <tr>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium">${index + 1}</div>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium">${team.name}</div>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm">${teamMembers.length}</div>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium">${team.points}</div>
                          </td>
                        </tr>
                      `;
                    }).join("")}
                  </tbody>
                </table>
              </div>
            </div>
          `;
        }
        
        // Include top individuals if checked
        if (document.getElementById("include-top-individuals").checked) {
          const topUsers = [...mockData.users]
            .sort((a, b) => b.points - a.points)
            .slice(0, 10);
          
          reportHTML += `
            <div>
              <h4 class="text-lg font-semibold mb-2">Top Individuals</h4>
              <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                  <thead class="bg-gray-50 dark:bg-gray-700">
                    <tr>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Rank</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Name</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Team</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Points</th>
                    </tr>
                  </thead>
                  <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                    ${topUsers.map((user, index) => {
                      const team = mockData.teams.find((t) => t.id === user.teamId);
                      return `
                        <tr>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium">${index + 1}</div>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium">${user.firstName} ${user.lastName}</div>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm">${team ? team.name : 'Unknown'}</div>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium">${user.points}</div>
                          </td>
                        </tr>
                      `;
                    }).join("")}
                  </tbody>
                </table>
              </div>
            </div>
          `;
        }
        
        // Include pending submissions if checked
        if (document.getElementById("include-pending").checked) {
          const pendingActivities = mockData.activities.filter((a) => a.status === "pending");
          
          reportHTML += `
            <div>
              <h4 class="text-lg font-semibold mb-2">Pending Submissions (${pendingActivities.length})</h4>
              ${pendingActivities.length === 0 ? `
                <p class="text-gray-500 dark:text-gray-400">No pending submissions found.</p>
              ` : `
                <div class="overflow-x-auto">
                  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                    <thead class="bg-gray-50 dark:bg-gray-700">
                      <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Date</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">User</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Team</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Activity</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Points</th>
                      </tr>
                    </thead>
                    <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                      ${pendingActivities.map((activity) => {
                        const user = mockData.users.find((u) => u.id === activity.userId);
                        const team = user ? mockData.teams.find((t) => t.id === user.teamId) : null;
                        const activityType = mockData.activityTypes[activity.type];
                        
                        return `
                          <tr>
                            <td class="px-6 py-4 whitespace-nowrap">
                              <div class="text-sm">${formatDate(activity.date)}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                              <div class="text-sm font-medium">${user ? `${user.firstName} ${user.lastName}` : 'Unknown'}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                              <div class="text-sm">${team ? team.name : 'Unknown'}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                              <div class="text-sm">${activityType ? activityType.name : activity.type}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                              <div class="text-sm font-medium">${activity.points}</div>
                            </td>
                          </tr>
                        `;
                      }).join("")}
                    </tbody>
                  </table>
                </div>
              `}
            </div>
          `;
        }
        
        // Include flagged activities if checked
        if (document.getElementById("include-flagged").checked) {
          // For demo, we'll consider rejected activities as "flagged"
          const flaggedActivities = mockData.activities.filter((a) => a.status === "rejected");
          
          reportHTML += `
            <div>
              <h4 class="text-lg font-semibold mb-2">Flagged Activities (${flaggedActivities.length})</h4>
              ${flaggedActivities.length === 0 ? `
                <p class="text-gray-500 dark:text-gray-400">No flagged activities found.</p>
              ` : `
                <div class="overflow-x-auto">
                  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                    <thead class="bg-gray-50 dark:bg-gray-700">
                      <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Date</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">User</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Activity</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Reason</th>
                      </tr>
                    </thead>
                    <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                      ${flaggedActivities.map((activity) => {
                        const user = mockData.users.find((u) => u.id === activity.userId);
                        const activityType = mockData.activityTypes[activity.type];
                        
                        return `
                          <tr>
                            <td class="px-6 py-4 whitespace-nowrap">
                              <div class="text-sm">${formatDate(activity.date)}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                              <div class="text-sm font-medium">${user ? `${user.firstName} ${user.lastName}` : 'Unknown'}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                              <div class="text-sm">${activityType ? activityType.name : activity.type}</div>
                            </td>
                            <td class="px-6 py-4">
                              <div class="text-sm">${activity.notes || 'No reason specified'}</div>
                            </td>
                          </tr>
                        `;
                      }).join("")}
                    </tbody>
                  </table>
                </div>
              `}
            </div>
          `;
        }
        
        // Include activity breakdown if checked
        if (document.getElementById("include-activity-breakdown").checked) {
          const activityCounts = {};
          const approvedActivities = mockData.activities.filter((a) => a.status === "approved");
          
          // Count activities by type
          approvedActivities.forEach((activity) => {
            if (!activityCounts[activity.type]) {
              activityCounts[activity.type] = 0;
            }
            activityCounts[activity.type]++;
          });
          
          reportHTML += `
            <div>
              <h4 class="text-lg font-semibold mb-2">Activity Type Breakdown</h4>
              <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                  <thead class="bg-gray-50 dark:bg-gray-700">
                    <tr>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Activity Type</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Count</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Points Per</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Total Points</th>
                    </tr>
                  </thead>
                  <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                    ${Object.entries(activityCounts).map(([type, count]) => {
                      const activityType = mockData.activityTypes[type];
                      const pointsValue = activityType ? activityType.points : 0;
                      const totalPoints = pointsValue * count;
                      
                      return `
                        <tr>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium">${activityType ? activityType.name : type}</div>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm">${count}</div>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm">${pointsValue}</div>
                          </td>
                          <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium">${totalPoints}</div>
                          </td>
                        </tr>
                      `;
                    }).join("")}
                  </tbody>
                </table>
              </div>
            </div>
          `;
        }
        
        reportHTML += `</div>`;
        
        // Display the report
        reportContent.innerHTML = reportHTML;
        reportPreview.classList.remove("hidden");
      }

      // Download report as PDF
      function downloadReportAsPdf() {
        // In a real application, this would generate a PDF using jsPDF
        // For this demo, we'll just show a toast message
        showToast("PDF download started.", "success");
        
        // Add a new report to the list
        const newReport = {
          id: mockData.reports.length + 1,
          type: reportTypeSelect.value,
          dateRange: reportDateRangeSelect.options[reportDateRangeSelect.selectedIndex].text,
          generatedBy: currentAdmin ? `${currentAdmin.firstName} ${currentAdmin.lastName}` : "Admin User",
          date: new Date().toISOString().split("T")[0],
        };
        
        mockData.reports.push(newReport);
        
        // Refresh reports table
        loadReportsData();
      }

      // Email report
      function emailReport() {
        // In a real application, this would send an email with the report
        // For this demo, we'll just show a toast message
        showToast("Report emailed successfully.", "success");
      }

      // Download existing report
      function downloadReport(reportId) {
        // In a real application, this would download the specific report
        // For this demo, we'll just show a toast message
        showToast("Report download started.", "success");
      }

      // Email existing report
      function emailExistingReport(reportId) {
        // In a real application, this would email the specific report
        // For this demo, we'll just show a toast message
        showToast("Report emailed successfully.", "success");
      }

      // View existing report
      function viewReport(reportId) {
        const report = mockData.reports.find((r) => r.id === reportId);
        
        if (!report) {
          showToast("Report not found.", "error");
          return;
        }
        
        // Generate the report preview
        // In a real application, this would load the saved report
        // For this demo, we'll generate a simple preview
        
        reportContent.innerHTML = `
          <div class="space-y-6">
            <div class="text-center">
              <h2 class="text-2xl font-bold text-smith-red">Smith School MBA Game</h2>
              <h3 class="text-xl font-semibold">${formatReportType(report.type)} Report</h3>
              <p class="text-gray-500 dark:text-gray-400">${report.dateRange}</p>
              <p class="text-gray-500 dark:text-gray-400">Generated on ${formatDate(report.date)} by ${report.generatedBy}</p>
            </div>
            <p class="text-gray-500 dark:text-gray-400 text-center">
              This is a preview of a previously generated report.
            </p>
          </div>
        `;
        
        reportPreview.classList.remove("hidden");
      }

      // Load notifications data
      function loadNotificationsData() {
        // Initialize notification team and user dropdowns
        const teamOptions = mockData.teams
          .map((team) => `<option value="${team.id}">${team.name}</option>`)
          .join("");
        notificationTeamInput.innerHTML = teamOptions;
        
        const userOptions = mockData.users
          .map((user) => `<option value="${user.id}">${user.firstName} ${user.lastName}</option>`)
          .join("");
        notificationUserInput.innerHTML = userOptions;
        
        // Load sent notifications
        notificationsTable.innerHTML = mockData.notifications.map((notification) => {
          const deliveryMethods = notification.delivery.map((method) => {
            if (method === "app") return "In-App";
            if (method === "email") return "Email";
            if (method === "whatsapp") return "WhatsApp";
            return method;
          }).join(", ");
          
          let typeClass, typeIcon;
          switch (notification.type) {
            case "important":
              typeClass = "text-red-500";
              typeIcon = "exclamation-circle";
              break;
            case "reminder":
              typeClass = "text-yellow-500";
              typeIcon = "clock";
              break;
            case "congratulation":
              typeClass = "text-green-500";
              typeIcon = "trophy";
              break;
            default:
              typeClass = "text-blue-500";
              typeIcon = "info-circle";
          }
          
          return `
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${formatDate(notification.date)}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${notification.subject}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${notification.recipientDetails}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                  <i class="fas fa-${typeIcon} ${typeClass} mr-1.5"></i>
                  <span class="text-sm ${typeClass}">${formatNotificationType(notification.type)}</span>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${deliveryMethods}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${notification.sentBy}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <button class="view-notification px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md" data-notification-id="${notification.id}">
                  <i class="fas fa-eye mr-1"></i> View
                </button>
                <button class="resend-notification px-2 py-1 text-xs bg-primary hover:bg-indigo-700 text-white rounded-md ml-1" data-notification-id="${notification.id}">
                  <i class="fas fa-redo mr-1"></i> Resend
                </button>
              </td>
            </tr>
          `;
        }).join("");
        
        // Add event listeners
        document.querySelectorAll(".view-notification").forEach((button) => {
          button.addEventListener("click", () => {
            const notificationId = parseInt(button.getAttribute("data-notification-id"));
            viewNotification(notificationId);
          });
        });
        
        document.querySelectorAll(".resend-notification").forEach((button) => {
          button.addEventListener("click", () => {
            const notificationId = parseInt(button.getAttribute("data-notification-id"));
            resendNotification(notificationId);
          });
        });
      }

      // Toggle notification recipients based on selection
      function toggleNotificationRecipients() {
        const selectedRecipient = notificationRecipientSelect.value;
        
        if (selectedRecipient === "team") {
          notificationTeamSelect.classList.remove("hidden");
          notificationUserSelect.classList.add("hidden");
        } else if (selectedRecipient === "user") {
          notificationTeamSelect.classList.add("hidden");
          notificationUserSelect.classList.remove("hidden");
        } else {
          notificationTeamSelect.classList.add("hidden");
          notificationUserSelect.classList.add("hidden");
        }
      }

      // Load a notification template
      function loadNotificationTemplate(templateName) {
        let subject = "";
        let message = "";
        let type = "standard";
        
        switch (templateName) {
          case "Weekly Update":
            subject = "MBA Game: Weekly Update";
            message = `Hello everyone,

Here's a summary of this week's activities in the MBA Game:

- Top Team: ${mockData.teams.sort((a, b) => b.points - a.points)[0].name}
- Top Individual: ${mockData.users.sort((a, b) => b.points - a.points)[0].firstName} ${mockData.users.sort((a, b) => b.points - a.points)[0].lastName}
- New Activities: ${mockData.activities.filter((a) => {
  const date = new Date(a.date);
  const now = new Date();
  const weekAgo = new Date();
  weekAgo.setDate(now.getDate() - 7);
  return date >= weekAgo && date <= now;
}).length}

Keep up the great work! Remember, the final deadline is August 26, 2024.

Best regards,
Smith School Admin Team`;
            type = "standard";
            break;
          case "Important Deadline Reminder":
            subject = "REMINDER: MBA Game Points Tally This Thursday";
            message = `Dear MBA Game Participants,

This is a friendly reminder that our next points tally will be this Thursday at 12:00 PM EST.

Please make sure to submit all your activities before then to be included in this week's standings.

Thank you!

Best regards,
Smith School Admin Team`;
            type = "reminder";
            break;
          case "New Activity Announcement":
            subject = "MBA Game: New Activity Type Added";
            message = `Hello everyone,

We're excited to announce a new activity type has been added to the MBA Game:

- Activity: Class Registration
- Points: 1
- Limit: 1 per person
- Evidence Required: No

You can now earn points by registering for your first semester classes. Simply submit this activity in the system once you've completed your registration.

Happy point collecting!

Best regards,
Smith School Admin Team`;
            type = "important";
            break;
          case "Congratulate Top Performers":
            subject = "MBA Game: Congratulations to Our Top Performers!";
            message = `Congratulations to our top performers in the MBA Game!

Top Team: ${mockData.teams.sort((a, b) => b.points - a.points)[0].name} with ${mockData.teams.sort((a, b) => b.points - a.points)[0].points} points

Top Individuals:
1. ${mockData.users.sort((a, b) => b.points - a.points)[0].firstName} ${mockData.users.sort((a, b) => b.points - a.points)[0].lastName} - ${mockData.users.sort((a, b) => b.points - a.points)[0].points} points
2. ${mockData.users.sort((a, b) => b.points - a.points)[1].firstName} ${mockData.users.sort((a, b) => b.points - a.points)[1].lastName} - ${mockData.users.sort((a, b) => b.points - a.points)[1].points} points
3. ${mockData.users.sort((a, b) => b.points - a.points)[2].firstName} ${mockData.users.sort((a, b) => b.points - a.points)[2].lastName} - ${mockData.users.sort((a, b) => b.points - a.points)[2].points} points

Your dedication and enthusiasm are what make the MBA Game a success!

Keep up the fantastic work!

Best regards,
Smith School Admin Team`;
            type = "congratulation";
            break;
        }
        
        // Set form values
        notificationSubjectInput.value = subject;
        notificationMessageInput.value = message;
        notificationTypeSelect.value = type;
      }

      // Handle notification form submission
      function handleNotificationSubmit(e) {
        e.preventDefault();
        
        const subject = notificationSubjectInput.value;
        const message = notificationMessageInput.value;
        const type = notificationTypeSelect.value;
        const recipient = notificationRecipientSelect.value;
        
        if (!subject || !message) {
          showToast("Please fill in both subject and message.", "error");
          return;
        }
        
        // Get recipient details
        let recipientDetails = "";
        if (recipient === "team") {
          const teamId = parseInt(notificationTeamInput.value);
          const team = mockData.teams.find((t) => t.id === teamId);
          recipientDetails = team ? team.name : "Unknown Team";
        } else if (recipient === "user") {
          const userId = parseInt(notificationUserInput.value);
          const user = mockData.users.find((u) => u.id === userId);
          recipientDetails = user ? `${user.firstName} ${user.lastName}` : "Unknown User";
        } else {
          recipientDetails = "All Users";
        }
        
        // Get delivery methods
        const deliveryMethods = [];
        if (deliveryAppCheckbox.checked) deliveryMethods.push("app");
        if (deliveryEmailCheckbox.checked) deliveryMethods.push("email");
        if (deliveryWhatsappCheckbox.checked) deliveryMethods.push("whatsapp");
        
        if (deliveryMethods.length === 0) {
          showToast("Please select at least one delivery method.", "error");
          return;
        }
        
        // Create new notification
        const newNotification = {
          id: mockData.notifications.length + 1,
          subject,
          message,
          recipients: recipient,
          recipientDetails,
          type,
          delivery: deliveryMethods,
          sentBy: currentAdmin ? `${currentAdmin.firstName} ${currentAdmin.lastName}` : "Admin User",
          date: new Date().toISOString().split("T")[0],
        };
        
        // Add to mock data
        mockData.notifications.push(newNotification);
        
        // Log admin action
        logAdminAction("notification", `Sent ${type} notification: ${subject}`, null, null, null);
        
        // Reset form
        notificationForm.reset();
        deliveryAppCheckbox.checked = true;
        
        // Refresh notification table
        loadNotificationsData();
        
        showToast("Notification sent successfully!", "success");
      }

      // View notification details
      function viewNotification(notificationId) {
        const notification = mockData.notifications.find((n) => n.id === notificationId);
        
        if (!notification) {
          showToast("Notification not found.", "error");
          return;
        }
        
        activityDetailTitle.textContent = "Notification Details";
        
        let typeClass, typeIcon;
        switch (notification.type) {
          case "important":
            typeClass = "text-red-500";
            typeIcon = "exclamation-circle";
            break;
          case "reminder":
            typeClass = "text-yellow-500";
            typeIcon = "clock";
            break;
          case "congratulation":
            typeClass = "text-green-500";
            typeIcon = "trophy";
            break;
          default:
            typeClass = "text-blue-500";
            typeIcon = "info-circle";
        }
        
        activityDetailContent.innerHTML = `
          <div class="space-y-4">
            <div>
              <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400">Subject</h4>
              <p class="mt-1">${notification.subject}</p>
            </div>
            <div>
              <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400">Recipients</h4>
              <p class="mt-1">${notification.recipientDetails}</p>
            </div>
            <div>
              <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400">Type</h4>
              <div class="mt-1 flex items-center">
                <i class="fas fa-${typeIcon} ${typeClass} mr-1.5"></i>
                <span class="${typeClass}">${formatNotificationType(notification.type)}</span>
              </div>
            </div>
            <div>
              <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400">Delivery Methods</h4>
              <p class="mt-1">${notification.delivery.map((method) => {
                if (method === "app") return "In-App";
                if (method === "email") return "Email";
                if (method === "whatsapp") return "WhatsApp";
                return method;
              }).join(", ")}</p>
            </div>
            <div>
              <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400">Sent By</h4>
              <p class="mt-1">${notification.sentBy} on ${formatDate(notification.date)}</p>
            </div>
            <div>
              <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400">Message</h4>
              <div class="mt-1 p-4 bg-gray-50 dark:bg-gray-700 rounded-md whitespace-pre-wrap">${notification.message}</div>
            </div>
          </div>
        `;
        
        activityDetailModal.classList.remove("hidden");
      }

      // Resend notification
      function resendNotification(notificationId) {
        const notification = mockData.notifications.find((n) => n.id === notificationId);
        
        if (!notification) {
          showToast("Notification not found.", "error");
          return;
        }
        
        // In a real application, this would resend the notification
        // For this demo, we'll create a new notification with the same content
        
        const newNotification = {
          ...notification,
          id: mockData.notifications.length + 1,
          sentBy: currentAdmin ? `${currentAdmin.firstName} ${currentAdmin.lastName}` : "Admin User",
          date: new Date().toISOString().split("T")[0],
        };
        
        mockData.notifications.push(newNotification);
        
        // Log admin action
        logAdminAction("notification", `Resent notification: ${notification.subject}`, null, null, null);
        
        // Refresh notification table
        loadNotificationsData();
        
        showToast("Notification resent successfully!", "success");
      }

      // Load admin logs data
      function loadLogsData() {
        updateLogsTable(mockData.adminLogs);
      }

      // Update logs table with filtered logs
      function updateLogsTable(logs) {
        logsTable.innerHTML = logs.map((log) => {
          return `
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${formatDateTime(log.timestamp)}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${log.adminId ? `Admin User` : 'Unknown'}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium">${formatLogAction(log.action)}</div>
              </td>
              <td class="px-6 py-4">
                <div class="text-sm">${log.details}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm">${log.affectedUser || log.affectedTeam || '-'}</div>
              </td>
              <td class="px-6 py-4">
                <div class="text-sm">${log.notes || '-'}</div>
              </td>
            </tr>
          `;
        }).join("");
        
        totalLogsElement.textContent = logs.length;
      }

      // Filter admin logs
      function filterAdminLogs() {
        const searchTerm = searchLogsInput.value.toLowerCase();
        const actionFilter = filterLogTypeSelect.value;
        
        let filteredLogs = [...mockData.adminLogs];
        
        // Apply search filter
        if (searchTerm) {
          filteredLogs = filteredLogs.filter((log) => {
            return (
              (log.details && log.details.toLowerCase().includes(searchTerm)) ||
              (log.affectedUser && log.affectedUser.toLowerCase().includes(searchTerm)) ||
              (log.affectedTeam && log.affectedTeam.toLowerCase().includes(searchTerm)) ||
              (log.notes && log.notes.toLowerCase().includes(searchTerm))
            );
          });
        }
        
        // Apply action filter
        if (actionFilter) {
          filteredLogs = filteredLogs.filter((log) => log.action === actionFilter);
        }
        
        // Sort by timestamp (newest first)
        filteredLogs.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        
        // Update table
        updateLogsTable(filteredLogs);