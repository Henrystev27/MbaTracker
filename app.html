<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MBA Game Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#5D5CDE",
              secondary: "#f3f4f6",
              smith: {
                red: "#e21833",
                yellow: "#ffd200",
                dark: "#1a1a1a",
              },
            },
          },
        },
        darkMode: "class",
      };

      // Check for dark mode preference
      if (
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches
      ) {
        document.documentElement.classList.add("dark");
      }
      window
        .matchMedia("(prefers-color-scheme: dark)")
        .addEventListener("change", (event) => {
          if (event.matches) {
            document.documentElement.classList.add("dark");
          } else {
            document.documentElement.classList.remove("dark");
          }
        });
    </script>
    <style>
      .loading-spinner {
        border: 3px solid rgba(0, 0, 0, 0.1);
        border-radius: 50%;
        border-top: 3px solid #5d5cde;
        width: 24px;
        height: 24px;
        animation: spin 1s linear infinite;
      }

      .dark .loading-spinner {
        border: 3px solid rgba(255, 255, 255, 0.1);
        border-top: 3px solid #5d5cde;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-track {
        background: #f1f1f1;
      }

      .dark ::-webkit-scrollbar-track {
        background: #2d2d2d;
      }

      ::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: #555;
      }

      /* Activity review transitions */
      .activity-item {
        transition: all 0.3s ease;
      }

      .activity-item.approved {
        background-color: rgba(0, 255, 0, 0.05);
      }

      .activity-item.rejected {
        background-color: rgba(255, 0, 0, 0.05);
      }

      /* Tooltip styles */
      .tooltip {
        position: relative;
        display: inline-block;
      }

      .tooltip .tooltiptext {
        visibility: hidden;
        width: 120px;
        background-color: #333;
        color: #fff;
        text-align: center;
        border-radius: 6px;
        padding: 5px;
        position: absolute;
        z-index: 1;
        bottom: 125%;
        left: 50%;
        margin-left: -60px;
        opacity: 0;
        transition: opacity 0.3s;
      }

      .tooltip:hover .tooltiptext {
        visibility: visible;
        opacity: 1;
      }
    </style>
  </head>
  <body
    class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen"
  >
    <div id="app" class="min-h-screen flex flex-col">
      <div
        id="login-container"
        class="flex flex-col items-center justify-center min-h-screen"
      >
        <div class="text-center mb-8">
          <h1 class="text-3xl md:text-4xl font-bold mb-2 text-smith-red">
            Smith School MBA Game
          </h1>
          <p class="text-lg text-gray-600 dark:text-gray-400">
            Admin Dashboard
          </p>
        </div>
        <div
          class="w-full max-w-md bg-white dark:bg-gray-800 rounded-lg shadow-md p-6"
        >
          <h2 class="text-2xl font-bold mb-6 text-center">Admin Login</h2>
          <form id="login-form" class="space-y-4">
            <div>
              <label for="email" class="block text-sm font-medium mb-1"
                >Admin Email</label
              >
              <input
                type="email"
                id="email"
                class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                placeholder="admin@umd.edu"
                required
              />
            </div>
            <div>
              <label for="password" class="block text-sm font-medium mb-1"
                >Password</label
              >
              <input
                type="password"
                id="password"
                class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                placeholder="••••••••"
                required
              />
            </div>
            <button
              type="submit"
              class="w-full bg-primary hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition duration-200"
            >
              Sign In
            </button>
          </form>
        </div>
        <div class="mt-4 text-center">
          <button id="demo-login" class="text-primary hover:underline">
            Use Demo Admin Account
          </button>
        </div>
      </div>

      <div id="main-app" class="flex h-screen overflow-hidden hidden">
        <!-- Sidebar -->
        <div
          class="w-64 bg-white dark:bg-gray-800 border-r dark:border-gray-700 shadow-sm hidden md:block flex-shrink-0"
        >
          <div class="p-4 border-b dark:border-gray-700">
            <div class="flex items-center">
              <img
                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBmaWxsPSIjZTIxODMzIj48cGF0aCBkPSJNNTAgOTBjMjIuMSAwIDQwLTE3LjkgNDAtNDBTNzIuMSAxMCA1MCAxMCAxMCAyNy45IDEwIDUwczE3LjkgNDAgNDAgNDB6bTAtNzBjMTYuNSAwIDMwIDEzLjUgMzAgMzBTNjYuNSA4MCA1MCA4MCAyMCA2Ni41IDIwIDUwczEzLjUtMzAgMzAtMzB6Ii8+PHBhdGggZD0iTTM1IDY1aDMwVjM1SDM1djMwem0xMC0yMGgxMHYxMEg0NVY0NXoiLz48L3N2Zz4="
                alt="Logo"
                class="h-8 w-8 mr-3"
              />
              <div>
                <h1 class="text-lg font-bold text-smith-red">MBA Game Admin</h1>
              </div>
            </div>
          </div>
          <nav class="mt-4">
            <ul class="space-y-1">
              <li>
                <button
                  data-section="dashboard"
                  class="nav-link w-full flex items-center px-4 py-3 text-gray-900 dark:text-gray-100 bg-gray-100 dark:bg-gray-700"
                >
                  <i class="fas fa-tachometer-alt w-5 mr-3"></i>
                  <span>Dashboard</span>
                </button>
              </li>
              <li>
                <button
                  data-section="pending"
                  class="nav-link w-full flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                >
                  <i class="fas fa-clipboard-check w-5 mr-3"></i>
                  <span>Activity Review</span>
                  <span
                    id="pending-count"
                    class="ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full"
                    >0</span
                  >
                </button>
              </li>
              <li>
                <button
                  data-section="users"
                  class="nav-link w-full flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                >
                  <i class="fas fa-users w-5 mr-3"></i>
                  <span>Users</span>
                </button>
              </li>
              <li>
                <button
                  data-section="teams"
                  class="nav-link w-full flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                >
                  <i class="fas fa-user-friends w-5 mr-3"></i>
                  <span>Teams</span>
                </button>
              </li>
              <li>
                <button
                  data-section="activities"
                  class="nav-link w-full flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                >
                  <i class="fas fa-tasks w-5 mr-3"></i>
                  <span>Activity Definitions</span>
                </button>
              </li>
              <li>
                <button
                  data-section="leaderboard"
                  class="nav-link w-full flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                >
                  <i class="fas fa-trophy w-5 mr-3"></i>
                  <span>Leaderboard Management</span>
                </button>
              </li>
              <li>
                <button
                  data-section="logs"
                  class="nav-link w-full flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                >
                  <i class="fas fa-history w-5 mr-3"></i>
                  <span>Logs & Notifications</span>
                </button>
              </li>
              <li>
                <button
                  data-section="reports"
                  class="nav-link w-full flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                >
                  <i class="fas fa-chart-bar w-5 mr-3"></i>
                  <span>Reports</span>
                </button>
              </li>
              <li>
                <button
                  data-section="settings"
                  class="nav-link w-full flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                >
                  <i class="fas fa-cog w-5 mr-3"></i>
                  <span>Settings</span>
                </button>
              </li>
            </ul>
          </nav>
          <div class="absolute bottom-0 w-64 p-4 border-t dark:border-gray-700">
            <div class="flex items-center">
              <div
                class="h-8 w-8 rounded-full bg-indigo-500 flex items-center justify-center text-white"
              >
                <span id="admin-initials">AD</span>
              </div>
              <div class="ml-3">
                <p class="text-sm font-medium" id="admin-name">Admin User</p>
                <p class="text-xs text-gray-500 dark:text-gray-400">
                  Administrator
                </p>
              </div>
            </div>
            <button
              id="logout-btn"
              class="mt-4 w-full flex items-center px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md"
            >
              <i class="fas fa-sign-out-alt mr-3"></i>
              <span>Logout</span>
            </button>
          </div>
        </div>

        <!-- Mobile menu -->
        <div
          id="mobile-menu"
          class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 hidden"
        >
          <div class="bg-white dark:bg-gray-800 w-64 h-full shadow-lg">
            <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
              <div class="flex items-center">
                <img
                  src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBmaWxsPSIjZTIxODMzIj48cGF0aCBkPSJNNTAgOTBjMjIuMSAwIDQwLTE3LjkgNDAtNDBTNzIuMSAxMCA1MCAxMCAxMCAyNy45IDEwIDUwczE3LjkgNDAgNDAgNDB6bTAtNzBjMTYuNSAwIDMwIDEzLjUgMzAgMzBTNjYuNSA4MCA1MCA4MCAyMCA2Ni41IDIwIDUwczEzLjUtMzAgMzAtMzB6Ii8+PHBhdGggZD0iTTM1IDY1aDMwVjM1SDM1djMwem0xMC0yMGgxMHYxMEg0NVY0NXoiLz48L3N2Zz4="
                  alt="Logo"
                  class="h-8 w-8 mr-3"
                />
                <div>
                  <h1 class="text-lg font-bold text-smith-red">
                    MBA Game Admin
                  </h1>
                </div>
              </div>
              <button id="close-mobile-menu" class="text-gray-500">
                <i class="fas fa-times"></i>
              </button>
            </div>
            <nav class="mt-4">
              <ul class="space-y-1">
                <li>
                  <button
                    data-section="dashboard"
                    class="mobile-nav-link w-full flex items-center px-4 py-3 text-gray-900 dark:text-gray-100 bg-gray-100 dark:bg-gray-700"
                  >
                    <i class="fas fa-tachometer-alt w-5 mr-3"></i>
                    <span>Dashboard</span>
                  </button>
                </li>
                <li>
                  <button
                    data-section="pending"
                    class="mobile-nav-link w-full flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                  >
                    <i class="fas fa-clipboard-check w-5 mr-3"></i>
                    <span>Activity Review</span>
                    <span
                      id="mobile-pending-count"
                      class="ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full"
                      >0</span
                    >
                  </button>
                </li>
                <li>
                  <button
                    data-section="users"
                    class="mobile-nav-link w-full flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                  >
                    <i class="fas fa-users w-5 mr-3"></i>
                    <span>Users</span>
                  </button>
                </li>
                <li>
                  <button
                    data-section="teams"
                    class="mobile-nav-link w-full flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                  >
                    <i class="fas fa-user-friends w-5 mr-3"></i>
                    <span>Teams</span>
                  </button>
                </li>
                <li>
                  <button
                    data-section="activities"
                    class="mobile-nav-link w-full flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                  >
                    <i class="fas fa-tasks w-5 mr-3"></i>
                    <span>Activity Definitions</span>
                  </button>
                </li>
                <li>
                  <button
                    data-section="leaderboard"
                    class="mobile-nav-link w-full flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                  >
                    <i class="fas fa-trophy w-5 mr-3"></i>
                    <span>Leaderboard Management</span>
                  </button>
                </li>
                <li>
                  <button
                    data-section="logs"
                    class="mobile-nav-link w-full flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                  >
                    <i class="fas fa-history w-5 mr-3"></i>
                    <span>Logs & Notifications</span>
                  </button>
                </li>
                <li>
                  <button
                    data-section="reports"
                    class="mobile-nav-link w-full flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                  >
                    <i class="fas fa-chart-bar w-5 mr-3"></i>
                    <span>Reports</span>
                  </button>
                </li>
                <li>
                  <button
                    data-section="settings"
                    class="mobile-nav-link w-full flex items-center px-4 py-3 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                  >
                    <i class="fas fa-cog w-5 mr-3"></i>
                    <span>Settings</span>
                  </button>
                </li>
              </ul>
            </nav>
            <div class="absolute bottom-0 w-64 p-4 border-t dark:border-gray-700">
              <button
                id="mobile-logout-btn"
                class="w-full flex items-center px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md"
              >
                <i class="fas fa-sign-out-alt mr-3"></i>
                <span>Logout</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Main content -->
        <div class="flex-1 flex flex-col overflow-hidden">
          <!-- Top header -->
          <header class="bg-white dark:bg-gray-800 shadow-sm">
            <div class="flex items-center justify-between px-4 py-3">
              <div class="flex items-center md:hidden">
                <button
                  id="open-mobile-menu"
                  class="text-gray-500 focus:outline-none"
                >
                  <i class="fas fa-bars"></i>
                </button>
              </div>
              <div class="flex items-center space-x-4 ml-auto">
                <div class="relative">
                  <span id="current-time" class="text-sm"
                    >June 15, 2024 12:00 PM</span
                  >
                </div>
                <div class="relative">
                  <button
                    id="notification-btn"
                    class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 focus:outline-none"
                  >
                    <i class="fas fa-bell"></i>
                    <span
                      id="notification-badge"
                      class="absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full"
                      >3</span
                    >
                  </button>
                  <div
                    id="notification-dropdown"
                    class="hidden absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-10"
                  >
                    <div class="px-4 py-2 border-b dark:border-gray-700">
                      <h3 class="text-sm font-medium">Notifications</h3>
                    </div>
                    <div
                      id="notification-list"
                      class="max-h-60 overflow-y-auto"
                    >
                      <div
                        class="px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 border-b dark:border-gray-700"
                      >
                        <p class="text-sm font-medium">
                          New activity submissions
                        </p>
                        <p class="text-xs text-gray-500">10 minutes ago</p>
                      </div>
                      <div
                        class="px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 border-b dark:border-gray-700"
                      >
                        <p class="text-sm font-medium">Weekly report ready</p>
                        <p class="text-xs text-gray-500">1 hour ago</p>
                      </div>
                      <div
                        class="px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700"
                      >
                        <p class="text-sm font-medium">
                          Team Terrapins took the lead
                        </p>
                        <p class="text-xs text-gray-500">Yesterday</p>
                      </div>
                    </div>
                    <div
                      class="px-4 py-2 text-center text-xs text-primary border-t dark:border-gray-700"
                    >
                      <button>Mark all as read</button>
                    </div>
                  </div>
                </div>
                <button
                  id="theme-toggle"
                  class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 focus:outline-none"
                >
                  <i class="fas fa-moon dark:hidden"></i>
                  <i class="fas fa-sun hidden dark:block"></i>
                </button>
              </div>
            </div>
          </header>

          <!-- Main content area -->
          <main class="flex-1 overflow-auto bg-gray-50 dark:bg-gray-900 p-4">
            <!-- Dashboard Section -->
            <section id="dashboard-section" class="space-y-6">
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div
                  class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 border-l-4 border-green-500"
                >
                  <div class="flex items-center justify-between">
                    <div>
                      <p class="text-sm text-gray-500 dark:text-gray-400">
                        Total Points Awarded
                      </p>
                      <p
                        id="total-points"
                        class="text-2xl font-bold text-gray-900 dark:text-white"
                      >
                        0
                      </p>
                    </div>
                    <div
                      class="h-10 w-10 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center text-green-500"
                    >
                      <i class="fas fa-medal"></i>
                    </div>
                  </div>
                  <div class="mt-2">
                    <p class="text-xs text-gray-500 dark:text-gray-400">
                      <span class="text-green-500"><i class="fas fa-arrow-up"></i> 12%</span>
                      since last week
                    </p>
                  </div>
                </div>

                <div
                  class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 border-l-4 border-blue-500"
                >
                  <div class="flex items-center justify-between">
                    <div>
                      <p class="text-sm text-gray-500 dark:text-gray-400">
                        Total Participants
                      </p>
                      <p
                        id="total-users"
                        class="text-2xl font-bold text-gray-900 dark:text-white"
                      >
                        0
                      </p>
                    </div>
                    <div
                      class="h-10 w-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center text-blue-500"
                    >
                      <i class="fas fa-users"></i>
                    </div>
                  </div>
                  <div class="mt-2">
                    <p class="text-xs text-gray-500 dark:text-gray-400">
                      <span class="text-green-500"><i class="fas fa-arrow-up"></i> 5%</span>
                      since last week
                    </p>
                  </div>
                </div>

                <div
                  class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 border-l-4 border-purple-500"
                >
                  <div class="flex items-center justify-between">
                    <div>
                      <p class="text-sm text-gray-500 dark:text-gray-400">
                        Activities Pending
                      </p>
                      <p
                        id="dashboard-pending-activities"
                        class="text-2xl font-bold text-gray-900 dark:text-white"
                      >
                        0
                      </p>
                    </div>
                    <div
                      class="h-10 w-10 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center text-purple-500"
                    >
                      <i class="fas fa-clipboard-list"></i>
                    </div>
                  </div>
                  <div class="mt-2">
                    <p class="text-xs text-gray-500 dark:text-gray-400">
                      Require your review
                    </p>
                  </div>
                </div>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                  <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-medium">Team Standings</h2>
                    <div class="tooltip">
                      <button
                        id="download-team-csv"
                        class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"
                      >
                        <i class="fas fa-download"></i>
                      </button>
                      <span class="tooltiptext">Download CSV</span>
                    </div>
                  </div>
                  <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                      <thead>
                        <tr>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Rank
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Team
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Members
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Points
                          </th>
                        </tr>
                      </thead>
                      <tbody
                        id="team-standings"
                        class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                      >
                        <!-- Will be populated with JavaScript -->
                      </tbody>
                    </table>
                  </div>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                  <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-medium">Point Distribution</h2>
                    <div class="tooltip">
                      <button class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300">
                        <i class="fas fa-sync-alt"></i>
                      </button>
                      <span class="tooltiptext">Refresh</span>
                    </div>
                  </div>
                  <div class="h-60">
                    <canvas id="points-chart"></canvas>
                  </div>
                </div>
              </div>

              <div class="grid grid-cols-1 gap-6">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                  <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-medium">Recent Activities</h2>
                    <button
                      id="view-all-activities"
                      class="text-primary hover:text-indigo-700 text-sm"
                    >
                      View All
                    </button>
                  </div>
                  <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                      <thead>
                        <tr>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Date
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            User
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Team
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Activity
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Points
                          </th>
                          <th
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Status
                          </th>
                        </tr>
                      </thead>
                      <tbody
                        id="recent-activities"
                        class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                      >
                        <!-- Will be populated with JavaScript -->
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </section>

            <!-- Pending Review Section -->
            <section id="pending-section" class="hidden space-y-6">
              <div class="flex justify-between items-center mb-4">
                <h1 class="text-2xl font-bold">Activity Review</h1>
                <div class="flex space-x-2">
                  <select
                    id="status-filter"
                    class="text-sm border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600"
                  >
                    <option value="all">All Statuses</option>
                    <option value="pending" selected>Pending</option>
                    <option value="approved">Approved</option>
                    <option value="rejected">Rejected</option>
                  </select>
                  <select
                    id="activity-filter"
                    class="text-sm border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600"
                  >
                    <option value="all">All Activities</option>
                    <option value="social_post">Social Media Post</option>
                    <option value="linkedin_connection">LinkedIn Connection</option>
                    <option value="instagram_follow">Instagram Follow</option>
                    <option value="share_resource">Shared Resource</option>
                    <option value="birthday_wish">Birthday Wish</option>
                    <option value="class_registration">Class Registration</option>
                    <option value="personal_bio">Personalized Bio</option>
                    <option value="student_chat">MPO Student Chat</option>
                    <option value="orientation_survey">MPO Pre-orientation Survey</option>
                    <option value="photo_release">MPO Photo Release</option>
                    <option value="smith_representation">Smith Representation Photo</option>
                    <option value="admitted_event">Admitted Student Event</option>
                    <option value="team_meetup">Team Meet-n-Greet</option>
                    <option value="meetup_attendance">Meet-n-Greet Attendance</option>
                  </select>
                </div>
              </div>

              <div
                id="activity-review-container"
                class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
              >
                <!-- Will be populated with JavaScript -->
              </div>

              <div
                id="no-activities-message"
                class="hidden bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm text-center"
              >
                <i class="fas fa-clipboard-check text-4xl text-gray-400 mb-4"></i>
                <p class="text-gray-500 dark:text-gray-400">
                  No activities to review at this time.
                </p>
              </div>

              <div class="flex justify-center mt-6">
                <button
                  id="load-more-activities"
                  class="px-4 py-2 bg-primary text-white rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
                >
                  Load More
                </button>
              </div>
            </section>

            <!-- Users Section -->
            <section id="users-section" class="hidden space-y-6">
              <div class="flex justify-between items-center mb-4">
                <h1 class="text-2xl font-bold">Manage Users</h1>
                <div class="flex space-x-2">
                  <div class="relative">
                    <input
                      type="text"
                      id="user-search"
                      placeholder="Search users..."
                      class="px-4 py-2 border rounded-md text-sm focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600 pr-10"
                    />
                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                      <i class="fas fa-search text-gray-400"></i>
                    </div>
                  </div>
                  <select
                    id="team-filter"
                    class="text-sm border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600"
                  >
                    <option value="all">All Teams</option>
                    <option value="1">Team Terrapins</option>
                    <option value="2">Team Ravens</option>
                    <option value="3">Team Diplomats</option>
                    <option value="4">Team Chesapeake</option>
                    <option value="5">Team Orioles</option>
                  </select>
                </div>
              </div>

              <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden">
                <div class="overflow-x-auto">
                  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                    <thead class="bg-gray-50 dark:bg-gray-700">
                      <tr>
                        <th
                          scope="col"
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer"
                          data-sort="name"
                        >
                          Name
                          <i class="fas fa-sort ml-1"></i>
                        </th>
                        <th
                          scope="col"
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer"
                          data-sort="email"
                        >
                          Email
                          <i class="fas fa-sort ml-1"></i>
                        </th>
                        <th
                          scope="col"
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer"
                          data-sort="team"
                        >
                          Team
                          <i class="fas fa-sort ml-1"></i>
                        </th>
                        <th
                          scope="col"
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer"
                          data-sort="points"
                        >
                          Points
                          <i class="fas fa-sort ml-1"></i>
                        </th>
                        <th
                          scope="col"
                          class="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Actions
                        </th>
                      </tr>
                    </thead>
                    <tbody
                      id="users-table-body"
                      class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                    >
                      <!-- Will be populated with JavaScript -->
                    </tbody>
                  </table>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-600 sm:px-6">
                  <div class="flex-1 flex justify-between sm:hidden">
                    <button class="relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700">
                      Previous
                    </button>
                    <button class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700">
                      Next
                    </button>
                  </div>
                  <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                    <div>
                      <p class="text-sm text-gray-700 dark:text-gray-300">
                        Showing
                        <span class="font-medium" id="users-showing-start">1</span>
                        to
                        <span class="font-medium" id="users-showing-end">8</span>
                        of
                        <span class="font-medium" id="users-total-count">8</span>
                        results
                      </p>
                    </div>
                    <div>
                      <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                        <button class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700">
                          <span class="sr-only">Previous</span>
                          <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700">
                          1
                        </button>
                        <button class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700">
                          <span class="sr-only">Next</span>
                          <i class="fas fa-chevron-right"></i>
                        </button>
                      </nav>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <!-- Teams Section -->
            <section id="teams-section" class="hidden space-y-6">
              <div class="flex justify-between items-center mb-4">
                <h1 class="text-2xl font-bold">Team Management</h1>
                <button
                  class="px-4 py-2 bg-primary text-white rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
                >
                  Export Team Data
                </button>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Will be populated with JavaScript -->
                <div id="teams-cards-container"></div>
              </div>

              <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6">
                <h2 class="text-lg font-medium mb-4">Team Performance</h2>
                <div class="h-80">
                  <canvas id="team-performance-chart"></canvas>
                </div>
              </div>
            </section>

            <!-- Activities Management Section -->
            <section id="activities-section" class="hidden space-y-6">
              <div class="flex justify-between items-center mb-4">
                <h1 class="text-2xl font-bold">Activity Definitions</h1>
                <button
                  id="add-activity-btn"
                  class="px-4 py-2 bg-primary text-white rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
                >
                  <i class="fas fa-plus mr-2"></i> Add New Activity
                </button>
              </div>

              <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="overflow-x-auto">
                  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                    <thead class="bg-gray-50 dark:bg-gray-700">
                      <tr>
                        <th
                          scope="col"
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Activity Name
                        </th>
                        <th
                          scope="col"
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Description
                        </th>
                        <th
                          scope="col"
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Points
                        </th>
                        <th
                          scope="col"
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Max Submissions
                        </th>
                        <th
                          scope="col"
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Evidence Required
                        </th>
                        <th
                          scope="col"
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Status
                        </th>
                        <th
                          scope="col"
                          class="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Actions
                        </th>
                      </tr>
                    </thead>
                    <tbody
                      id="activities-table-body"
                      class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                    >
                      <!-- Will be populated with JavaScript -->
                    </tbody>
                  </table>
                </div>
              </div>
            </section>

            <!-- Leaderboard Management Section -->
            <section id="leaderboard-section" class="hidden space-y-6">
              <div class="flex justify-between items-center mb-4">
                <h1 class="text-2xl font-bold">Leaderboard Management</h1>
                <div class="flex space-x-2">
                  <button
                    id="export-csv-btn"
                    class="px-4 py-2 bg-green-600 text-white rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"
                  >
                    <i class="fas fa-file-csv mr-2"></i> Export CSV
                  </button>
                  <button
                    id="export-pdf-btn"
                    class="px-4 py-2 bg-red-600 text-white rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
                  >
                    <i class="fas fa-file-pdf mr-2"></i> Export PDF
                  </button>
                </div>
              </div>

              <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="border-b dark:border-gray-700">
                  <nav class="flex -mb-px">
                    <button
                      id="tab-team-leaderboard"
                      class="leaderboard-tab-btn text-primary border-primary px-4 py-3 text-sm font-medium border-b-2 focus:outline-none"
                    >
                      Team Leaderboard
                    </button>
                    <button
                      id="tab-individual-leaderboard"
                      class="leaderboard-tab-btn text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300 px-4 py-3 text-sm font-medium border-b-2 border-transparent focus:outline-none"
                    >
                      Individual Leaderboard
                    </button>
                  </nav>
                </div>

                <!-- Team Leaderboard Tab -->
                <div id="content-team-leaderboard" class="leaderboard-tab-content p-4">
                  <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-medium">Team Rankings</h2>
                    <button
                      id="reset-team-changes"
                      class="px-3 py-1 text-sm bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-600"
                    >
                      Reset Changes
                    </button>
                  </div>
                  <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                      <thead class="bg-gray-50 dark:bg-gray-700">
                        <tr>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Rank
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Team
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Members
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Points
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Adjust Points
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Actions
                          </th>
                        </tr>
                      </thead>
                      <tbody
                        id="team-leaderboard-table"
                        class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                      >
                        <!-- Will be populated with JavaScript -->
                      </tbody>
                    </table>
                  </div>
                </div>

                <!-- Individual Leaderboard Tab -->
                <div id="content-individual-leaderboard" class="leaderboard-tab-content p-4 hidden">
                  <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-medium">Top Performers</h2>
                    <div class="flex space-x-2">
                      <input
                        type="text"
                        id="individual-search"
                        placeholder="Search by name..."
                        class="text-sm border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600"
                      />
                      <select
                        id="individual-team-filter"
                        class="text-sm border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600"
                      >
                        <option value="all">All Teams</option>
                        <option value="1">Team Terrapins</option>
                        <option value="2">Team Ravens</option>
                        <option value="3">Team Diplomats</option>
                        <option value="4">Team Chesapeake</option>
                        <option value="5">Team Orioles</option>
                      </select>
                    </div>
                  </div>
                  <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                      <thead class="bg-gray-50 dark:bg-gray-700">
                        <tr>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Rank
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Name
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Team
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Points
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Activity Breakdown
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Actions
                          </th>
                        </tr>
                      </thead>
                      <tbody
                        id="individual-leaderboard-table"
                        class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                      >
                        <!-- Will be populated with JavaScript -->
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </section>

            <!-- Logs & Notifications Section -->
            <section id="logs-section" class="hidden space-y-6">
              <div class="flex justify-between items-center mb-4">
                <h1 class="text-2xl font-bold">Logs & Notifications</h1>
                <button
                  id="send-announcement-btn"
                  class="px-4 py-2 bg-primary text-white rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
                >
                  <i class="fas fa-bullhorn mr-2"></i> Send Announcement
                </button>
              </div>

              <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="border-b dark:border-gray-700">
                  <nav class="flex -mb-px">
                    <button
                      id="tab-admin-logs"
                      class="logs-tab-btn text-primary border-primary px-4 py-3 text-sm font-medium border-b-2 focus:outline-none"
                    >
                      Admin Activity
                    </button>
                    <button
                      id="tab-moderation-logs"
                      class="logs-tab-btn text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300 px-4 py-3 text-sm font-medium border-b-2 border-transparent focus:outline-none"
                    >
                      Moderation History
                    </button>
                    <button
                      id="tab-announcements"
                      class="logs-tab-btn text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300 px-4 py-3 text-sm font-medium border-b-2 border-transparent focus:outline-none"
                    >
                      Sent Announcements
                    </button>
                  </nav>
                </div>

                <!-- Admin Activity Logs Tab -->
                <div id="content-admin-logs" class="logs-tab-content p-4">
                  <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-medium">Admin Activity Logs</h2>
                    <div class="flex space-x-2">
                      <select
                        id="admin-filter"
                        class="text-sm border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600"
                      >
                        <option value="all">All Admins</option>
                        <option value="1">Admin User</option>
                        <option value="2">Sarah Johnson</option>
                      </select>
                      <select
                        id="action-filter"
                        class="text-sm border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600"
                      >
                        <option value="all">All Actions</option>
                        <option value="login">Login</option>
                        <option value="approve">Approve Activity</option>
                        <option value="reject">Reject Activity</option>
                        <option value="edit">Edit User/Activity</option>
                        <option value="announcement">Send Announcement</option>
                      </select>
                    </div>
                  </div>
                  <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                      <thead class="bg-gray-50 dark:bg-gray-700">
                        <tr>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer"
                            data-sort="timestamp"
                          >
                            Timestamp
                            <i class="fas fa-sort ml-1"></i>
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Admin
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Action
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Details
                          </th>
                        </tr>
                      </thead>
                      <tbody
                        id="admin-logs-table-body"
                        class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                      >
                        <!-- Will be populated with JavaScript -->
                      </tbody>
                    </table>
                  </div>
                </div>

                <!-- Moderation History Tab -->
                <div id="content-moderation-logs" class="logs-tab-content p-4 hidden">
                  <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-medium">Moderation History</h2>
                    <div class="flex space-x-2">
                      <select
                        id="moderation-status-filter"
                        class="text-sm border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600"
                      >
                        <option value="all">All Statuses</option>
                        <option value="approved">Approved</option>
                        <option value="rejected">Rejected</option>
                        <option value="pending">Pending</option>
                      </select>
                      <input
                        type="text"
                        id="moderation-search"
                        placeholder="Search..."
                        class="text-sm border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600"
                      />
                    </div>
                  </div>
                  <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                      <thead class="bg-gray-50 dark:bg-gray-700">
                        <tr>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer"
                            data-sort="timestamp"
                          >
                            Date/Time
                            <i class="fas fa-sort ml-1"></i>
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            User
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Activity Type
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Decision
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Admin
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Notes
                          </th>
                        </tr>
                      </thead>
                      <tbody
                        id="moderation-logs-table-body"
                        class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                      >
                        <!-- Will be populated with JavaScript -->
                      </tbody>
                    </table>
                  </div>
                </div>

                <!-- Sent Announcements Tab -->
                <div id="content-announcements" class="logs-tab-content p-4 hidden">
                  <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                      <thead class="bg-gray-50 dark:bg-gray-700">
                        <tr>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Date/Time
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Sent By
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Audience
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Subject
                          </th>
                          <th
                            scope="col"
                            class="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                          >
                            Actions
                          </th>
                        </tr>
                      </thead>
                      <tbody
                        id="announcements-table-body"
                        class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                      >
                        <!-- Will be populated with JavaScript -->
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </section>

            <!-- Reports Section -->
            <section id="reports-section" class="hidden space-y-6">
              <div class="flex justify-between items-center mb-4">
                <h1 class="text-2xl font-bold">Reports & Analytics</h1>
                <div class="flex space-x-2">
                  <select
                    id="report-type"
                    class="text-sm border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600"
                  >
                    <option value="overall">Overall Summary</option>
                    <option value="team">Team Performance</option>
                    <option value="user">User Engagement</option>
                    <option value="activity">Activity Distribution</option>
                  </select>
                  <button
                    id="export-report"
                    class="px-4 py-2 bg-primary text-white rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
                  >
                    Export Report
                  </button>
                </div>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6">
                  <h2 class="text-lg font-medium mb-4">
                    Weekly Participation Trend
                  </h2>
                  <div class="h-60">
                    <canvas id="weekly-participation-chart"></canvas>
                  </div>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6">
                  <h2 class="text-lg font-medium mb-4">
                    Activity Completion Rate
                  </h2>
                  <div class="h-60">
                    <canvas id="activity-completion-chart"></canvas>
                  </div>
                </div>
              </div>

              <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6">
                <h2 class="text-lg font-medium mb-4">Key Metrics</h2>
                <div class="overflow-x-auto">
                  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                    <thead class="bg-gray-50 dark:bg-gray-700">
                      <tr>
                        <th
                          scope="col"
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Metric
                        </th>
                        <th
                          scope="col"
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Value
                        </th>
                        <th
                          scope="col"
                          class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                        >
                          Change
                        </th>
                      </tr>
                    </thead>
                    <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                      <tr>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <div class="flex items-center">
                            <div class="text-sm font-medium text-gray-900 dark:text-white">
                              Average Points per User
                            </div>
                          </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <div class="text-sm text-gray-900 dark:text-white">
                            15.25
                          </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <span
                            class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"
                          >
                            +2.1
                          </span>
                        </td>
                      </tr>
                      <tr>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <div class="flex items-center">
                            <div class="text-sm font-medium text-gray-900 dark:text-white">
                              Most Popular Activity
                            </div>
                          </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <div class="text-sm text-gray-900 dark:text-white">
                            Social Media Post
                          </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <span
                            class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"
                          >
                            32% of total
                          </span>
                        </td>
                      </tr>
                      <tr>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <div class="flex items-center">
                            <div class="text-sm font-medium text-gray-900 dark:text-white">
                              Weekly Submission Rate
                            </div>
                          </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <div class="text-sm text-gray-900 dark:text-white">
                            3.8 per user
                          </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <span
                            class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"
                          >
                            -0.2
                          </span>
                        </td>
                      </tr>
                      <tr>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <div class="flex items-center">
                            <div class="text-sm font-medium text-gray-900 dark:text-white">
                              Approval Rate
                            </div>
                          </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <div class="text-sm text-gray-900 dark:text-white">
                            92%
                          </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                          <span
                            class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"
                          >
                            +3%
                          </span>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </section>

            <!-- Settings Section -->
            <section id="settings-section" class="hidden space-y-6">
              <div class="flex justify-between items-center mb-4">
                <h1 class="text-2xl font-bold">Settings</h1>
                <button
                  id="save-settings"
                  class="px-4 py-2 bg-primary text-white rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
                >
                  Save Changes
                </button>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="col-span-1">
                  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6">
                    <h2 class="text-lg font-medium mb-4">Email Notifications</h2>
                    <div class="space-y-4">
                      <div class="flex items-center">
                        <input
                          id="notify-new-activities"
                          type="checkbox"
                          class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                          checked
                        />
                        <label
                          for="notify-new-activities"
                          class="ml-2 block text-sm"
                        >
                          New activity submissions
                        </label>
                      </div>
                      <div class="flex items-center">
                        <input
                          id="notify-weekly-summary"
                          type="checkbox"
                          class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                          checked
                        />
                        <label
                          for="notify-weekly-summary"
                          class="ml-2 block text-sm"
                        >
                          Weekly summary report
                        </label>
                      </div>
                      <div class="flex items-center">
                        <input
                          id="notify-team-changes"
                          type="checkbox"
                          class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                          checked
                        />
                        <label
                          for="notify-team-changes"
                          class="ml-2 block text-sm"
                        >
                          Team ranking changes
                        </label>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-span-2">
                  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6">
                    <h2 class="text-lg font-medium mb-4">Admin Access</h2>
                    <div class="overflow-x-auto">
                      <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                        <thead class="bg-gray-50 dark:bg-gray-700">
                          <tr>
                            <th
                              scope="col"
                              class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                            >
                              Name
                            </th>
                            <th
                              scope="col"
                              class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                            >
                              Email
                            </th>
                            <th
                              scope="col"
                              class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                            >
                              Role
                            </th>
                            <th
                              scope="col"
                              class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                            >
                              Actions
                            </th>
                          </tr>
                        </thead>
                        <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                          <tr>
                            <td class="px-6 py-4 whitespace-nowrap">
                              <div class="flex items-center">
                                <div class="text-sm font-medium text-gray-900 dark:text-white">
                                  Admin User
                                </div>
                              </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                              <div class="text-sm text-gray-900 dark:text-white">
                                admin@umd.edu
                              </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                              <span
                                class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"
                              >
                                Super Admin
                              </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                              <button class="text-primary hover:text-indigo-700">
                                Edit
                              </button>
                            </td>
                          </tr>
                          <tr>
                            <td class="px-6 py-4 whitespace-nowrap">
                              <div class="flex items-center">
                                <div class="text-sm font-medium text-gray-900 dark:text-white">
                                  Sarah Johnson
                                </div>
                              </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                              <div class="text-sm text-gray-900 dark:text-white">
                                sjohnson@umd.edu
                              </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                              <span
                                class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"
                              >
                                Team Coordinator
                              </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                              <button class="text-primary hover:text-indigo-700">
                                Edit
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="mt-4">
                      <button
                        class="px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
                      >
                        <i class="fas fa-plus mr-2"></i> Add Admin
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6">
                <h2 class="text-lg font-medium mb-4">Game Settings</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label
                      for="game-start-date"
                      class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                      >Game Start Date</label
                    >
                    <input
                      type="date"
                      id="game-start-date"
                      value="2024-06-01"
                      class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                    />
                  </div>
                  <div>
                    <label
                      for="game-end-date"
                      class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                      >Game End Date</label
                    >
                    <input
                      type="date"
                      id="game-end-date"
                      value="2024-08-26"
                      class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                    />
                  </div>
                  <div>
                    <label
                      for="weekly-update-day"
                      class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                      >Weekly Update Day</label
                    >
                    <select
                      id="weekly-update-day"
                      class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                    >
                      <option value="1">Monday</option>
                      <option value="2">Tuesday</option>
                      <option value="3">Wednesday</option>
                      <option value="4" selected>Thursday</option>
                      <option value="5">Friday</option>
                      <option value="6">Saturday</option>
                      <option value="0">Sunday</option>
                    </select>
                  </div>
                  <div>
                    <label
                      for="weekly-update-time"
                      class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                      >Weekly Update Time</label
                    >
                    <input
                      type="time"
                      id="weekly-update-time"
                      value="12:00"
                      class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                    />
                  </div>
                </div>
              </div>
            </section>
          </main>
        </div>
      </div>

      <!-- Activity preview modal -->
      <div
        id="activity-preview-modal"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 flex items-center justify-center hidden"
      >
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-lg w-full max-h-[90vh] overflow-auto"
        >
          <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
            <h3 class="text-lg font-medium">Activity Details</h3>
            <button
              id="close-activity-modal"
              class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 focus:outline-none"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="p-6">
            <div id="activity-preview-content" class="space-y-4">
              <!-- Will be populated with JavaScript -->
            </div>
            <div
              id="activity-preview-actions"
              class="mt-6 flex justify-end space-x-3"
            >
              <button
                id="reject-activity"
                class="px-4 py-2 bg-red-500 text-white rounded-md shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
              >
                Reject
              </button>
              <button
                id="approve-activity"
                class="px-4 py-2 bg-green-500 text-white rounded-md shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"
              >
                Approve
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Rejection reason modal -->
      <div
        id="rejection-modal"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 flex items-center justify-center hidden"
      >
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full"
        >
          <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
            <h3 class="text-lg font-medium">Provide Rejection Reason</h3>
            <button
              id="close-rejection-modal"
              class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 focus:outline-none"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="p-6">
            <div class="mb-4">
              <label
                for="rejection-reason"
                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                >Reason for Rejection</label
              >
              <textarea
                id="rejection-reason"
                rows="3"
                class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                placeholder="Provide a reason for rejecting this activity..."
              ></textarea>
            </div>
            <div class="flex justify-end">
              <button
                id="confirm-rejection"
                class="px-4 py-2 bg-red-500 text-white rounded-md shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
              >
                Confirm Rejection
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- User edit modal -->
      <div
        id="user-edit-modal"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 flex items-center justify-center hidden"
      >
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full"
        >
          <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
            <h3 class="text-lg font-medium">Edit User</h3>
            <button
              id="close-user-modal"
              class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 focus:outline-none"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="p-6">
            <div id="user-edit-form" class="space-y-4">
              <div>
                <label
                  for="edit-first-name"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >First Name</label
                >
                <input
                  type="text"
                  id="edit-first-name"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                />
              </div>
              <div>
                <label
                  for="edit-last-name"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Last Name</label
                >
                <input
                  type="text"
                  id="edit-last-name"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                />
              </div>
              <div>
                <label
                  for="edit-email"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Email</label
                >
                <input
                  type="email"
                  id="edit-email"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                />
              </div>
              <div>
                <label
                  for="edit-team"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Team</label
                >
                <select
                  id="edit-team"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                >
                  <option value="1">Team Terrapins</option>
                  <option value="2">Team Ravens</option>
                  <option value="3">Team Diplomats</option>
                  <option value="4">Team Chesapeake</option>
                  <option value="5">Team Orioles</option>
                </select>
              </div>
              <div>
                <label
                  for="edit-points"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Points</label
                >
                <input
                  type="number"
                  id="edit-points"
                  min="0"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                />
              </div>
            </div>
            <div class="mt-6 flex justify-end space-x-3">
              <button
                id="save-user-changes"
                class="px-4 py-2 bg-primary text-white rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
              >
                Save Changes
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Activity edit modal -->
      <div
        id="activity-edit-modal"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 flex items-center justify-center hidden"
      >
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full"
        >
          <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
            <h3 class="text-lg font-medium">Edit Activity Definition</h3>
            <button
              id="close-activity-edit-modal"
              class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 focus:outline-none"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="p-6">
            <form id="activity-edit-form" class="space-y-4">
              <div>
                <label
                  for="edit-activity-name"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Activity Name</label
                >
                <input
                  type="text"
                  id="edit-activity-name"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                />
              </div>
              <div>
                <label
                  for="edit-activity-description"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Description</label
                >
                <textarea
                  id="edit-activity-description"
                  rows="3"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                ></textarea>
              </div>
              <div>
                <label
                  for="edit-activity-points"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Points</label
                >
                <input
                  type="number"
                  id="edit-activity-points"
                  min="1"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                />
              </div>
              <div>
                <label
                  for="edit-activity-limit"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Max Submissions per User</label
                >
                <input
                  type="number"
                  id="edit-activity-limit"
                  min="1"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                />
                <div class="mt-1">
                  <input
                    type="checkbox"
                    id="edit-activity-no-limit"
                    class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                  />
                  <label for="edit-activity-no-limit" class="ml-2 text-sm"
                    >No submission limit</label
                  >
                </div>
              </div>
              <div>
                <label class="flex items-center">
                  <input
                    type="checkbox"
                    id="edit-activity-evidence"
                    class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                  />
                  <span class="ml-2 text-sm">Requires Evidence</span>
                </label>
              </div>
            </form>
            <div class="mt-6 flex justify-end space-x-3">
              <button
                id="cancel-activity-edit"
                class="px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
              >
                Cancel
              </button>
              <button
                id="save-activity-changes"
                class="px-4 py-2 bg-primary text-white rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
              >
                Save Changes
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- New activity modal -->
      <div
        id="new-activity-modal"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 flex items-center justify-center hidden"
      >
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full"
        >
          <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
            <h3 class="text-lg font-medium">Add New Activity</h3>
            <button
              id="close-new-activity-modal"
              class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 focus:outline-none"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="p-6">
            <form id="new-activity-form" class="space-y-4">
              <div>
                <label
                  for="new-activity-id"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Activity ID</label
                >
                <input
                  type="text"
                  id="new-activity-id"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                  placeholder="e.g. volunteer_work"
                />
                <p class="mt-1 text-sm text-gray-500">
                  Use lowercase with underscores, no spaces
                </p>
              </div>
              <div>
                <label
                  for="new-activity-name"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Activity Name</label
                >
                <input
                  type="text"
                  id="new-activity-name"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                />
              </div>
              <div>
                <label
                  for="new-activity-description"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Description</label
                >
                <textarea
                  id="new-activity-description"
                  rows="3"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                ></textarea>
              </div>
              <div>
                <label
                  for="new-activity-points"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Points</label
                >
                <input
                  type="number"
                  id="new-activity-points"
                  min="1"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                />
              </div>
              <div>
                <label
                  for="new-activity-limit"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Max Submissions per User</label
                >
                <input
                  type="number"
                  id="new-activity-limit"
                  min="1"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                />
                <div class="mt-1">
                  <input
                    type="checkbox"
                    id="new-activity-no-limit"
                    class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                  />
                  <label for="new-activity-no-limit" class="ml-2 text-sm"
                    >No submission limit</label
                  >
                </div>
              </div>
              <div>
                <label class="flex items-center">
                  <input
                    type="checkbox"
                    id="new-activity-evidence"
                    class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                  />
                  <span class="ml-2 text-sm">Requires Evidence</span>
                </label>
              </div>
            </form>
            <div class="mt-6 flex justify-end space-x-3">
              <button
                id="cancel-new-activity"
                class="px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
              >
                Cancel
              </button>
              <button
                id="add-new-activity"
                class="px-4 py-2 bg-primary text-white rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
              >
                Add Activity
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Team Points Adjustment Modal -->
      <div
        id="team-points-modal"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 flex items-center justify-center hidden"
      >
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full"
        >
          <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
            <h3 class="text-lg font-medium">Adjust Team Points</h3>
            <button
              id="close-team-points-modal"
              class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 focus:outline-none"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="p-6">
            <div id="team-points-info" class="mb-4">
              <p class="font-medium text-lg" id="adjust-team-name">Team Name</p>
              <p class="text-sm text-gray-600 dark:text-gray-400">
                Current points: <span id="adjust-current-points">0</span>
              </p>
            </div>
            <form id="team-points-form" class="space-y-4">
              <div>
                <label
                  for="points-adjustment"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Points Adjustment</label
                >
                <div class="flex items-center">
                  <select
                    id="adjustment-type"
                    class="rounded-l-md border-r-0 text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                  >
                    <option value="add">Add</option>
                    <option value="subtract">Subtract</option>
                    <option value="set">Set to</option>
                  </select>
                  <input
                    type="number"
                    id="points-adjustment"
                    min="0"
                    class="w-full rounded-r-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                    placeholder="Number of points"
                  />
                </div>
              </div>
              <div>
                <label
                  for="adjustment-reason"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Reason for Adjustment</label
                >
                <textarea
                  id="adjustment-reason"
                  rows="3"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                  placeholder="Provide a reason for this adjustment..."
                ></textarea>
              </div>
            </form>
            <div class="mt-6 flex justify-end space-x-3">
              <button
                id="cancel-team-adjustment"
                class="px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
              >
                Cancel
              </button>
              <button
                id="save-team-adjustment"
                class="px-4 py-2 bg-primary text-white rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
              >
                Save Adjustment
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Activity Breakdown Modal -->
      <div
        id="activity-breakdown-modal"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 flex items-center justify-center hidden"
      >
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-2xl w-full"
        >
          <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
            <h3 class="text-lg font-medium">
              Activity Breakdown for
              <span id="breakdown-user-name">User Name</span>
            </h3>
            <button
              id="close-activity-breakdown"
              class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 focus:outline-none"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="p-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <h4
                  class="text-sm font-medium text-gray-500 dark:text-gray-400 uppercase mb-2"
                >
                  Points Breakdown
                </h4>
                <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                  <canvas id="user-points-chart" height="200"></canvas>
                </div>
              </div>
              <div>
                <h4
                  class="text-sm font-medium text-gray-500 dark:text-gray-400 uppercase mb-2"
                >
                  Activity Summary
                </h4>
                <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                  <ul class="space-y-2" id="activity-breakdown-list">
                    <!-- Will be populated with JavaScript -->
                  </ul>
                </div>
              </div>
            </div>
            <div class="mt-6">
              <h4
                class="text-sm font-medium text-gray-500 dark:text-gray-400 uppercase mb-2"
              >
                Recent Activities
              </h4>
              <div
                class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 max-h-60 overflow-y-auto"
              >
                <table
                  class="min-w-full divide-y divide-gray-200 dark:divide-gray-700"
                >
                  <thead class="bg-gray-50 dark:bg-gray-700">
                    <tr>
                      <th
                        scope="col"
                        class="px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                      >
                        Date
                      </th>
                      <th
                        scope="col"
                        class="px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                      >
                        Activity
                      </th>
                      <th
                        scope="col"
                        class="px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                      >
                        Points
                      </th>
                      <th
                        scope="col"
                        class="px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
                      >
                        Status
                      </th>
                    </tr>
                  </thead>
                  <tbody
                    id="user-activities-list"
                    class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                  >
                    <!-- Will be populated with JavaScript -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Send Announcement Modal -->
      <div
        id="announcement-modal"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 flex items-center justify-center hidden"
      >
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-2xl w-full"
        >
          <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
            <h3 class="text-lg font-medium">Send Announcement</h3>
            <button
              id="close-announcement-modal"
              class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 focus:outline-none"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="p-6">
            <form id="announcement-form" class="space-y-4">
              <div>
                <label
                  for="announcement-subject"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Subject</label
                >
                <input
                  type="text"
                  id="announcement-subject"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                  placeholder="Announcement subject..."
                />
              </div>
              <div>
                <label
                  for="announcement-audience"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Send To</label
                >
                <select
                  id="announcement-audience"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                >
                  <option value="all">All Users</option>
                  <option value="1">Team Terrapins</option>
                  <option value="2">Team Ravens</option>
                  <option value="3">Team Diplomats</option>
                  <option value="4">Team Chesapeake</option>
                  <option value="5">Team Orioles</option>
                </select>
              </div>
              <div>
                <label
                  for="announcement-message"
                  class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                  >Message</label
                >
                <textarea
                  id="announcement-message"
                  rows="6"
                  class="w-full px-4 py-2 border rounded-md text-base focus:ring-2 focus:ring-primary focus:border-primary dark:bg-gray-700 dark:border-gray-600"
                  placeholder="Your announcement message..."
                ></textarea>
              </div>
              <div class="flex items-center">
                <input
                  id="announcement-important"
                  type="checkbox"
                  class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"
                />
                <label
                  for="announcement-important"
                  class="ml-2 block text-sm text-gray-700 dark:text-gray-300"
                >
                  Mark as important
                </label>
              </div>
            </form>
            <div class="mt-6 flex justify-end space-x-3">
              <button
                id="cancel-announcement"
                class="px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
              >
                Cancel
              </button>
              <button
                id="send-announcement"
                class="px-4 py-2 bg-primary text-white rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
              >
                Send Announcement
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- View Announcement Modal -->
      <div
        id="view-announcement-modal"
        class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 flex items-center justify-center hidden"
      >
        <div
          class="bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-2xl w-full"
        >
          <div class="p-4 border-b dark:border-gray-700 flex justify-between items-center">
            <h3 id="view-announcement-subject" class="text-lg font-medium">
              Announcement Subject
            </h3>
            <button
              id="close-view-announcement"
              class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 focus:outline-none"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="p-6">
            <div class="mb-4 text-sm text-gray-500 dark:text-gray-400">
              Sent by <span id="view-announcement-sender">Admin User</span> on
              <span id="view-announcement-date">June 15, 2024</span> to
              <span id="view-announcement-audience">All Users</span>
            </div>
            <div
              id="view-announcement-message"
              class="prose prose-sm dark:prose-invert max-w-none"
            >
              <!-- Announcement content will be shown here -->
            </div>
          </div>
        </div>
      </div>

      <!-- Notification toast -->
      <div
        id="notification"
        class="fixed bottom-5 right-5 p-4 rounded-md shadow-lg transform transition-transform duration-300 scale-0 z-50 bg-white dark:bg-gray-800 border-l-4"
      >
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <i
              id="notification-icon"
              class="fas fa-check-circle text-green-500"
            ></i>
          </div>
          <div class="ml-3">
            <p id="notification-text" class="text-sm font-medium"></p>
          </div>
          <div class="ml-auto pl-3">
            <div class="-mx-1.5 -my-1.5">
              <button
                id="close-notification"
                class="inline-flex bg-white dark:bg-gray-800 rounded-md p-1.5 text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary"
              >
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Mock data structure for demonstration
      const mockData = {
        users: [
          {
            id: 1,
            firstName: "John",
            lastName: "Smith",
            email: "demo@umd.edu",
            password: "password",
            teamId: 1,
            points: 15,
          },
          {
            id: 2,
            firstName: "Alice",
            lastName: "Johnson",
            email: "alice@umd.edu",
            password: "password",
            teamId: 2,
            points: 21,
          },
          {
            id: 3,
            firstName: "Michael",
            lastName: "Brown",
            email: "michael@umd.edu",
            password: "password",
            teamId: 3,
            points: 18,
          },
          {
            id: 4,
            firstName: "Emily",
            lastName: "Davis",
            email: "emily@umd.edu",
            password: "password",
            teamId: 1,
            points: 9,
          },
          {
            id: 5,
            firstName: "David",
            lastName: "Wilson",
            email: "david@umd.edu",
            password: "password",
            teamId: 2,
            points: 12,
          },
          {
            id: 6,
            firstName: "Sarah",
            lastName: "Martinez",
            email: "sarah@umd.edu",
            password: "password",
            teamId: 4,
            points: 24,
          },
          {
            id: 7,
            firstName: "Robert",
            lastName: "Anderson",
            email: "robert@umd.edu",
            password: "password",
            teamId: 5,
            points: 7,
          },
          {
            id: 8,
            firstName: "Jennifer",
            lastName: "Taylor",
            email: "jennifer@umd.edu",
            password: "password",
            teamId: 3,
            points: 16,
          },
        ],
        teams: [
          { id: 1, name: "Team Terrapins", points: 39 },
          { id: 2, name: "Team Ravens", points: 43 },
          { id: 3, name: "Team Diplomats", points: 34 },
          { id: 4, name: "Team Chesapeake", points: 31 },
          { id: 5, name: "Team Orioles", points: 27 },
        ],
        activities: [
          {
            id: 1,
            userId: 1,
            type: "social_post",
            details: "LinkedIn post about Smith MBA journey",
            points: 1,
            date: "2024-06-01",
            status: "approved",
            evidence: "linkedin-post.jpg",
          },
          {
            id: 2,
            userId: 1,
            type: "linkedin_connection",
            details: "Connected with Sarah Jones (Alumni 2023)",
            points: 1,
            date: "2024-06-03",
            status: "approved",
            evidence: "connection.jpg",
          },
          {
            id: 3,
            userId: 1,
            type: "personal_bio",
            details: "Created and shared personal bio with the WhatsApp group",
            points: 3,
            date: "2024-06-05",
            status: "approved",
            evidence: "bio.jpg",
          },
          {
            id: 4,
            userId: 1,
            type: "instagram_follow",
            details: "Followed umdsmithgrad Instagram account",
            points: 1,
            date: "2024-06-07",
            status: "approved",
            evidence: "instagram.jpg",
          },
          {
            id: 5,
            userId: 1,
            type: "smith_representation",
            details: "Representing Smith at Washington Monument",
            points: 5,
            date: "2024-06-10",
            status: "approved",
            evidence: "monument.jpg",
          },
          {
            id: 6,
            userId: 1,
            type: "admitted_event",
            details: "Attended Smith Trivia Night",
            points: 5,
            date: "2024-06-12",
            status: "pending",
            evidence: "trivia.jpg",
          },
          {
            id: 7,
            userId: 1,
            type: "meetup_attendance",
            details: "Attended Team Terrapins meet-n-greet",
            points: 2,
            date: "2024-06-15",
            status: "rejected",
            evidence: "meetup.jpg",
            notes: "No verification provided",
          },
          {
            id: 8,
            userId: 2,
            type: "social_post",
            details: "Instagram post about Smith MBA acceptance",
            points: 1,
            date: "2024-06-02",
            status: "approved",
            evidence: "instagram-post.jpg",
          },
          {
            id: 9,
            userId: 2,
            type: "personal_bio",
            details: "Created personal bio for WhatsApp group",
            points: 3,
            date: "2024-06-04",
            status: "approved",
            evidence: "bio-alice.jpg",
          },
          {
            id: 10,
            userId: 2,
            type: "smith_representation",
            details: "Representing Smith at Capitol Hill",
            points: 5,
            date: "2024-06-09",
            status: "pending",
            evidence: "capitol.jpg",
          },
          {
            id: 11,
            userId: 3,
            type: "social_post",
            details: "LinkedIn post about MBA journey",
            points: 1,
            date: "2024-06-05",
            status: "pending",
            evidence: "michael-post.jpg",
          },
          {
            id: 12,
            userId: 4,
            type: "linkedin_connection",
            details: "Connected with John Davis (Alumni 2021)",
            points: 1,
            date: "2024-06-08",
            status: "pending",
            evidence: "emily-connection.jpg",
          },
          {
            id: 13,
            userId: 5,
            type: "personal_bio",
            details: "Created personal bio for WhatsApp group",
            points: 3,
            date: "2024-06-10",
            status: "pending",
            evidence: "david-bio.jpg",
          },
          {
            id: 14,
            userId: 6,
            type: "smith_representation",
            details: "Representing Smith at Lincoln Memorial",
            points: 5,
            date: "2024-06-11",
            status: "approved",
            evidence: "lincoln.jpg",
          },
        ],
        activityTypes: {
          social_post: {
            name: "Social Media Post",
            points: 1,
            limit: 5,
            evidence: true,
            description: "Any social media post mentioning Smith MBA journey."
          },
          linkedin_connection: {
            name: "LinkedIn Connection",
            points: 1,
            limit: 10,
            evidence: true,
            description: "Connecting with current or former Smith MBA students on LinkedIn."
          },
          instagram_follow: {
            name: "Instagram Follow",
            points: 1,
            limit: 1,
            evidence: true,
            description: "Following the umdsmithgrad Instagram account."
          },
          share_resource: {
            name: "Shared Resource",
            points: 1,
            limit: 5,
            evidence: false,
            description: "Sharing pertinent resources with team members in WhatsApp."
          },
          birthday_wish: {
            name: "Birthday Wish",
            points: 1,
            limit: 999,
            evidence: false,
            description: "Wishing another team member happy birthday on their actual birthday."
          },
          class_registration: {
            name: "Class Registration",
            points: 1,
            limit: 1,
            evidence: false,
            description: "Registering for first semester classes."
          },
          personal_bio: {
            name: "Personalized Bio",
            points: 3,
            limit: 1,
            evidence: true,
            description: "Creating a personalized bio to share with the WhatsApp community."
          },
          student_chat: {
            name: "MPO Student Chat",
            points: 3,
            limit: 1,
            evidence: false,
            description: "Attending at least 2 of the MPO admitted student chats."
          },
          orientation_survey: {
            name: "MPO Pre-orientation Survey",
            points: 3,
            limit: 1,
            evidence: false,
            description: "Completing the MPO pre-orientation survey."
          },
          photo_release: {
            name: "MPO Photo Release",
            points: 3,
            limit: 1,
            evidence: false,
            description: "Completing the MPO photo release form."
          },
          smith_representation: {
            name: "Smith Representation Photo",
            points: 5,
            limit: 3,
            evidence: true,
            description: "Representing Smith at a non-UMD event or significant location with Smith swag."
          },
          admitted_event: {
            name: "Admitted Student Event",
            points: 5,
            limit: 999,
            evidence: true,
            description: "Attending a virtual or in-person admitted student event."
          },
          team_meetup: {
            name: "Team Meet-n-Greet",
            points: 7,
            limit: 1,
            evidence: true,
            description: "Planning and executing a virtual meet-n-greet with your team (7 points for the team)."
          },
          meetup_attendance: {
            name: "Meet-n-Greet Attendance",
            points: 2,
            limit: 999,
            evidence: true,
            description: "Attending a team virtual meet-n-greet (2 points per attendee)."
          },
        },
        admins: [
          {
            id: 1,
            firstName: "Admin",
            lastName: "User",
            email: "admin@umd.edu",
            password: "admin123",
            role: "admin",
          },
          {
            id: 2,
            firstName: "Sarah",
            lastName: "Johnson",
            email: "sjohnson@umd.edu",
            password: "admin123",
            role: "coordinator",
          },
        ],
        adminLogs: [
          {
            id: 1,
            adminId: 1,
            action: 'login',
            details: 'Admin logged into the system',
            timestamp: '2024-06-15T10:30:00Z'
          },
          {
            id: 2,
            adminId: 1,
            action: 'approve',
            details: 'Approved activity #5 by John Smith',
            timestamp: '2024-06-15T11:15:00Z',
            userId: 1,
            activityId: 5
          },
          {
            id: 3,
            adminId: 1,
            action: 'reject',
            details: 'Rejected activity #7 by John Smith with reason: No verification provided',
            timestamp: '2024-06-15T11:30:00Z',
            userId: 1,
            activityId: 7
          },
          {
            id: 4,
            adminId: 2,
            action: 'login',
            details: 'Admin logged into the system',
            timestamp: '2024-06-16T09:45:00Z'
          },
          {
            id: 5,
            adminId: 2,
            action: 'edit',
            details: 'Modified user profile for Emily Davis',
            timestamp: '2024-06-16T10:20:00Z',
            userId: 4
          },
          {
            id: 6,
            adminId: 1,
            action: 'announcement',
            details: 'Sent announcement "Welcome to the Summer Sweepstakes" to All Users',
            timestamp: '2024-06-16T14:00:00Z',
            announcementId: 1
          },
          {
            id: 7,
            adminId: 2,
            action: 'edit',
            details: 'Modified activity Social Media Post',
            timestamp: '2024-06-17T11:30:00Z',
            activityTypeId: 'social_post'
          }
        ],
        moderationLogs: [
          {
            id: 1,
            activityId: 5,
            userId: 1,
            adminId: 1,
            decision: 'approved',
            notes: '',
            timestamp: '2024-06-15T11:15:00Z'
          },
          {
            id: 2,
            activityId: 7,
            userId: 1,
            adminId: 1,
            decision: 'rejected',
            notes: 'No verification provided',
            timestamp: '2024-06-15T11:30:00Z'
          },
          {
            id: 3,
            activityId: 14,
            userId: 6,
            adminId: 2,
            decision: 'approved',
            notes: '',
            timestamp: '2024-06-16T10:45:00Z'
          },
          {
            id: 4,
            activityId: 10,
            userId: 2,
            adminId: 1,
            decision: 'pending',
            notes: 'Waiting for additional verification',
            timestamp: '2024-06-17T09:20:00Z'
          }
        ],
        announcements: [
          {
            id: 1,
            adminId: 1,
            subject: 'Welcome to the Summer Sweepstakes',
            message: '# Welcome to the Smith School Summer Sweepstakes!\n\nWe\'re excited to have you all participate in this fun journey as you prepare to start your MBA program. This game is designed to help you learn more about Smith, connect with each other, and get ready for the fall semester.\n\nRemember to submit your activities before the weekly deadline (Thursdays at 12pm EST) to be included in the weekly rankings update.\n\nGood luck to all teams!',
            audience: 'all',
            important: true,
            timestamp: '2024-06-16T14:00:00Z'
          },
          {
            id: 2,
            adminId: 2,
            subject: 'Upcoming Virtual Meet & Greet Opportunity',
            message: 'Team Terrapins,\n\nWe wanted to remind you about the opportunity to earn 7 points by organizing a virtual meet-n-greet with your team. This is a great way to get to know each other before the semester starts.\n\nRemember that you need at least 1/3 of your team to participate for the team to earn points.\n\nLet us know if you need any assistance setting this up!',
            audience: '1',
            important: false,
            timestamp: '2024-06-17T16:30:00Z'
          }
        ]
      };

      // Store the original team points for reset functionality
      let originalTeamPoints = [];
      
      // Store the user points chart instance
      let userPointsChart = null;

      // Global state for the current admin
      let currentAdmin = null;
      let currentActivityId = null;

      // DOM Elements
      // Login related
      const loginContainer = document.getElementById("login-container");
      const mainApp = document.getElementById("main-app");
      const loginForm = document.getElementById("login-form");
      const demoLoginBtn = document.getElementById("demo-login");
      const logoutBtn = document.getElementById("logout-btn");
      const mobileLogoutBtn = document.getElementById("mobile-logout-btn");
      const adminNameEl = document.getElementById("admin-name");
      const adminInitialsEl = document.getElementById("admin-initials");

      // Navigation related
      const navLinks = document.querySelectorAll(".nav-link");
      const mobileNavLinks = document.querySelectorAll(".mobile-nav-link");
      const openMobileMenuBtn = document.getElementById("open-mobile-menu");
      const closeMobileMenuBtn = document.getElementById("close-mobile-menu");
      const mobileMenu = document.getElementById("mobile-menu");
      const sections = [
        document.getElementById("dashboard-section"),
        document.getElementById("pending-section"),
        document.getElementById("users-section"),
        document.getElementById("teams-section"),
        document.getElementById("activities-section"),
        document.getElementById("reports-section"),
        document.getElementById("settings-section"),
      ];

      // Dashboard related
      const totalPointsEl = document.getElementById("total-points");
      const totalUsersEl = document.getElementById("total-users");
      const dashboardPendingActivitiesEl = document.getElementById(
        "dashboard-pending-activities"
      );
      const pendingCountEl = document.getElementById("pending-count");
      const mobilePendingCountEl = document.getElementById("mobile-pending-count");
      const teamStandingsEl = document.getElementById("team-standings");
      const recentActivitiesEl = document.getElementById("recent-activities");
      const viewAllActivitiesBtn = document.getElementById("view-all-activities");

      // Activity review related
      const activityReviewContainer = document.getElementById("activity-review-container");
      const noActivitiesMessage = document.getElementById("no-activities-message");
      const statusFilterEl = document.getElementById("status-filter");
      const activityFilterEl = document.getElementById("activity-filter");
      const loadMoreActivitiesBtn = document.getElementById("load-more-activities");

      // User management related
      const usersTableBodyEl = document.getElementById("users-table-body");
      const userSearchEl = document.getElementById("user-search");
      const teamFilterEl = document.getElementById("team-filter");

      // Team management related
      const teamsCardsContainer = document.getElementById("teams-cards-container");

      // Activities management related
      const activitiesTableBodyEl = document.getElementById("activities-table-body");
      const addActivityBtn = document.getElementById("add-activity-btn");
      
      // Leaderboard management related
      const teamLeaderboardTable = document.getElementById("team-leaderboard-table");
      const individualLeaderboardTable = document.getElementById("individual-leaderboard-table");
      
      // Logs & Notifications related
      const adminLogsTableBody = document.getElementById("admin-logs-table-body");
      const moderationLogsTableBody = document.getElementById("moderation-logs-table-body");
      const announcementsTableBody = document.getElementById("announcements-table-body");

      // Modal related
      const activityPreviewModal = document.getElementById("activity-preview-modal");
      const closeActivityModalBtn = document.getElementById("close-activity-modal");
      const activityPreviewContent = document.getElementById("activity-preview-content");
      const approveActivityBtn = document.getElementById("approve-activity");
      const rejectActivityBtn = document.getElementById("reject-activity");

      const rejectionModal = document.getElementById("rejection-modal");
      const closeRejectionModalBtn = document.getElementById("close-rejection-modal");
      const rejectionReasonEl = document.getElementById("rejection-reason");
      const confirmRejectionBtn = document.getElementById("confirm-rejection");

      const userEditModal = document.getElementById("user-edit-modal");
      const closeUserModalBtn = document.getElementById("close-user-modal");
      const editFirstNameEl = document.getElementById("edit-first-name");
      const editLastNameEl = document.getElementById("edit-last-name");
      const editEmailEl = document.getElementById("edit-email");
      const editTeamEl = document.getElementById("edit-team");
      const editPointsEl = document.getElementById("edit-points");
      const saveUserChangesBtn = document.getElementById("save-user-changes");

      // Activity edit modal
      const activityEditModal = document.getElementById("activity-edit-modal");
      const closeActivityEditModalBtn = document.getElementById("close-activity-edit-modal");
      const cancelActivityEditBtn = document.getElementById("cancel-activity-edit");
      const saveActivityChangesBtn = document.getElementById("save-activity-changes");
      
      // New activity modal
      const newActivityModal = document.getElementById("new-activity-modal");
      const closeNewActivityModalBtn = document.getElementById("close-new-activity-modal");
      const cancelNewActivityBtn = document.getElementById("cancel-new-activity");
      const addNewActivityBtn = document.getElementById("add-new-activity");
      
      // Team points adjustment modal
      const teamPointsModal = document.getElementById("team-points-modal");
      const closeTeamPointsModalBtn = document.getElementById("close-team-points-modal");
      const cancelTeamAdjustmentBtn = document.getElementById("cancel-team-adjustment");
      const saveTeamAdjustmentBtn = document.getElementById("save-team-adjustment");

      // Activity breakdown modal
      const activityBreakdownModal = document.getElementById("activity-breakdown-modal");
      const closeActivityBreakdownBtn = document.getElementById("close-activity-breakdown");
      
      // Announcement modals
      const announcementModal = document.getElementById("announcement-modal");
      const sendAnnouncementBtn = document.getElementById("send-announcement-btn");
      const closeAnnouncementModalBtn = document.getElementById("close-announcement-modal");
      const cancelAnnouncementBtn = document.getElementById("cancel-announcement");
      const sendAnnouncementSubmitBtn = document.getElementById("send-announcement");
      
      const viewAnnouncementModal = document.getElementById("view-announcement-modal");
      const closeViewAnnouncementBtn = document.getElementById("close-view-announcement");

      // Notification related
      const notificationEl = document.getElementById("notification");
      const notificationIconEl = document.getElementById("notification-icon");
      const notificationTextEl = document.getElementById("notification-text");
      const closeNotificationBtn = document.getElementById("close-notification");

      const notificationBtn = document.getElementById("notification-btn");
      const notificationDropdown = document.getElementById("notification-dropdown");
      const notificationBadge = document.getElementById("notification-badge");

      // Current time display
      const currentTimeEl = document.getElementById("current-time");

      // Theme toggle
      const themeToggleBtn = document.getElementById("theme-toggle");

      // Other elements
      const pointsChartEl = document.getElementById("points-chart");
      const teamPerformanceChartEl = document.getElementById("team-performance-chart");
      const weeklyParticipationChartEl = document.getElementById("weekly-participation-chart");
      const activityCompletionChartEl = document.getElementById("activity-completion-chart");

      // Charts
      let pointsChart, teamPerformanceChart, weeklyParticipationChart, activityCompletionChart;

      // Event Listeners
      document.addEventListener("DOMContentLoaded", initApp);
      loginForm.addEventListener("submit", handleLogin);
      demoLoginBtn.addEventListener("click", handleDemoLogin);
      logoutBtn.addEventListener("click", handleLogout);
      mobileLogoutBtn.addEventListener("click", handleLogout);

      // Navigation
      navLinks.forEach((link) => {
        link.addEventListener("click", () => {
          const section = link.getAttribute("data-section");
          switchSection(section);
          updateNavLinks(section, navLinks);
        });
      });

      mobileNavLinks.forEach((link) => {
        link.addEventListener("click", () => {
          const section = link.getAttribute("data-section");
          switchSection(section);
          updateNavLinks(section, mobileNavLinks);
          mobileMenu.classList.add("hidden");
        });
      });

      openMobileMenuBtn.addEventListener("click", () => {
        mobileMenu.classList.remove("hidden");
      });

      closeMobileMenuBtn.addEventListener("click", () => {
        mobileMenu.classList.add("hidden");
      });

      // Dashboard
      viewAllActivitiesBtn.addEventListener("click", () => {
        switchSection("pending");
        updateNavLinks("pending", navLinks);
        updateNavLinks("pending", mobileNavLinks);
      });

      // Activity review
      statusFilterEl.addEventListener("change", loadActivities);
      activityFilterEl.addEventListener("change", loadActivities);
      loadMoreActivitiesBtn.addEventListener("click", loadMoreActivities);

      // User management
      userSearchEl.addEventListener("input", filterUsers);
      teamFilterEl.addEventListener("change", filterUsers);

      // Leaderboard management 
      document.addEventListener("DOMContentLoaded", function() {
        // Set up tab navigation for leaderboard section
        const leaderboardTabButtons = document.querySelectorAll(".leaderboard-tab-btn");
        const leaderboardTabContents = document.querySelectorAll(".leaderboard-tab-content");
        
        leaderboardTabButtons.forEach((button) => {
          button.addEventListener("click", () => {
            const tabId = button.id.replace("tab-", "");
            switchLeaderboardTab(tabId, leaderboardTabButtons, leaderboardTabContents);
          });
        });
        
        document.getElementById("export-csv-btn").addEventListener("click", exportLeaderboardCSV);
        document.getElementById("export-pdf-btn").addEventListener("click", exportLeaderboardPDF);
        document.getElementById("reset-team-changes").addEventListener("click", resetTeamChanges);
        document.getElementById("individual-search").addEventListener("input", filterIndividualLeaderboard);
        document.getElementById("individual-team-filter").addEventListener("change", filterIndividualLeaderboard);
      });

      // Logs management
      document.addEventListener("DOMContentLoaded", function() {
        // Set up tab navigation for logs section
        const logTabButtons = document.querySelectorAll(".logs-tab-btn");
        const logTabContents = document.querySelectorAll(".logs-tab-content");
        
        logTabButtons.forEach((button) => {
          button.addEventListener("click", () => {
            const tabId = button.id.replace("tab-", "");
            switchLogTab(tabId, logTabButtons, logTabContents);
          });
        });
        
        // Filter listeners
        document.getElementById("admin-filter").addEventListener("change", filterAdminLogs);
        document.getElementById("action-filter").addEventListener("change", filterAdminLogs);
        document.getElementById("moderation-status-filter").addEventListener("change", filterModerationLogs);
        document.getElementById("moderation-search").addEventListener("input", filterModerationLogs);
      });

      // Modal handlers
      closeActivityModalBtn.addEventListener("click", () => {
        activityPreviewModal.classList.add("hidden");
      });

      approveActivityBtn.addEventListener("click", approveActivity);
      rejectActivityBtn.addEventListener("click", () => {
        rejectionModal.classList.remove("hidden");
      });

      closeRejectionModalBtn.addEventListener("click", () => {
        rejectionModal.classList.add("hidden");
      });

      confirmRejectionBtn.addEventListener("click", rejectActivity);

      closeUserModalBtn.addEventListener("click", () => {
        userEditModal.classList.add("hidden");
      });

      saveUserChangesBtn.addEventListener("click", saveUserChanges);
      
      // Activity edit modal event listeners
      document.addEventListener("DOMContentLoaded", function() {
        closeActivityEditModalBtn.addEventListener("click", () => {
          activityEditModal.classList.add("hidden");
        });
        
        cancelActivityEditBtn.addEventListener("click", () => {
          activityEditModal.classList.add("hidden");
        });
        
        document.getElementById("edit-activity-no-limit").addEventListener("change", function() {
          const limitField = document.getElementById("edit-activity-limit");
          limitField.disabled = this.checked;
        });
        
        saveActivityChangesBtn.addEventListener("click", saveActivityChanges);
      });
      
      // New activity modal event listeners
      document.addEventListener("DOMContentLoaded", function() {
        addActivityBtn.addEventListener("click", () => {
          document.getElementById("new-activity-form").reset();
          document.getElementById("new-activity-limit").disabled = false;
          newActivityModal.classList.remove("hidden");
        });
        
        closeNewActivityModalBtn.addEventListener("click", () => {
          newActivityModal.classList.add("hidden");
        });
        
        cancelNewActivityBtn.addEventListener("click", () => {
          newActivityModal.classList.add("hidden");
        });
        
        document.getElementById("new-activity-no-limit").addEventListener("change", function() {
          const limitField = document.getElementById("new-activity-limit");
          limitField.disabled = this.checked;
        });
        
        addNewActivityBtn.addEventListener("click", addNewActivity);
      });
      
      // Team points modal event listeners
      document.addEventListener("DOMContentLoaded", function() {
        closeTeamPointsModalBtn.addEventListener("click", () => {
          teamPointsModal.classList.add("hidden");
        });
        
        cancelTeamAdjustmentBtn.addEventListener("click", () => {
          teamPointsModal.classList.add("hidden");
        });
        
        saveTeamAdjustmentBtn.addEventListener("click", saveTeamPointsAdjustment);
      });
      
      // Activity breakdown modal event listeners
      document.addEventListener("DOMContentLoaded", function() {
        closeActivityBreakdownBtn.addEventListener("click", () => {
          activityBreakdownModal.classList.add("hidden");
          // Destroy chart to prevent memory leaks
          if (userPointsChart) {
            userPointsChart.destroy();
            userPointsChart = null;
          }
        });
      });
      
      // Announcement modal event listeners
      document.addEventListener("DOMContentLoaded", function() {
        sendAnnouncementBtn.addEventListener("click", () => {
          document.getElementById("announcement-form").reset();
          announcementModal.classList.remove("hidden");
        });
        
        closeAnnouncementModalBtn.addEventListener("click", () => {
          announcementModal.classList.add("hidden");
        });
        
        cancelAnnouncementBtn.addEventListener("click", () => {
          announcementModal.classList.add("hidden");
        });
        
        sendAnnouncementSubmitBtn.addEventListener("click", sendAnnouncement);
        
        closeViewAnnouncementBtn.addEventListener("click", () => {
          viewAnnouncementModal.classList.add("hidden");
        });
      });

      // Notification
      closeNotificationBtn.addEventListener("click", hideNotification);

      notificationBtn.addEventListener("click", () => {
        notificationDropdown.classList.toggle("hidden");
      });

      document.addEventListener("click", (e) => {
        if (
          !notificationBtn.contains(e.target) &&
          !notificationDropdown.contains(e.target)
        ) {
          notificationDropdown.classList.add("hidden");
        }
      });

      // Theme toggle
      themeToggleBtn.addEventListener("click", toggleTheme);

      // Initialize the application
      function initApp() {
        // Update current time
        updateCurrentTime();
        setInterval(updateCurrentTime, 60000); // Update every minute
      }

      // Handle login form submission
      function handleLogin(e) {
        e.preventDefault();

        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;

        // Simple validation
        if (!email || !password) {
          showNotification("Please enter both email and password.", "error");
          return;
        }

        // Find admin in mock data
        const admin = mockData.admins.find(
          (a) => a.email === email && a.password === password
        );

        if (admin) {
          loginAdmin(admin);
        } else {
          showNotification("Invalid admin credentials.", "error");
        }
      }

      // Handle demo login
      function handleDemoLogin() {
        // Use the first admin as the demo admin
        loginAdmin(mockData.admins[0]);
      }

      // Login admin and set up the application
      function loginAdmin(admin) {
        currentAdmin = admin;

        // Update UI
        loginContainer.classList.add("hidden");
        mainApp.classList.remove("hidden");

        adminNameEl.textContent = `${admin.firstName} ${admin.lastName}`;
        adminInitialsEl.textContent = `${admin.firstName.charAt(0)}${admin.lastName.charAt(0)}`;

        // Add admin login log
        const logEntry = {
          id: mockData.adminLogs.length + 1,
          adminId: admin.id,
          action: 'login',
          details: 'Admin logged into the system',
          timestamp: new Date().toISOString()
        };
        mockData.adminLogs.push(logEntry);

        // Load all sections
        updateDashboard();
        loadActivities();
        loadUsers();
        loadTeams();
        loadActivityDefinitions();
        loadLeaderboardData();
        loadLogsData();
        initCharts();

        // Show dashboard section
        switchSection("dashboard");
        updateNavLinks("dashboard", navLinks);
        updateNavLinks("dashboard", mobileNavLinks);
      }

      // Handle logout
      function handleLogout() {
        currentAdmin = null;

        // Reset UI
        mainApp.classList.add("hidden");
        loginContainer.classList.remove("hidden");
        mobileMenu.classList.add("hidden");

        // Clear forms
        loginForm.reset();

        // Destroy charts to prevent memory leaks
        if (pointsChart) pointsChart.destroy();
        if (teamPerformanceChart) teamPerformanceChart.destroy();
        if (weeklyParticipationChart) weeklyParticipationChart.destroy();
        if (activityCompletionChart) activityCompletionChart.destroy();
        if (userPointsChart) userPointsChart.destroy();
      }

      // Switch between sections
      function switchSection(sectionId) {
        sections.forEach((section) => {
          if (section.id === `${sectionId}-section`) {
            section.classList.remove("hidden");
          } else {
            section.classList.add("hidden");
          }
        });
      }

      // Update navigation links
      function updateNavLinks(activeSection, links) {
        links.forEach((link) => {
          if (link.getAttribute("data-section") === activeSection) {
            link.classList.remove(
              "text-gray-600",
              "dark:text-gray-400",
              "hover:bg-gray-100",
              "dark:hover:bg-gray-700"
            );
            link.classList.add("bg-gray-100", "dark:bg-gray-700", "text-gray-900", "dark:text-gray-100");
          } else {
            link.classList.add(
              "text-gray-600",
              "dark:text-gray-400",
              "hover:bg-gray-100",
              "dark:hover:bg-gray-700"
            );
            link.classList.remove("bg-gray-100", "dark:bg-gray-700", "text-gray-900", "dark:text-gray-100");
          }
        });
      }

      // Update dashboard
      function updateDashboard() {
        // Calculate total points
        const totalPoints = mockData.activities
          .filter((a) => a.status === "approved")
          .reduce((sum, activity) => sum + activity.points, 0);

        totalPointsEl.textContent = totalPoints;
        totalUsersEl.textContent = mockData.users.length;

        // Count pending activities
        const pendingCount = mockData.activities.filter(
          (a) => a.status === "pending"
        ).length;

        dashboardPendingActivitiesEl.textContent = pendingCount;
        pendingCountEl.textContent = pendingCount;
        mobilePendingCountEl.textContent = pendingCount;

        // Update team standings
        updateTeamStandings();

        // Update recent activities
        updateRecentActivities();
      }

      // Update team standings
      function updateTeamStandings() {
        const sortedTeams = [...mockData.teams].sort(
          (a, b) => b.points - a.points
        );

        teamStandingsEl.innerHTML = sortedTeams
          .map((team, index) => {
            // Count members per team
            const membersCount = mockData.users.filter(
              (u) => u.teamId === team.id
            ).length;

            return `
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium ${
                    index === 0
                      ? "text-yellow-500"
                      : index === 1
                      ? "text-gray-400"
                      : index === 2
                      ? "text-amber-600"
                      : "text-gray-900 dark:text-white"
                  }">
                    ${index + 1}${
              index === 0
                ? ' <i class="fas fa-trophy"></i>'
                : index === 1
                ? ' <i class="fas fa-medal"></i>'
                : index === 2
                ? ' <i class="fas fa-award"></i>'
                : ""
            }
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium text-gray-900 dark:text-white">${
                    team.name
                  }</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900 dark:text-white">${membersCount}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-bold text-gray-900 dark:text-white">${
                    team.points
                  }</div>
                </td>
              </tr>
            `;
          })
          .join("");
      }

      // Update recent activities
      function updateRecentActivities() {
        const recentActivities = [...mockData.activities]
          .sort((a, b) => new Date(b.date) - new Date(a.date))
          .slice(0, 5);

        recentActivitiesEl.innerHTML = recentActivities
          .map((activity) => {
            const user = mockData.users.find((u) => u.id === activity.userId);
            const team = mockData.teams.find((t) => t.id === user?.teamId);
            const activityType = mockData.activityTypes[activity.type];

            let statusClass, statusText;
            switch (activity.status) {
              case "approved":
                statusClass = "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";
                statusText = "Approved";
                break;
              case "rejected":
                statusClass = "bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";
                statusText = "Rejected";
                break;
              default:
                statusClass = "bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";
                statusText = "Pending";
            }

            return `
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900 dark:text-white">${formatDate(
                    activity.date
                  )}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium text-gray-900 dark:text-white">${
                    user ? `${user.firstName} ${user.lastName}` : "Unknown"
                  }</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900 dark:text-white">${
                    team ? team.name : "Unknown"
                  }</div>
                </td>
                <td class="px-6 py-4">
                  <div class="text-sm font-medium text-gray-900 dark:text-white">${
                    activityType?.name || activity.type
                  }</div>
                  <div class="text-xs text-gray-500 dark:text-gray-400">${
                    activity.details
                  }</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-bold text-gray-900 dark:text-white">${
                    activity.points
                  }</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusClass}">
                    ${statusText}
                  </span>
                </td>
              </tr>
            `;
          })
          .join("");
      }

      // Load activities for review
      function loadActivities() {
        const statusFilter = statusFilterEl.value;
        const activityFilter = activityFilterEl.value;

        let filteredActivities = [...mockData.activities];

        // Apply status filter
        if (statusFilter !== "all") {
          filteredActivities = filteredActivities.filter(
            (a) => a.status === statusFilter
          );
        }

        // Apply activity type filter
        if (activityFilter !== "all") {
          filteredActivities = filteredActivities.filter(
            (a) => a.type === activityFilter
          );
        }

        // Sort by date (newest first)
        filteredActivities.sort((a, b) => new Date(b.date) - new Date(a.date));

        // Take first 9 activities for initial load
        const activitiesToShow = filteredActivities.slice(0, 9);

        // Show or hide empty state
        if (activitiesToShow.length === 0) {
          activityReviewContainer.innerHTML = "";
          noActivitiesMessage.classList.remove("hidden");
          loadMoreActivitiesBtn.classList.add("hidden");
        } else {
          noActivitiesMessage.classList.add("hidden");
          renderActivityCards(activitiesToShow);
          
          // Show or hide load more button
          if (filteredActivities.length > 9) {
            loadMoreActivitiesBtn.classList.remove("hidden");
          } else {
            loadMoreActivitiesBtn.classList.add("hidden");
          }
        }
      }

      // Load more activities
      function loadMoreActivities() {
        const statusFilter = statusFilterEl.value;
        const activityFilter = activityFilterEl.value;
        const currentCount = activityReviewContainer.children.length;

        let filteredActivities = [...mockData.activities];

        // Apply status filter
        if (statusFilter !== "all") {
          filteredActivities = filteredActivities.filter(
            (a) => a.status === statusFilter
          );
        }

        // Apply activity type filter
        if (activityFilter !== "all") {
          filteredActivities = filteredActivities.filter(
            (a) => a.type === activityFilter
          );
        }

        // Sort by date (newest first)
        filteredActivities.sort((a, b) => new Date(b.date) - new Date(a.date));

        // Take next 9 activities
        const nextActivities = filteredActivities.slice(
          currentCount,
          currentCount + 9
        );

        // Append to existing activities
        if (nextActivities.length > 0) {
          renderActivityCards(nextActivities, true);
        }

        // Hide load more button if no more activities
        if (currentCount + nextActivities.length >= filteredActivities.length) {
          loadMoreActivitiesBtn.classList.add("hidden");
        }
      }

      // Render activity cards
      function renderActivityCards(activities, append = false) {
        const activityCards = activities
          .map((activity) => {
            const user = mockData.users.find((u) => u.id === activity.userId);
            const team = mockData.teams.find((t) => t.id === user?.teamId);
            const activityType = mockData.activityTypes[activity.type];

            let statusClass, statusIcon, statusText;
            switch (activity.status) {
              case "approved":
                statusClass = "text-green-500";
                statusIcon = "check-circle";
                statusText = "Approved";
                break;
              case "rejected":
                statusClass = "text-red-500";
                statusIcon = "times-circle";
                statusText = "Rejected";
                break;
              default:
                statusClass = "text-yellow-500";
                statusIcon = "clock";
                statusText = "Pending";
            }

            return `
              <div class="activity-item bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden">
                <div class="p-4">
                  <div class="flex justify-between items-start">
                    <div>
                      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200">
                        ${activityType?.points || 0} pts
                      </span>
                      <h3 class="mt-1 text-lg font-medium text-gray-900 dark:text-white">
                        ${activityType?.name || activity.type}
                      </h3>
                    </div>
                    <div class="flex items-center ${statusClass}">
                      <i class="fas fa-${statusIcon} mr-1"></i>
                      <span class="text-sm font-medium">${statusText}</span>
                    </div>
                  </div>
                  <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">
                    ${activity.details}
                  </p>
                  <div class="mt-3 flex items-center text-sm text-gray-500 dark:text-gray-400">
                    <i class="fas fa-user mr-1.5"></i>
                    <span>${user ? `${user.firstName} ${user.lastName}` : "Unknown"}</span>
                    <span class="mx-2">•</span>
                    <i class="fas fa-users mr-1.5"></i>
                    <span>${team ? team.name : "Unknown"}</span>
                    <span class="mx-2">•</span>
                    <i class="fas fa-calendar mr-1.5"></i>
                    <span>${formatDate(activity.date)}</span>
                  </div>
                </div>
                <div class="px-4 py-3 bg-gray-50 dark:bg-gray-700 flex justify-between items-center">
                  ${
                    activity.evidence
                      ? `<span class="text-xs text-gray-500 dark:text-gray-400"><i class="fas fa-paperclip mr-1"></i> Evidence attached</span>`
                      : `<span class="text-xs text-gray-500 dark:text-gray-400">No evidence</span>`
                  }
                  <button 
                    data-activity-id="${activity.id}" 
                    class="view-activity-btn text-sm text-primary hover:text-indigo-700 font-medium"
                  >
                    View Details
                  </button>
                </div>
              </div>
            `;
          })
          .join("");

        if (append) {
          activityReviewContainer.innerHTML += activityCards;
        } else {
          activityReviewContainer.innerHTML = activityCards;
        }

        // Add event listeners to view buttons
        document.querySelectorAll(".view-activity-btn").forEach((btn) => {
          btn.addEventListener("click", () => {
            const activityId = parseInt(btn.getAttribute("data-activity-id"));
            openActivityPreview(activityId);
          });
        });
      }

      // Open activity preview modal
      function openActivityPreview(activityId) {
        const activity = mockData.activities.find((a) => a.id === activityId);
        if (!activity) return;

        currentActivityId = activityId;

        const user = mockData.users.find((u) => u.id === activity.userId);
        const team = mockData.teams.find((t) => t.id === user?.teamId);
        const activityType = mockData.activityTypes[activity.type];

        let statusClass, statusText;
        switch (activity.status) {
          case "approved":
            statusClass = "text-green-500";
            statusText = "Approved";
            break;
          case "rejected":
            statusClass = "text-red-500";
            statusText = "Rejected";
            break;
          default:
            statusClass = "text-yellow-500";
            statusText = "Pending";
        }

        const evidenceImg = activity.evidence
          ? `
            <div class="mt-4">
              <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Evidence:</h4>
              <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-4 flex items-center justify-center">
                <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzZCNzI4MCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiPjxwYXRoIGQ9Ik00IDRjLTEuMSAwLTIgLjktMiAydjEyYzAgMS4xLjkgMiAyIDJoMTZjMS4xIDAgMi0uOSAyLTJWNmMwLTEuMS0uOS0yLTItMkg0em0xNiAxM2MwIC41NS0uNDUgMS0xIDFINWMtLjU1IDAtMS0uNDUtMS0xVjhoMnY1aDEwVjhoMnY5eiIvPjxwYXRoIGQ9Ik0xOCA3YzAgLjU1LS40NSAxLTEgMXMtMS0uNDUtMS0xIC40NS0xIDEtMSAxIC40NSAxIDF6Ii8+PHBhdGggZD0iTTEyIDdjMCAxLjY2LTEuMzQgMy0zIDNTNiA4LjY2IDYgNyA3LjM0IDQgOSA0czMgMS4zNCAzIDN6Ii8+PC9zdmc+" alt="Evidence Preview" class="max-w-full h-auto" />
              </div>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">* Sample image placeholder (${activity.evidence})</p>
            </div>
          `
          : "";

        const notesSection =
          activity.status === "rejected" && activity.notes
            ? `
            <div class="mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 rounded">
              <h4 class="text-sm font-medium text-red-700 dark:text-red-300 mb-1">Rejection Reason:</h4>
              <p class="text-sm text-red-600 dark:text-red-400">${activity.notes}</p>
            </div>
          `
            : "";

        activityPreviewContent.innerHTML = `
          <div class="flex justify-between">
            <h3 class="text-lg font-medium text-gray-900 dark:text-white">
              ${activityType?.name || activity.type}
            </h3>
            <div class="flex items-center ${statusClass}">
              <span class="text-sm font-medium">${statusText}</span>
            </div>
          </div>
          
          <div class="mt-4 grid grid-cols-2 gap-4">
            <div>
              <h4 class="text-xs text-gray-500 dark:text-gray-400">Student</h4>
              <p class="text-sm font-medium">${
                user ? `${user.firstName} ${user.lastName}` : "Unknown"
              }</p>
            </div>
            <div>
              <h4 class="text-xs text-gray-500 dark:text-gray-400">Team</h4>
              <p class="text-sm font-medium">${team ? team.name : "Unknown"}</p>
            </div>
            <div>
              <h4 class="text-xs text-gray-500 dark:text-gray-400">Submission Date</h4>
              <p class="text-sm font-medium">${formatDate(activity.date)}</p>
            </div>
            <div>
              <h4 class="text-xs text-gray-500 dark:text-gray-400">Points</h4>
              <p class="text-sm font-medium">${activity.points}</p>
            </div>
          </div>
          
          <div class="mt-4">
            <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Details:</h4>
            <p class="text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700 p-3 rounded">
              ${activity.details}
            </p>
          </div>
          
          ${evidenceImg}
          ${notesSection}
        `;

        // Show/hide approve/reject buttons based on status
        if (activity.status === "pending") {
          approveActivityBtn.classList.remove("hidden");
          rejectActivityBtn.classList.remove("hidden");
        } else {
          approveActivityBtn.classList.add("hidden");
          rejectActivityBtn.classList.add("hidden");
        }

        activityPreviewModal.classList.remove("hidden");
      }

      // Approve activity
      function approveActivity() {
        if (currentActivityId === null) return;

        const activity = mockData.activities.find((a) => a.id === currentActivityId);
        if (!activity) return;

        // Update activity status
        activity.status = "approved";

        // Update user and team points
        const user = mockData.users.find((u) => u.id === activity.userId);
        if (user) {
          user.points += activity.points;
          
          const team = mockData.teams.find((t) => t.id === user.teamId);
          if (team) {
            team.points += activity.points;
          }
        }
        
        // Add admin log entry
        const userName = user ? `${user.firstName} ${user.lastName}` : 'Unknown';
        const logEntry = {
          id: mockData.adminLogs.length + 1,
          adminId: currentAdmin.id,
          action: 'approve',
          details: `Approved activity #${currentActivityId} by ${userName}`,
          timestamp: new Date().toISOString(),
          userId: activity.userId,
          activityId: currentActivityId
        };
        mockData.adminLogs.push(logEntry);
        
        // Add moderation log entry
        const moderationEntry = {
          id: mockData.moderationLogs.length + 1,
          activityId: currentActivityId,
          userId: activity.userId,
          adminId: currentAdmin.id,
          decision: 'approved',
          notes: '',
          timestamp: new Date().toISOString()
        };
        mockData.moderationLogs.push(moderationEntry);

        // Close modals
        activityPreviewModal.classList.add("hidden");

        // Update UI
        updateDashboard();
        loadActivities();
        loadUsers();
        loadTeams();
        loadLeaderboardData();
        
        // Update logs UI if visible
        if (!document.getElementById("logs-section").classList.contains("hidden")) {
          loadAdminLogs();
          loadModerationLogs();
        }
        
        if (pointsChart) updatePointsChart();
        if (teamPerformanceChart) updateTeamPerformanceChart();

        showNotification("Activity approved successfully", "success");
      }

      // Reject activity
      function rejectActivity() {
        if (currentActivityId === null) return;

        const activity = mockData.activities.find((a) => a.id === currentActivityId);
        if (!activity) return;

        const reason = rejectionReasonEl.value.trim();
        if (!reason) {
          showNotification("Please provide a reason for rejection", "error");
          return;
        }

        // Update activity status and notes
        activity.status = "rejected";
        activity.notes = reason;
        
        // Add admin log entry
        const user = mockData.users.find((u) => u.id === activity.userId);
        const userName = user ? `${user.firstName} ${user.lastName}` : 'Unknown';
        const logEntry = {
          id: mockData.adminLogs.length + 1,
          adminId: currentAdmin.id,
          action: 'reject',
          details: `Rejected activity #${currentActivityId} by ${userName} with reason: ${reason}`,
          timestamp: new Date().toISOString(),
          userId: activity.userId,
          activityId: currentActivityId
        };
        mockData.adminLogs.push(logEntry);
        
        // Add moderation log entry
        const moderationEntry = {
          id: mockData.moderationLogs.length + 1,
          activityId: currentActivityId,
          userId: activity.userId,
          adminId: currentAdmin.id,
          decision: 'rejected',
          notes: reason,
          timestamp: new Date().toISOString()
        };
        mockData.moderationLogs.push(moderationEntry);

        // Close modals
        rejectionModal.classList.add("hidden");
        activityPreviewModal.classList.add("hidden");

        // Clear rejection reason
        rejectionReasonEl.value = "";

        // Update UI
        updateDashboard();
        loadActivities();
        
        // Update logs UI if visible
        if (!document.getElementById("logs-section").classList.contains("hidden")) {
          loadAdminLogs();
          loadModerationLogs();
        }

        showNotification("Activity rejected successfully", "success");
      }

      // Load users
      function loadUsers() {
        const users = [...mockData.users].sort((a, b) => 
          `${a.firstName} ${a.lastName}`.localeCompare(`${b.firstName} ${b.lastName}`)
        );

        usersTableBodyEl.innerHTML = users
          .map((user) => {
            const team = mockData.teams.find((t) => t.id === user.teamId);

            return `
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <div class="flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-300">
                      ${user.firstName.charAt(0)}${user.lastName.charAt(0)}
                    </div>
                    <div class="ml-4">
                      <div class="text-sm font-medium text-gray-900 dark:text-white">
                        ${user.firstName} ${user.lastName}
                      </div>
                    </div>
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900 dark:text-white">${user.email}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900 dark:text-white">${team ? team.name : "Unknown"}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                  <div class="text-sm font-medium text-gray-900 dark:text-white">${user.points}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                  <button 
                    data-user-id="${user.id}" 
                    class="edit-user-btn text-primary hover:text-indigo-700"
                  >
                    Edit
                  </button>
                </td>
              </tr>
            `;
          })
          .join("");

        // Add event listeners to edit buttons
        document.querySelectorAll(".edit-user-btn").forEach((btn) => {
          btn.addEventListener("click", () => {
            const userId = parseInt(btn.getAttribute("data-user-id"));
            openUserEditModal(userId);
          });
        });

        // Update user count
        document.getElementById("users-total-count").textContent = users.length;
        document.getElementById("users-showing-end").textContent = Math.min(users.length, 8);
      }

      // Filter users
      function filterUsers() {
        const searchTerm = userSearchEl.value.toLowerCase();
        const teamId = teamFilterEl.value === "all" ? null : parseInt(teamFilterEl.value);

        let filteredUsers = [...mockData.users];

        // Apply search filter
        if (searchTerm) {
          filteredUsers = filteredUsers.filter(
            (user) =>
              `${user.firstName} ${user.lastName}`.toLowerCase().includes(searchTerm) ||
              user.email.toLowerCase().includes(searchTerm)
          );
        }

        // Apply team filter
        if (teamId) {
          filteredUsers = filteredUsers.filter((user) => user.teamId === teamId);
        }

        // Sort alphabetically
        filteredUsers.sort((a, b) => 
          `${a.firstName} ${a.lastName}`.localeCompare(`${b.firstName} ${b.lastName}`)
        );

        usersTableBodyEl.innerHTML = filteredUsers
          .map((user) => {
            const team = mockData.teams.find((t) => t.id === user.teamId);

            return `
              <tr>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <div class="flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-300">
                      ${user.firstName.charAt(0)}${user.lastName.charAt(0)}
                    </div>
                    <div class="ml-4">
                      <div class="text-sm font-medium text-gray-900 dark:text-white">
                        ${user.firstName} ${user.lastName}
                      </div>
                    </div>
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900 dark:text-white">${user.email}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900 dark:text-white">${team ? team.name : "Unknown"}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                  <div class="text-sm font-medium text-gray-900 dark:text-white">${user.points}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                  <button 
                    data-user-id="${user.id}" 
                    class="edit-user-btn text-primary hover:text-indigo-700"
                  >
                    Edit
                  </button>
                </td>
              </tr>
            `;
          })
          .join("");

        // Add event listeners to edit buttons
        document.querySelectorAll(".edit-user-btn").forEach((btn) => {
          btn.addEventListener("click", () => {
            const userId = parseInt(btn.getAttribute("data-user-id"));
            openUserEditModal(userId);
          });
        });

        // Update user count
        document.getElementById("users-total-count").textContent = filteredUsers.length;
        document.getElementById("users-showing-end").textContent = Math.min(filteredUsers.length, 8);
      }

      // Open user edit modal
      function openUserEditModal(userId) {
        const user = mockData.users.find((u) => u.id === userId);
        if (!user) return;

        // Populate form fields
        editFirstNameEl.value = user.firstName;
        editLastNameEl.value = user.lastName;
        editEmailEl.value = user.email;
        editTeamEl.value = user.teamId;
        editPointsEl.value = user.points;

        // Store user ID in the save button
        saveUserChangesBtn.setAttribute("data-user-id", userId);

        userEditModal.classList.remove("hidden");
      }

      // Save user changes
      function saveUserChanges() {
        const userId = parseInt(saveUserChangesBtn.getAttribute("data-user-id"));
        const user = mockData.users.find((u) => u.id === userId);
        if (!user) return;

        // Get old team ID
        const oldTeamId = user.teamId;
        
        // Get form values
        const firstName = editFirstNameEl.value.trim();
        const lastName = editLastNameEl.value.trim();
        const email = editEmailEl.value.trim();
        const teamId = parseInt(editTeamEl.value);
        const points = parseInt(editPointsEl.value);

        // Validate form
        if (!firstName || !lastName || !email || isNaN(teamId) || isNaN(points)) {
          showNotification("Please fill in all fields correctly", "error");
          return;
        }

        // Get point difference
        const pointDifference = points - user.points;

        // Update user
        user.firstName = firstName;
        user.lastName = lastName;
        user.email = email;
        user.teamId = teamId;
        user.points = points;

        // Update team points if team changed or points changed
        if (oldTeamId !== teamId || pointDifference !== 0) {
          // Subtract points from old team
          const oldTeam = mockData.teams.find((t) => t.id === oldTeamId);
          if (oldTeam) {
            oldTeam.points -= user.points - pointDifference;
          }

          // Add points to new team
          const newTeam = mockData.teams.find((t) => t.id === teamId);
          if (newTeam) {
            newTeam.points += user.points;
          }
        }
        
        // Add to admin logs
        const logEntry = {
          id: mockData.adminLogs.length + 1,
          adminId: currentAdmin.id,
          action: 'edit',
          details: `Modified user profile for ${firstName} ${lastName}`,
          timestamp: new Date().toISOString(),
          userId: userId
        };
        mockData.adminLogs.push(logEntry);

        // Close modal
        userEditModal.classList.add("hidden");

        // Update UI
        updateDashboard();
        loadUsers();
        loadTeams();
        loadLeaderboardData();
        
        // Update logs if visible
        if (!document.getElementById("logs-section").classList.contains("hidden")) {
          loadAdminLogs();
        }
        
        if (pointsChart) updatePointsChart();
        if (teamPerformanceChart) updateTeamPerformanceChart();

        showNotification("User updated successfully", "success");
      }

      // Load teams
      function loadTeams() {
        const teams = [...mockData.teams].sort((a, b) => b.points - a.points);

        let teamsHtml = "";
        teams.forEach((team, index) => {
          // Count members per team
          const members = mockData.users.filter((u) => u.teamId === team.id);
          const membersCount = members.length;

          // Count approved activities per team
          const teamActivities = mockData.activities.filter(
            (a) => 
              a.status === "approved" && 
              members.some(m => m.id === a.userId)
          );
          
          const activitiesCount = teamActivities.length;

          // Calculate average points per member
          const avgPoints = membersCount > 0 
            ? (team.points / membersCount).toFixed(1) 
            : 0;

          teamsHtml += `
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden">
              <div class="px-4 py-5 sm:p-6">
                <div class="flex items-center">
                  <div class="flex-shrink-0 h-12 w-12 rounded-full ${
                    index === 0
                      ? "bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-300"
                      : "bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"
                  } flex items-center justify-center text-lg font-bold">
                    ${index + 1}
                  </div>
                  <div class="ml-4">
                    <h3 class="text-lg font-medium text-gray-900 dark:text-white">
                      ${team.name}
                    </h3>
                    <div class="mt-1 flex items-center">
                      <div class="flex-shrink-0">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">
                          ${team.points} points
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="mt-5 grid grid-cols-3 gap-4 text-center">
                  <div>
                    <div class="text-2xl font-bold text-gray-900 dark:text-white">
                      ${membersCount}
                    </div>
                    <div class="text-xs text-gray-500 dark:text-gray-400">
                      Members
                    </div>
                  </div>
                  <div>
                    <div class="text-2xl font-bold text-gray-900 dark:text-white">
                      ${activitiesCount}
                    </div>
                    <div class="text-xs text-gray-500 dark:text-gray-400">
                      Activities
                    </div>
                  </div>
                  <div>
                    <div class="text-2xl font-bold text-gray-900 dark:text-white">
                      ${avgPoints}
                    </div>
                    <div class="text-xs text-gray-500 dark:text-gray-400">
                      Avg Pts/Member
                    </div>
                  </div>
                </div>
              </div>
              <div class="bg-gray-50 dark:bg-gray-700 px-4 py-4 sm:px-6">
                <div class="text-sm">
                  <a href="#" class="font-medium text-primary hover:text-indigo-700">
                    View team details
                  </a>
                </div>
              </div>
            </div>
          `;
        });

        teamsCardsContainer.innerHTML = teamsHtml;
      }
      
      // Load activity definitions
      function loadActivityDefinitions() {
        const activityTypes = Object.entries(mockData.activityTypes).map(([key, value]) => ({
          id: key,
          ...value,
          enabled: true // All are enabled by default
        }));
        
        activitiesTableBodyEl.innerHTML = activityTypes
          .map((activity) => {
            const limitDisplay = activity.limit === 999 ? "No limit" : activity.limit;
            const statusClass = activity.enabled 
              ? "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200" 
              : "bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";
            const statusText = activity.enabled ? "Active" : "Disabled";
            
            return `
              <tr data-activity-id="${activity.id}">
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-medium text-gray-900 dark:text-white">${activity.name}</div>
                </td>
                <td class="px-6 py-4">
                  <div class="text-sm text-gray-900 dark:text-white max-w-xs">
                    ${activity.description || "No description provided"}
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm font-bold text-gray-900 dark:text-white">${activity.points}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900 dark:text-white">${limitDisplay}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-900 dark:text-white">
                    ${activity.evidence ? "Yes" : "No"}
                  </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                  <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusClass}">
                    ${statusText}
                  </span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                  <button class="edit-activity-btn text-primary hover:text-indigo-700 mr-2">
                    Edit
                  </button>
                  <button class="toggle-activity-btn ${activity.enabled ? 'text-red-500 hover:text-red-700' : 'text-green-500 hover:text-green-700'}">
                    ${activity.enabled ? 'Disable' : 'Enable'}
                  </button>
                </td>
              </tr>
            `;
          })
          .join("");
          
        // Add event listeners to edit and toggle buttons
        document.querySelectorAll(".edit-activity-btn").forEach(btn => {
          btn.addEventListener("click", () => {
            const row = btn.closest("tr");
            const activityId = row.getAttribute("data-activity-id");
            openActivityEditModal(activityId);
          });
        });
        
        document.querySelectorAll(".toggle-activity-btn").forEach(btn => {
          btn.addEventListener("click", () => {
            const row = btn.closest("tr");
            const activityId = row.getAttribute("data-activity-id");
            toggleActivityStatus(activityId);
          });
        });
      }
      
      // Function to open the activity edit modal
      function openActivityEditModal(activityId) {
        const activity = mockData.activityTypes[activityId];
        if (!activity) return;
        
        document.getElementById("edit-activity-name").value = activity.name;
        document.getElementById("edit-activity-description").value = activity.description || "";
        document.getElementById("edit-activity-points").value = activity.points;
        
        if (activity.limit === 999) {
          document.getElementById("edit-activity-limit").value = 1;
          document.getElementById("edit-activity-limit").disabled = true;
          document.getElementById("edit-activity-no-limit").checked = true;
        } else {
          document.getElementById("edit-activity-limit").value = activity.limit;
          document.getElementById("edit-activity-limit").disabled = false;
          document.getElementById("edit-activity-no-limit").checked = false;
        }
        
        document.getElementById("edit-activity-evidence").checked = activity.evidence;
        
        // Store the activity ID in the save button
        document.getElementById("save-activity-changes").setAttribute("data-activity-id", activityId);
        
        // Show the modal
        activityEditModal.classList.remove("hidden");
      }
      
      // Function to toggle activity status
      function toggleActivityStatus(activityId) {
        const activity = mockData.activityTypes[activityId];
        if (!activity) return;
        
        // Toggle the enabled status (adding if it doesn't exist)
        activity.enabled = activity.enabled === undefined ? false : !activity.enabled;
        
        // Add to admin logs
        const logEntry = {
          id: mockData.adminLogs.length + 1,
          adminId: currentAdmin.id,
          action: 'edit',
          details: `${activity.enabled ? 'Enabled' : 'Disabled'} activity ${activity.name}`,
          timestamp: new Date().toISOString(),
          activityTypeId: activityId
        };
        mockData.adminLogs.push(logEntry);
        
        // Update the UI
        loadActivityDefinitions();
        
        // Update logs if visible
        if (!document.getElementById("logs-section").classList.contains("hidden")) {
          loadAdminLogs();
        }
        
        showNotification(`Activity "${activity.name}" ${activity.enabled ? 'enabled' : 'disabled'} successfully`, "success");
      }
      
      // Save activity changes
      function saveActivityChanges() {
        const activityId = document.getElementById("save-activity-changes").getAttribute("data-activity-id");
        const activity = mockData.activityTypes[activityId];
        if (!activity) return;
        
        // Get form values
        const name = document.getElementById("edit-activity-name").value.trim();
        const description = document.getElementById("edit-activity-description").value.trim();
        const points = parseInt(document.getElementById("edit-activity-points").value);
        const noLimit = document.getElementById("edit-activity-no-limit").checked;
        const limit = noLimit ? 999 : parseInt(document.getElementById("edit-activity-limit").value);
        const evidence = document.getElementById("edit-activity-evidence").checked;
        
        // Validate form
        if (!name || isNaN(points) || (isNaN(limit) && !noLimit)) {
          showNotification("Please fill in all required fields correctly", "error");
          return;
        }
        
        // Update activity
        activity.name = name;
        activity.description = description;
        activity.points = points;
        activity.limit = limit;
        activity.evidence = evidence;
        
        // Add to admin logs
        const logEntry = {
          id: mockData.adminLogs.length + 1,
          adminId: currentAdmin.id,
          action: 'edit',
          details: `Modified activity definition for ${name}`,
          timestamp: new Date().toISOString(),
          activityTypeId: activityId
        };
        mockData.adminLogs.push(logEntry);
        
        // Close modal
        activityEditModal.classList.add("hidden");
        
        // Update UI
        loadActivityDefinitions();
        
        // Update logs if visible
        if (!document.getElementById("logs-section").classList.contains("hidden")) {
          loadAdminLogs();
        }
        
        showNotification("Activity updated successfully", "success");
      }
      
      // Add new activity
      function addNewActivity() {
        // Get form values
        const id = document.getElementById("new-activity-id").value.trim();
        const name = document.getElementById("new-activity-name").value.trim();
        const description = document.getElementById("new-activity-description").value.trim();
        const points = parseInt(document.getElementById("new-activity-points").value);
        const noLimit = document.getElementById("new-activity-no-limit").checked;
        const limit = noLimit ? 999 : parseInt(document.getElementById("new-activity-limit").value);
        const evidence = document.getElementById("new-activity-evidence").checked;
        
        // Validate form
        if (!id || !name || isNaN(points) || (isNaN(limit) && !noLimit)) {
          showNotification("Please fill in all required fields correctly", "error");
          return;
        }
        
        // Check if activity ID already exists
        if (mockData.activityTypes[id]) {
          showNotification("An activity with this ID already exists", "error");
          return;
        }
        
        // Add new activity
        mockData.activityTypes[id] = {
          name,
          description,
          points,
          limit,
          evidence,
          enabled: true
        };
        
        // Add to admin logs
        const logEntry = {
          id: mockData.adminLogs.length + 1,
          adminId: currentAdmin.id,
          action: 'edit',
          details: `Added new activity definition: ${name}`,
          timestamp: new Date().toISOString(),
          activityTypeId: id
        };
        mockData.adminLogs.push(logEntry);
        
        // Close modal
        newActivityModal.classList.add("hidden");
        
        // Update UI
        loadActivityDefinitions();
        
        // Update logs if visible
        if (!document.getElementById("logs-section").classList.contains("hidden")) {
          loadAdminLogs();
        }
        
        showNotification("New activity added successfully", "success");
      }

      // Leaderboard management functions
      
      // Load leaderboard data
      function loadLeaderboardData() {
        // Save original team points for reset functionality
        originalTeamPoints = mockData.teams.map(team => ({
          id: team.id,
          points: team.points
        }));
        
        loadTeamLeaderboard();
        loadIndividualLeaderboard();
      }
      
      // Switch between leaderboard tabs
      function switchLeaderboardTab(tabId, tabButtons, tabContents) {
        // Update tab buttons
        tabButtons.forEach((button) => {
          if (button.id === `tab-${tabId}`) {
            button.classList.remove(
              "text-gray-500",
              "hover:text-gray-700",
              "hover:border-gray-300",
              "dark:text-gray-400",
              "dark:hover:text-gray-300",
              "border-transparent"
            );
            button.classList.add("text-primary", "border-primary");
          } else {
            button.classList.remove("text-primary", "border-primary");
            button.classList.add(
              "text-gray-500",
              "hover:text-gray-700",
              "hover:border-gray-300",
              "dark:text-gray-400",
              "dark:hover:text-gray-300",
              "border-transparent"
            );
          }
        });

        // Update tab contents
        tabContents.forEach((content) => {
          if (content.id === `content-${tabId}`) {
            content.classList.remove("hidden");
          } else {
            content.classList.add("hidden");
          }
        });
      }
      
      // Load team leaderboard
      function loadTeamLeaderboard() {
        // Sort teams by points (descending)
        const sortedTeams = [...mockData.teams].sort((a, b) => b.points - a.points);
        
        teamLeaderboardTable.innerHTML = sortedTeams.map((team, index) => {
          // Count members per team
          const membersCount = mockData.users.filter(u => u.teamId === team.id).length;
          
          return `
            <tr data-team-id="${team.id}">
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium ${
                  index === 0
                    ? "text-yellow-500"
                    : index === 1
                    ? "text-gray-400"
                    : index === 2
                    ? "text-amber-600"
                    : "text-gray-900 dark:text-white"
                }">
                  ${index + 1}${
                index === 0
                  ? ' <i class="fas fa-trophy"></i>'
                  : index === 1
                  ? ' <i class="fas fa-medal"></i>'
                  : index === 2
                  ? ' <i class="fas fa-award"></i>'
                  : ""
              }
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium text-gray-900 dark:text-white">${team.name}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-900 dark:text-white">${membersCount}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-bold text-gray-900 dark:text-white">${team.points}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center space-x-2">
                  <button class="quick-adjust-btn bg-green-100 hover:bg-green-200 dark:bg-green-900 dark:hover:bg-green-800 text-green-800 dark:text-green-200 p-1 rounded" data-team-id="${team.id}" data-adjust="1">
                    +1
                  </button>
                  <button class="quick-adjust-btn bg-green-100 hover:bg-green-200 dark:bg-green-900 dark:hover:bg-green-800 text-green-800 dark:text-green-200 p-1 rounded" data-team-id="${team.id}" data-adjust="5">
                    +5
                  </button>
                  <button class="quick-adjust-btn bg-red-100 hover:bg-red-200 dark:bg-red-900 dark:hover:bg-red-800 text-red-800 dark:text-red-200 p-1 rounded" data-team-id="${team.id}" data-adjust="-1">
                    -1
                  </button>
                  <button class="quick-adjust-btn bg-red-100 hover:bg-red-200 dark:bg-red-900 dark:hover:bg-red-800 text-red-800 dark:text-red-200 p-1 rounded" data-team-id="${team.id}" data-adjust="-5">
                    -5
                  </button>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                <button class="custom-adjust-btn text-primary hover:text-indigo-700" data-team-id="${team.id}">
                  Custom Adjustment
                </button>
              </td>
            </tr>
          `;
        }).join('');
        
        // Add event listeners to adjustment buttons
        document.querySelectorAll(".quick-adjust-btn").forEach(btn => {
          btn.addEventListener("click", handleQuickAdjust);
        });
        
        document.querySelectorAll(".custom-adjust-btn").forEach(btn => {
          btn.addEventListener("click", () => {
            const teamId = parseInt(btn.getAttribute("data-team-id"));
            openTeamPointsModal(teamId);
          });
        });
      }
      
      // Handle quick adjustment of team points
      function handleQuickAdjust(e) {
        const teamId = parseInt(e.target.getAttribute("data-team-id"));
        const adjustment = parseInt(e.target.getAttribute("data-adjust"));
        
        const team = mockData.teams.find(t => t.id === teamId);
        if (!team) return;
        
        // Update team points
        team.points += adjustment;
        
        // Ensure points don't go below 0
        if (team.points < 0) team.points = 0;
        
        // Log the adjustment
        const action = adjustment > 0 ? 'add' : 'subtract';
        const points = Math.abs(adjustment);
        
        addTeamAdjustmentLog(teamId, action, points, "Quick adjustment");
        
        // Update the UI
        loadTeamLeaderboard();
        updateDashboard();
        
        // Update charts
        if (teamPerformanceChart) updateTeamPerformanceChart();
      }
      
      // Open team points adjustment modal
      function openTeamPointsModal(teamId) {
        const team = mockData.teams.find(t => t.id === teamId);
        if (!team) return;
        
        // Set team info in modal
        document.getElementById("adjust-team-name").textContent = team.name;
        document.getElementById("adjust-current-points").textContent = team.points;
        
        // Reset form fields
        document.getElementById("team-points-form").reset();
        
        // Set team ID as a data attribute on the save button
        document.getElementById("save-team-adjustment").setAttribute("data-team-id", teamId);
        
        // Show modal
        teamPointsModal.classList.remove("hidden");
      }
      
      // Save team points adjustment
      function saveTeamPointsAdjustment() {
        const teamId = parseInt(document.getElementById("save-team-adjustment").getAttribute("data-team-id"));
        const team = mockData.teams.find(t => t.id === teamId);
        if (!team) return;
        
        const adjustmentType = document.getElementById("adjustment-type").value;
        const pointsValue = parseInt(document.getElementById("points-adjustment").value);
        const reason = document.getElementById("adjustment-reason").value.trim();
        
        if (isNaN(pointsValue) || pointsValue < 0) {
          showNotification("Please enter a valid points value", "error");
          return;
        }
        
        let newPoints = team.points;
        
        // Calculate new points based on adjustment type
        switch (adjustmentType) {
          case 'add':
            newPoints += pointsValue;
            break;
          case 'subtract':
            newPoints -= pointsValue;
            // Ensure points don't go below 0
            if (newPoints < 0) newPoints = 0;
            break;
          case 'set':
            newPoints = pointsValue;
            break;
        }
        
        // Update team points
        team.points = newPoints;
        
        // Log the adjustment
        addTeamAdjustmentLog(teamId, adjustmentType, pointsValue, reason);
        
        // Close modal
        teamPointsModal.classList.add("hidden");
        
        // Update the UI
        loadTeamLeaderboard();
        updateDashboard();
        
        // Update charts
        if (teamPerformanceChart) updateTeamPerformanceChart();
        
        showNotification(`Team ${team.name} points adjusted successfully`, "success");
      }
      
      // Add team adjustment log entry
      function addTeamAdjustmentLog(teamId, action, points, reason) {
        const team = mockData.teams.find(t => t.id === teamId);
        if (!team) return;
        
        let actionText;
        switch (action) {
          case 'add':
            actionText = `Added ${points} points to`;
            break;
          case 'subtract':
            actionText = `Subtracted ${points} points from`;
            break;
          case 'set':
            actionText = `Set points to ${points} for`;
            break;
        }
        
        // Add admin log entry
        const logEntry = {
          id: mockData.adminLogs.length + 1,
          adminId: currentAdmin.id,
          action: 'edit',
          details: `${actionText} ${team.name}${reason ? ` - Reason: ${reason}` : ''}`,
          timestamp: new Date().toISOString(),
          teamId
        };
        mockData.adminLogs.push(logEntry);
        
        // Update logs UI if visible
        if (!document.getElementById("logs-section").classList.contains("hidden")) {
          loadAdminLogs();
        }
      }
      
      // Reset team changes to original values
      function resetTeamChanges() {
        if (originalTeamPoints.length === 0) return;
        
        // Confirm reset
        if (!confirm("Are you sure you want to reset all team point adjustments?")) return;
        
        // Restore original points
        originalTeamPoints.forEach(original => {
          const team = mockData.teams.find(t => t.id === original.id);
          if (team) {
            team.points = original.points;
          }
        });
        
        // Add log entry
        const logEntry = {
          id: mockData.adminLogs.length + 1,
          adminId: currentAdmin.id,
          action: 'edit',
          details: 'Reset all team point adjustments to original values',
          timestamp: new Date().toISOString()
        };
        mockData.adminLogs.push(logEntry);
        
        // Update the UI
        loadTeamLeaderboard();
        updateDashboard();
        
        // Update charts
        if (teamPerformanceChart) updateTeamPerformanceChart();
        
        // Update logs UI if visible
        if (!document.getElementById("logs-section").classList.contains("hidden")) {
          loadAdminLogs();
        }
        
        showNotification("Team points have been reset to original values", "success");
      }
      
      // Load individual leaderboard
      function loadIndividualLeaderboard(searchTerm = '', teamFilter = 'all') {
        let filteredUsers = [...mockData.users];
        
        // Apply search filter
        if (searchTerm) {
          const lowerSearchTerm = searchTerm.toLowerCase();
          filteredUsers = filteredUsers.filter(user => 
            `${user.firstName} ${user.lastName}`.toLowerCase().includes(lowerSearchTerm)
          );
        }
        
        // Apply team filter
        if (teamFilter !== 'all') {
          filteredUsers = filteredUsers.filter(user => user.teamId === parseInt(teamFilter));
        }
        
        // Sort by points (descending)
        filteredUsers.sort((a, b) => b.points - a.points);
        
        // Take top users for display
        const topUsers = filteredUsers.slice(0, 10);
        
        individualLeaderboardTable.innerHTML = topUsers.map((user, index) => {
          const team = mockData.teams.find(t => t.id === user.teamId);
          
          // Get user's activity stats
          const userActivities = mockData.activities.filter(a => 
            a.userId === user.id && a.status === 'approved'
          );
          
          // Count activities by type
          const activityCounts = {};
          userActivities.forEach(activity => {
            if (!activityCounts[activity.type]) {
              activityCounts[activity.type] = 0;
            }
            activityCounts[activity.type]++;
          });
          
          // Get top 3 activity types
          const topActivities = Object.entries(activityCounts)
            .sort((a, b) => b[1] - a[1])
            .slice(0, 3)
            .map(([type, count]) => {
              const activityName = mockData.activityTypes[type]?.name || type;
              return `${activityName} (${count})`;
            })
            .join(', ');
          
          return `
            <tr data-user-id="${user.id}">
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium ${
                  index === 0
                    ? "text-yellow-500"
                    : index === 1
                    ? "text-gray-400"
                    : index === 2
                    ? "text-amber-600"
                    : "text-gray-900 dark:text-white"
                }">
                  ${index + 1}${
                index === 0
                  ? ' <i class="fas fa-trophy"></i>'
                  : index === 1
                  ? ' <i class="fas fa-medal"></i>'
                  : index === 2
                  ? ' <i class="fas fa-award"></i>'
                  : ""
              }
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                  <div class="flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-300">
                    ${user.firstName.charAt(0)}${user.lastName.charAt(0)}
                  </div>
                  <div class="ml-4">
                    <div class="text-sm font-medium text-gray-900 dark:text-white">
                      ${user.firstName} ${user.lastName}
                    </div>
                    <div class="text-xs text-gray-500 dark:text-gray-400">
                      ${user.email}
                    </div>
                  </div>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-900 dark:text-white">${team ? team.name : 'Unknown'}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-bold text-gray-900 dark:text-white">${user.points}</div>
              </td>
              <td class="px-6 py-4">
                <div class="text-sm text-gray-900 dark:text-white">${topActivities || 'No activities yet'}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                <button class="view-breakdown-btn text-primary hover:text-indigo-700" data-user-id="${user.id}">
                  View Details
                </button>
              </td>
            </tr>
          `;
        }).join('');
        
        // Add event listeners to view breakdown buttons
        document.querySelectorAll(".view-breakdown-btn").forEach(btn => {
          btn.addEventListener("click", () => {
            const userId = parseInt(btn.getAttribute("data-user-id"));
            openActivityBreakdown(userId);
          });
        });
      }
      
      // Filter individual leaderboard based on search and team filter
      function filterIndividualLeaderboard() {
        const searchTerm = document.getElementById("individual-search").value.trim();
        const teamFilter = document.getElementById("individual-team-filter").value;
        loadIndividualLeaderboard(searchTerm, teamFilter);
      }
      
      // Open activity breakdown modal
      function openActivityBreakdown(userId) {
        const user = mockData.users.find(u => u.id === userId);
        if (!user) return;
        
        const team = mockData.teams.find(t => t.id === user.teamId);
        
        // Set user name in modal
        document.getElementById("breakdown-user-name").textContent = `${user.firstName} ${user.lastName}`;
        
        // Get user's activities
        const userActivities = mockData.activities.filter(a => a.userId === userId);
        const approvedActivities = userActivities.filter(a => a.status === 'approved');
        
        // Count activities by type and calculate points by type
        const activityTypes = {};
        approvedActivities.forEach(activity => {
          if (!activityTypes[activity.type]) {
            activityTypes[activity.type] = {
              count: 0,
              points: 0,
              name: mockData.activityTypes[activity.type]?.name || activity.type
            };
          }
          activityTypes[activity.type].count++;
          activityTypes[activity.type].points += activity.points;
        });
        
        // Create activity breakdown list
        const activityBreakdownList = document.getElementById("activity-breakdown-list");
        
        if (Object.keys(activityTypes).length === 0) {
          activityBreakdownList.innerHTML = `<li class="text-gray-500 dark:text-gray-400">No approved activities yet.</li>`;
        } else {
          const activityEntries = Object.values(activityTypes).sort((a, b) => b.points - a.points);
          
          activityBreakdownList.innerHTML = activityEntries.map(entry => `
            <li class="flex justify-between">
              <span class="text-sm">${entry.name} (${entry.count} activities)</span>
              <span class="font-medium">${entry.points} points</span>
            </li>
          `).join('');
        }
        
        // Create points chart
        const ctx = document.getElementById("user-points-chart").getContext("2d");
        
        // Prepare data for chart
        const chartLabels = Object.values(activityTypes).map(type => type.name);
        const chartData = Object.values(activityTypes).map(type => type.points);
        const chartColors = [
          "#5D5CDE", "#FF6384", "#36A2EB", "#FFCE56", "#4BC0C0",
          "#9966FF", "#FF9F40", "#E8C3B9", "#C45850"
        ];
        
        const isDark = document.documentElement.classList.contains("dark");
        const textColor = isDark ? "#f3f4f6" : "#1f2937";
        
        // Destroy previous chart if exists
        if (userPointsChart) {
          userPointsChart.destroy();
        }
        
        userPointsChart = new Chart(ctx, {
          type: "doughnut",
          data: {
            labels: chartLabels,
            datasets: [{
              data: chartData,
              backgroundColor: chartColors.slice(0, chartLabels.length),
              borderWidth: 1
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: "right",
                labels: {
                  color: textColor,
                  font: {
                    size: 11
                  }
                }
              },
              tooltip: {
                callbacks: {
                  label: (context) => {
                    const label = context.label || "";
                    const value = context.raw || 0;
                    const total = context.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
                    const percentage = Math.round((value / total) * 100);
                    return `${label}: ${value} points (${percentage}%)`;
                  }
                }
              }
            }
          }
        });
        
        // Populate recent activities
        const userActivitiesList = document.getElementById("user-activities-list");
        
        if (userActivities.length === 0) {
          userActivitiesList.innerHTML = `
            <tr>
              <td colspan="4" class="px-3 py-4 text-center text-gray-500 dark:text-gray-400">
                No activities found.
              </td>
            </tr>
          `;
        } else {
          // Sort by date, newest first
          const sortedActivities = [...userActivities].sort(
            (a, b) => new Date(b.date) - new Date(a.date)
          );
          
          userActivitiesList.innerHTML = sortedActivities.map(activity => {
            const activityName = mockData.activityTypes[activity.type]?.name || activity.type;
            
            let statusClass, statusText;
            switch (activity.status) {
              case 'approved':
                statusClass = "text-green-500";
                statusText = "Approved";
                break;
              case 'rejected':
                statusClass = "text-red-500";
                statusText = "Rejected";
                break;
              default:
                statusClass = "text-yellow-500";
                statusText = "Pending";
            }
            
            return `
              <tr>
                <td class="px-3 py-2 whitespace-nowrap">
                  <div class="text-xs text-gray-900 dark:text-white">${formatDate(activity.date)}</div>
                </td>
                <td class="px-3 py-2 whitespace-nowrap">
                  <div class="text-xs font-medium text-gray-900 dark:text-white">${activityName}</div>
                  <div class="text-xs text-gray-500 dark:text-gray-400">${activity.details.substring(0, 30)}${activity.details.length > 30 ? '...' : ''}</div>
                </td>
                <td class="px-3 py-2 whitespace-nowrap">
                  <div class="text-xs font-medium text-gray-900 dark:text-white">${activity.points}</div>
                </td>
                <td class="px-3 py-2 whitespace-nowrap">
                  <div class="text-xs ${statusClass}">${statusText}</div>
                </td>
              </tr>
            `;
          }).join('');
        }
        
        // Show modal
        activityBreakdownModal.classList.remove("hidden");
      }
      
      // Export leaderboard to CSV
      function exportLeaderboardCSV() {
        const isTeamTab = !document.getElementById("content-team-leaderboard").classList.contains("hidden");
        
        if (isTeamTab) {
          // Export team leaderboard
          const sortedTeams = [...mockData.teams].sort((a, b) => b.points - a.points);
          
          // Create CSV content
          let csvContent = "Rank,Team,Members,Points\n";
          
          sortedTeams.forEach((team, index) => {
            const membersCount = mockData.users.filter(u => u.teamId === team.id).length;
            csvContent += `${index + 1},"${team.name}",${membersCount},${team.points}\n`;
          });
          
          // Display notification
          showNotification("Team leaderboard CSV export would be downloaded in a real implementation", "success");
        } else {
          // Export individual leaderboard
          const sortedUsers = [...mockData.users].sort((a, b) => b.points - a.points);
          
          // Create CSV content
          let csvContent = "Rank,Name,Email,Team,Points\n";
          
          sortedUsers.forEach((user, index) => {
            const team = mockData.teams.find(t => t.id === user.teamId);
            csvContent += `${index + 1},"${user.firstName} ${user.lastName}","${user.email}","${team ? team.name : 'Unknown'}",${user.points}\n`;
          });
          
          // Display notification
          showNotification("Individual leaderboard CSV export would be downloaded in a real implementation", "success");
        }
      }
      
      // Export leaderboard to PDF
      function exportLeaderboardPDF() {
        // In a real implementation, this would use a library like jsPDF
        showNotification("PDF export functionality would be implemented with jsPDF in a real application", "success");
      }
      
      // Logs & Notifications functions
      
      // Load logs and announcements data
      function loadLogsData() {
        loadAdminLogs();
        loadModerationLogs();
        loadAnnouncements();
      }
      
      // Switch between log tabs
      function switchLogTab(tabId, tabButtons, tabContents) {
        // Update tab buttons
        tabButtons.forEach((button) => {
          if (button.id === `tab-${tabId}`) {
            button.classList.remove(
              "text-gray-500",
              "hover:text-gray-700",
              "hover:border-gray-300",
              "dark:text-gray-400",
              "dark:hover:text-gray-300",
              "border-transparent"
            );
            button.classList.add("text-primary", "border-primary");
          } else {
            button.classList.remove("text-primary", "border-primary");
            button.classList.add(
              "text-gray-500",
              "hover:text-gray-700",
              "hover:border-gray-300",
              "dark:text-gray-400",
              "dark:hover:text-gray-300",
              "border-transparent"
            );
          }
        });

        // Update tab contents
        tabContents.forEach((content) => {
          if (content.id === `content-${tabId}`) {
            content.classList.remove("hidden");
          } else {
            content.classList.add("hidden");
          }
        });
      }
      
      // Load admin activity logs
      function loadAdminLogs(adminFilter = 'all', actionFilter = 'all') {
        const adminLogsTableBody = document.getElementById("admin-logs-table-body");
        
        let filteredLogs = [...mockData.adminLogs];
        
        // Apply filters
        if (adminFilter !== 'all') {
          filteredLogs = filteredLogs.filter(log => log.adminId === parseInt(adminFilter));
        }
        
        if (actionFilter !== 'all') {
          filteredLogs = filteredLogs.filter(log => log.action === actionFilter);
        }
        
        // Sort by timestamp (newest first)
        filteredLogs.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        
        adminLogsTableBody.innerHTML = filteredLogs.map(log => {
          const admin = mockData.admins.find(a => a.id === log.adminId);
          const adminName = admin ? `${admin.firstName} ${admin.lastName}` : 'Unknown';
          
          let actionClass, actionText;
          switch (log.action) {
            case 'login':
              actionClass = 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200';
              actionText = 'Login';
              break;
            case 'approve':
              actionClass = 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200';
              actionText = 'Approval';
              break;
            case 'reject':
              actionClass = 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';
              actionText = 'Rejection';
              break;
            case 'edit':
              actionClass = 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200';
              actionText = 'Edit';
              break;
            case 'announcement':
              actionClass = 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200';
              actionText = 'Announcement';
              break;
            default:
              actionClass = 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200';
              actionText = log.action.charAt(0).toUpperCase() + log.action.slice(1);
          }
          
          return `
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-900 dark:text-white">${formatDateTime(log.timestamp)}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium text-gray-900 dark:text-white">${adminName}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${actionClass}">
                  ${actionText}
                </span>
              </td>
              <td class="px-6 py-4">
                <div class="text-sm text-gray-900 dark:text-white">${log.details}</div>
              </td>
            </tr>
          `;
        }).join('');
      }
      
      // Filter admin logs based on selection
      function filterAdminLogs() {
        const adminFilter = document.getElementById("admin-filter").value;
        const actionFilter = document.getElementById("action-filter").value;
        loadAdminLogs(adminFilter, actionFilter);
      }
      
      // Load moderation logs
      function loadModerationLogs(statusFilter = 'all', searchTerm = '') {
        const moderationLogsTableBody = document.getElementById("moderation-logs-table-body");
        
        let filteredLogs = [...mockData.moderationLogs];
        
        // Apply status filter
        if (statusFilter !== 'all') {
          filteredLogs = filteredLogs.filter(log => log.decision === statusFilter);
        }
        
        // Apply search term
        if (searchTerm) {
          const lowerSearchTerm = searchTerm.toLowerCase();
          filteredLogs = filteredLogs.filter(log => {
            const user = mockData.users.find(u => u.id === log.userId);
            const userName = user ? `${user.firstName} ${user.lastName}`.toLowerCase() : '';
            const activity = mockData.activities.find(a => a.id === log.activityId);
            const activityType = activity ? activity.type.toLowerCase() : '';
            const activityTypeName = activity && mockData.activityTypes[activity.type] 
              ? mockData.activityTypes[activity.type].name.toLowerCase() 
              : '';
            const notes = log.notes.toLowerCase();
            
            return userName.includes(lowerSearchTerm) || 
                   activityType.includes(lowerSearchTerm) || 
                   activityTypeName.includes(lowerSearchTerm) || 
                   notes.includes(lowerSearchTerm);
          });
        }
        
        // Sort by timestamp (newest first)
        filteredLogs.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        
        moderationLogsTableBody.innerHTML = filteredLogs.map(log => {
          const user = mockData.users.find(u => u.id === log.userId);
          const userName = user ? `${user.firstName} ${user.lastName}` : 'Unknown';
          
          const activity = mockData.activities.find(a => a.id === log.activityId);
          const activityType = activity && mockData.activityTypes[activity.type] 
            ? mockData.activityTypes[activity.type].name 
            : (activity ? activity.type : 'Unknown');
          
          const admin = mockData.admins.find(a => a.id === log.adminId);
          const adminName = admin ? `${admin.firstName} ${admin.lastName}` : 'Unknown';
          
          let decisionClass, decisionText;
          switch (log.decision) {
            case 'approved':
              decisionClass = 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200';
              decisionText = 'Approved';
              break;
            case 'rejected':
              decisionClass = 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';
              decisionText = 'Rejected';
              break;
            default:
              decisionClass = 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200';
              decisionText = 'Pending';
          }
          
          return `
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-900 dark:text-white">${formatDateTime(log.timestamp)}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium text-gray-900 dark:text-white">${userName}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-900 dark:text-white">${activityType}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${decisionClass}">
                  ${decisionText}
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-900 dark:text-white">${adminName}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-500 dark:text-gray-400">${log.notes || '-'}</div>
              </td>
            </tr>
          `;
        }).join('');
      }
      
      // Filter moderation logs based on selection
      function filterModerationLogs() {
        const statusFilter = document.getElementById("moderation-status-filter").value;
        const searchTerm = document.getElementById("moderation-search").value.trim();
        loadModerationLogs(statusFilter, searchTerm);
      }
      
      // Load announcements
      function loadAnnouncements() {
        const announcementsTableBody = document.getElementById("announcements-table-body");
        
        // Sort by timestamp (newest first)
        const sortedAnnouncements = [...mockData.announcements].sort(
          (a, b) => new Date(b.timestamp) - new Date(a.timestamp)
        );
        
        announcementsTableBody.innerHTML = sortedAnnouncements.map(announcement => {
          const admin = mockData.admins.find(a => a.id === announcement.adminId);
          const adminName = admin ? `${admin.firstName} ${admin.lastName}` : 'Unknown';
          
          let audienceText;
          if (announcement.audience === 'all') {
            audienceText = 'All Users';
          } else {
            const team = mockData.teams.find(t => t.id === parseInt(announcement.audience));
            audienceText = team ? team.name : 'Unknown Team';
          }
          
          return `
            <tr data-announcement-id="${announcement.id}">
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-900 dark:text-white">${formatDateTime(announcement.timestamp)}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium text-gray-900 dark:text-white">${adminName}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-900 dark:text-white">${audienceText}</div>
              </td>
              <td class="px-6 py-4">
                <div class="flex items-center">
                  ${announcement.important ? `<i class="fas fa-exclamation-circle text-red-500 mr-2"></i>` : ''}
                  <div class="text-sm font-medium text-gray-900 dark:text-white">${announcement.subject}</div>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                <button class="view-announcement-btn text-primary hover:text-indigo-700" data-id="${announcement.id}">
                  View
                </button>
              </td>
            </tr>
          `;
        }).join('');
        
        // Add event listeners to view buttons
        document.querySelectorAll(".view-announcement-btn").forEach(btn => {
          btn.addEventListener("click", () => {
            const announcementId = parseInt(btn.getAttribute("data-id"));
            openAnnouncementView(announcementId);
          });
        });
      }
      
      // Open announcement view modal
      function openAnnouncementView(announcementId) {
        const announcement = mockData.announcements.find(a => a.id === announcementId);
        if (!announcement) return;
        
        const admin = mockData.admins.find(a => a.id === announcement.adminId);
        const adminName = admin ? `${admin.firstName} ${admin.lastName}` : 'Unknown';
        
        let audienceText;
        if (announcement.audience === 'all') {
          audienceText = 'All Users';
        } else {
          const team = mockData.teams.find(t => t.id === parseInt(announcement.audience));
          audienceText = team ? team.name : '